import{j as t,r as h}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581.js";import{u as g,a as v,j as C,h as T}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458120.js";import{aF as I,aG as E,aH as F,aI as P,aJ as L,aK as z,aL as H,aM as O,aN as V,aO as K,aP as U,aQ as W,aR as J,aS as $,aT as q,aU as G,aV as Q,aW as X,aX as Y,m as y,v as Z,I as ee}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458123.js";import{i as se,g as ae}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458122.js";import{b as te,B as oe}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458129.js";import{W as j,C as re,R as ce,I as b,_ as N,J as R,D as ne,bb as ie,bc as ue,V as le,K as pe,Q as de}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458111.js";import{M as me,R as he,f as fe,b as ge,c as be,d as ke}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458124.js";import{M as je,R as xe}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458131.js";import{a as w}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458130.js";import{M as Be,R as ye}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458127.js";import{M as Ne,R as ve}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458126.js";import{M as Re,R as we}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458125.js";import{M as Ae,R as Me}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458128.js";import{r as _e}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458132.js";import{c as De}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b7645818.js";import{B as Se}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458174.js";import{b as Ce}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458165.js";import{e as Te}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581151.js";import{o as Ie}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458143.js";import{u as k}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458146.js";import{V as Ee}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458119.js";const A=async e=>{w.setState({notes:e}),await j("notes",e),chrome.runtime.sendMessage({action:"notesBackup"})},Fe=e=>{const s=[...w.getState().notes];e.forEach(a=>{const o=s.findIndex(n=>n.id===a.id);o===-1?s.push(a):s[o]=a}),A(s)},r=(e,s)=>{console.error(`Erro ao realizar a importação do backup: [${e}] `,s)},i=(e,s,a)=>{try{const{backup:o}=M.getState();if(s&&typeof o[e]=="string"){const n=re.decryptData(o[e]);return typeof n===a?{success:!0,backup:n}:{success:!1,backup:null}}else return typeof o[e]===a?{success:!0,backup:o[e]}:{success:!1,backup:null}}catch(o){return console.error("Error ao descompactar backup, key:",e,"erro da operação:",o),{success:!1,backup:null}}};function Pe(e,s,a){switch(e){case"respostasRapidas":Le(i(e,s,"object"),i("categoria",s,"object"),i("respostasRapidasAcao",s,"object"),i("guardaMsg",s,"object"),i("medias",s,"object"),a);break;case"respostasRapidasAcao":case"guardaMsg":case"categoria":case"medias":console.warn(`A funcionalidade para "${e}" está inclusa em guardaMsg`);break;case"agendamentos":He(i(e,s,"object"),i("agendamentosNaoDisparados",s,"object"),i("sendAfterWhatsAppOpens",s,"object"),a);break;case"agendamentosNaoDisparados":case"sendAfterWhatsAppOpens":console.warn(`A funcionalidade para "${e}" está inclusa em agendamentos`);break;case"crm":Oe(i(e,s,"object"),a);break;case"contatos":Ve(i(e,s,"object"),a);break;case"notes":Ke(i(e,s,"object"),a);break;case"notifications":Ue(i(e,s,"object"),a);break;case"perfil":We(i(e,s,"object"),a);break;case"userTabs":Je(i(e,s,"object"),a);break;case"agrupamentos":$e(i(e,s,"object"),a);break;case"relatorio":qe(i(e,s,"object"),a);break;case"encomendas":Ge(i(e,s,"object"),a);break;case"autoatendimento":Qe(i(e,s,"object"),a);break;case"webhook":Ye(i(e,s,"object"));break;case"IA":Ze(i(e,s,"object"));break;case"status":es(i(e,s,"object"),a);break;case"pinChat":ss(i(e,s,"object"),a);break;case"atendimento":as(i(e,s,"object"));break;case"backupAutomatico":ts(i(e,s,"object"));break;case"whatsApi":os(i(e,s,"object"));break;case"FollowUp":Xe(i(e,s,"object"),a);break;case"fluxo":ze(i(e,s,"object"),i("fluxoFiles",s,"object"),a);break;case"replacementStorage":rs(i(e,s,"object"),a);break;default:console.error("Chave de importação desconhecida:",e);break}}const Le=(e,s,a,o,n,p)=>{try{if(!e.success&&!o.success){r("respostasRapidas, guardaMsg","[DescompressBackup] => Não retornou sucesso");return}e.success||(e.backup=[],console.warn("[respostasRapidas] => Vazio")),s.success||(s.backup=[],console.warn("[categoria] => Vazio")),a.success||(a.backup=[],console.warn("[respostasRapidasAcao] => Vazio")),o.success||(o.backup=[],console.warn("[guardaMsg] => Vazio")),n.success||(n.backup=[],console.warn("[medias] => Vazio"));const c=fe(e.backup,o.backup),u=ge(a.backup,n.backup,e.backup,o.backup);p?be(u,c,s.backup):ke(u,c,s.backup)}catch(c){r("guardaMsg, categoria, medias",c)}},ze=(e,s,a)=>{try{if(!e.success){r("fluxo","[DescompressBackup] => Não retornou sucesso");return}const o=e.backup;s.success&&j("fluxoFiles",s.backup),a?F(o):P(o),chrome.runtime.sendMessage({action:"reloadFluxo"})}catch(o){r("fluxo",o)}},He=(e,s,a,o)=>{try{let n=s.backup,p=a.backup;if(!e.success){r("agendamentos","[DescompressBackup] => Não retornou sucesso");return}s.success||(n=[],r("agendamentosNaoDisparados","[DescompressBackup] => Não retornou sucesso")),a.success||(p=!1,r("sendAfterWhatsAppOpens","[DescompressBackup] => Não retornou sucesso")),o?je(e.backup,n,p):xe(e.backup,n,p)}catch{}},Oe=async({success:e,backup:s},a)=>{try{if(!e){r("crm","[DescompressBackup] => Não retornou sucesso");return}if(a){const o=await ce("crm"),n=new Set,p=o.filter(d=>n.has(d.id)?!1:(n.add(d.id),!0)),c=s.filter(d=>!n.has(d.id)),u=p.concat(c);await j("crm",u),chrome.runtime.sendMessage({action:"post-crm"})}else await j("crm",s),chrome.runtime.sendMessage({action:"post-crm"})}catch(o){r("crm",o)}},Ve=({success:e,backup:s},a)=>{try{if(!e){r("contatos","[DescompressBackup] => Não retornou sucesso");return}a?X(s):Y(s)}catch(o){r("contatos",o)}},Ke=({success:e,backup:s},a)=>{try{if(!e){r("notes","[DescompressBackup] => Não retornou sucesso");return}a?Fe(s):A(s)}catch(o){r("notes",o)}},Ue=({success:e,backup:s},a)=>{try{if(!e){r("notifications","[DescompressBackup] => Não retornou sucesso");return}a?G(s):Q(s)}catch(o){r("notifications",o)}},We=({success:e,backup:s},a)=>{try{if(!e){r("perfil","[DescompressBackup] => Não retornou sucesso");return}a?$(s):q(s)}catch(o){r("perfil",o)}},Je=({success:e,backup:s},a)=>{try{if(!e){r("userTabs","[DescompressBackup] => Não retornou sucesso");return}a?me(s):he(s)}catch(o){r("userTabs",o)}},$e=({success:e,backup:s},a)=>{try{if(!e){r("agrupamentos","[DescompressBackup] => Não retornou sucesso");return}a?Be(s):ye(s)}catch(o){r("agrupamentos",o)}},qe=({success:e,backup:s},a)=>{try{if(!e){r("relatorio","[DescompressBackup] => Não retornou sucesso");return}a?Ne(s):ve(s)}catch(o){r("relatorio",o)}},Ge=({success:e,backup:s},a)=>{try{if(!e){r("encomendas","[DescompressBackup] => Não retornou sucesso");return}a?Re(s):we(s)}catch(o){r("encomendas",o)}},Qe=({success:e,backup:s},a)=>{try{if(!e){r("autoatendimento","[DescompressBackup] => Não retornou sucesso");return}a?W(s):J(s)}catch(o){r("autoatendimento",o)}},Xe=({success:e,backup:s},a)=>{try{if(!e){r("autoatendimento","[DescompressBackup] => Não retornou sucesso");return}a?L(s):z(s)}catch(o){r("autoatendimento",o)}},Ye=({success:e,backup:s})=>{try{if(!e){r("webhook","[DescompressBackup] => Não retornou sucesso");return}U(s)}catch(a){r("webhook",a)}},Ze=({success:e,backup:s})=>{try{if(!e){r("IA","[DescompressBackup] => Não retornou sucesso");return}K(s)}catch(a){r("IA",a)}},es=({success:e,backup:s},a)=>{try{if(!e){r("status","[DescompressBackup] => Não retornou sucesso");return}a?Ae(s):Me(s)}catch(o){r("status",o)}},ss=({success:e,backup:s},a)=>{try{if(!e){r("pinChat","[DescompressBackup] => Não retornou sucesso");return}a?O(s):V(s)}catch(o){r("pinChat",o)}},as=({success:e,backup:s})=>{try{if(!e){r("atendimento","[DescompressBackup] => Não retornou sucesso");return}H(s)}catch(a){r("atendimento",a)}},ts=({success:e,backup:s})=>{try{if(!e){r("backupAutomatico","[DescompressBackup] => Não retornou sucesso");return}te(s)}catch(a){r("backupAutomatico",a)}},os=({success:e,backup:s})=>{try{if(!e){r("whatsApi","[DescompressBackup] => Não retornou sucesso");return}_e(s)}catch(a){r("whatsApi",a)}},rs=({success:e,backup:s},a)=>{try{if(!e){r("replacementStorage","[DescompressBackup] => Não retornou sucesso");return}a?I(s):E(s)}catch(o){r("replacementStorage",o)}},M=De()((e,s)=>({backup:null,keys:[],extractFile:a=>{const{language:o}=g.getState(),{close:n}=y.getState(),p=new FileReader;p.readAsText(a,"UTF-8"),p.onload=c=>{try{const u=JSON.parse(c.target.result);if(typeof u!="object"){b({type:"Error",message:o.fileNotBK,position:"top-right"});return}const d=oe.filter(f=>f.keys.some(x=>f.tag==="all"?!0:!!u[x.key]));e({keys:d,backup:u})}catch(u){n(),console.error("Erro ao importar Backup",u),b({type:"Error",message:o.fileNotBK,position:"top-right"})}}},setActiveKey:(a,o)=>e(n=>({keys:n.keys.map(c=>a==="all"?{...c,checked:o}:c.tag===a?{...c,checked:o}:c.tag==="all"&&!o?{...c,checked:!1}:c)})),setActiveMerge:(a,o)=>e(n=>({keys:n.keys.map(c=>a==="all"?{...c,merge:o}:c.tag===a?{...c,merge:o}:c.tag==="all"&&!o?{...c,merge:!1}:c)})),formatBackup:()=>{const{keys:a}=s(),{close:o,openRendertype:n}=y.getState(),{language:p}=g.getState(),{session:c}=v.getState();if(!a.find(u=>u.checked)){b({type:"Error",message:p.selectBkItemImport,position:"top-right"});return}if(!c.is_premium){n("user_free");return}for(const u of a)if(u.tag!=="all"&&u.checked)for(const d of u.keys)Pe(d.key,d.compress,u.merge);o(),b({type:"Success",message:p.backupImported,position:"top-right"})}}));function cs(){const{idioma:e,setIdioma:s}=g(),a=n=>{s(n),chrome.runtime.sendMessage({action:"languageReload",lang:n})};return t.jsxs("select",{className:"select pt-0 select-bordered select-sm w-fit max-w-xs shadow-sm",value:e,onChange:n=>{a(n.target.value)},id:"select-language",children:[t.jsx("option",{value:"pt",children:"Português"}),t.jsx("option",{value:"es",children:"Español"}),t.jsx("option",{value:"en",children:"English"})]})}const ns=h.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581160.js")),[]));function is(){return t.jsx(h.Suspense,{fallback:t.jsx(t.Fragment,{}),children:t.jsx(ns,{})})}const us=h.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581161.js")),[]));function ls(){return t.jsx(h.Suspense,{fallback:t.jsx(t.Fragment,{}),children:t.jsx(us,{})})}const ps=h.lazy(() => __vitePreload(()=>import(chrome.runtime.getURL("content/assets/js/v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581162.js")),[]));function ds(){return t.jsx(h.Suspense,{fallback:t.jsx(t.Fragment,{}),children:t.jsx(ps,{})})}function ms(){const{privacityOptions:e,setPrivacityOptions:s}=se(),{language:a}=g(),o=c=>{s({...e,[c]:{hide:!e[c].hide}})},n=[{tag:"photoHidden",nome:a.ocutar_foto,checked:e.photoHidden.hide},{tag:"nameHidden",nome:a.ocutar_nome,checked:e.nameHidden.hide},{tag:"midiaHidden",nome:a.ocutar_midia,checked:e.midiaHidden.hide},{tag:"galeryHidden",nome:a.ocutar_galeria,checked:e.galeryHidden.hide},{tag:"lastMessageHidden",nome:a.ocutar_mensagem,checked:e.lastMessageHidden.hide},{tag:"messageHidden",nome:a.ocutar_chat,checked:e.messageHidden.hide}];return t.jsx(t.Fragment,{children:n.map((c,u)=>t.jsx("label",{htmlFor:c.tag,children:t.jsxs("div",{className:"flex justify-between cursor-pointer items-center h-9 py-2 rounded-lg hover:bg-[var(--dropdown-background-hover)] px-2",children:[t.jsx("span",{children:c.nome}),t.jsx(R,{id:c.tag,switchUpdate:()=>{o(c.tag)},estado:c.checked})]})},u))})}const m="flex justify-between cursor-pointer items-center h-9 py-2 rounded-lg hover:bg-[var(--dropdown-background-hover)] px-2";function hs(){const e=g(l=>l.language),s=ae(l=>l.close),a=M(l=>l.extractFile),{open:o,openRendertype:n}=y(k(l=>({open:l.open,openRendertype:l.openRendertype}))),{tema:p,setTema:c}=Z(k(l=>({tema:l.tema,setTema:l.setTema}))),{theme:u,setTheme:d}=C(k(l=>({theme:l.theme,setTheme:l.setTheme}))),{session:f,user:x,logout:_}=v(k(l=>({session:l.session,user:l.user,logout:l.logout}))),D=T(),[B,S]=h.useState(!1);return t.jsxs("div",{children:[t.jsx(ne,{children:e.configAgendamento_title}),t.jsxs("div",{className:"pt-2 flex flex-col gap-2 overflow-auto",style:{maxHeight:"calc(100vh - 70px)"},children:[t.jsx("label",{htmlFor:"select-language",children:t.jsxs("div",{className:m,children:[t.jsx("span",{children:e.idioma}),t.jsx(cs,{})]})}),t.jsx("label",{htmlFor:"handleTheme",children:t.jsxs("div",{className:m,children:[t.jsx("span",{children:e.tema}),t.jsx(R,{estado:u,switchUpdate:()=>d(!u),id:"handleTheme"})]})}),t.jsx("label",{htmlFor:"handleMenuTheme",children:t.jsxs("div",{className:m,children:[t.jsx("span",{children:e.tema_menu}),t.jsxs("select",{className:"select pt-0 select-bordered select-sm w-fit max-w-xs shadow-sm",value:p,onChange:l=>{c(l.target.value)},id:"handleMenuTheme",children:[t.jsx("option",{value:"default",children:e.default}),t.jsx("option",{value:"dark",children:e.dark}),t.jsx("option",{value:"original",children:e.original}),t.jsx("option",{value:"whats",children:e.whats}),t.jsx("option",{value:"prime",children:e.prime}),t.jsx("option",{value:"dim",children:e.dim})]})]})}),t.jsx("div",{onClick:Ie,className:m,children:t.jsx("span",{children:e.painel_Gestor})}),t.jsxs("div",{onClick:()=>S(!B),className:m,children:[t.jsx("span",{children:e.privacidade}),t.jsx("span",{className:"w-fit",children:B?t.jsx(ie,{className:"w-6 h-6"}):t.jsx(ue,{className:"w-6 h-6"})})]}),B&&t.jsx(ms,{}),t.jsx("div",{onClick:()=>{s(),o(t.jsx(ls,{}))},className:m,children:t.jsx("span",{children:e.backup})}),t.jsx("label",{htmlFor:"jsonInput",children:t.jsxs("div",{className:m,children:[t.jsx("span",{children:e.import_backup}),t.jsx("input",{type:"file",accept:".json",id:"jsonInput",className:"hidden",onChange:l=>{a(l.target.files[0]),s(),o(t.jsx(ds,{}))}})]})}),t.jsx("div",{onClick:()=>{s(),o(t.jsx(is,{}))},className:m,children:t.jsx("span",{children:e.backupAutomatico})}),t.jsx("div",{onClick:()=>{s(),o(t.jsx(ee,{}),!0)},className:m,children:t.jsx("span",{children:e.assistenteIA})}),t.jsx("div",{onClick:()=>Te(!0),className:m,children:t.jsx("span",{children:e.exportarTodosPerfis})}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"m-auto",children:t.jsx(Se,{})}),f.is_premium&&t.jsx("span",{className:"m-auto",children:t.jsx(le,{type:"default",btnPremium:e.btnPremiumLogado,checkout:D,webhook:Ce})})]}),t.jsx("div",{className:"flex items-center justify-center gap-4 pb-4 pt-4",children:f.is_auth?t.jsx(pe,{name:e.deslogar,funcao:_}):t.jsx(de,{name:e.logar,funcao:()=>n("login")})})]}),t.jsx("div",{className:"absolute bottom-0 mb-[7px]",style:{width:"calc(100% - 30px)"},children:t.jsxs("div",{className:"flex justify-between",children:[f.is_auth&&t.jsx("kbd",{className:"kbd kbd-sm mb-1 rounded",children:x.email}),t.jsxs("kbd",{className:"kbd kbd-sm mb-1  rounded",children:[e.version," ",Ee.version]})]})})]})}const Ps=Object.freeze(Object.defineProperty({__proto__:null,default:hs},Symbol.toStringTag,{value:"Module"}));export{Ps as i,M as u};
