import{r as n,j as e}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581.js";import{A as E,L as B}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b7645816.js";import{u as R,a as T,j as H}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458120.js";import{u as L,m as M}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458123.js";import{D as O,H as P,Q as U,X as k}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458111.js";import{I as z}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581212.js";import{W as _}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458119.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b7645818.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b7645817.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b7645814.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b7645813.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b7645812.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458110.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b7645819.js";const F=({selectAll:u,pesquisar:a,setSelecionados:j,tabId:p})=>{const{userTabs:h}=L(),g=H.getState().isBusiness,[l,C]=n.useState([]);n.useEffect(()=>{(async()=>{const s=await _.Chat("List"),r=await _.Contact("List","onlyMyContacts"),i=g?await _.Contact("List","allLabels"):[],A=h.find(c=>c.id===p)?.chats.map(c=>({id:c.id,name:c.id}))??[],N=s.concat(r).concat(i).concat(A),w=[],y=new Set;N.forEach(c=>{c.id&&!y.has(c.id)&&(y.add(c.id),w.push(c))}),f(w),C(w)})()},[]);const[o,f]=n.useState([]);n.useEffect(()=>{if(a.length===0)f(l);else{let t=[];l.forEach(s=>{(s.id.includes(a)||s.name?.toUpperCase().includes(a.toUpperCase()))&&t.push(s)}),f(t)}},[a]);const[d,m]=n.useState(new Set);n.useEffect(()=>{if(u)m(new Set);else{const t=o.map(s=>s.id);m(new Set(t))}},[u]);const x=t=>{m(s=>{const r=new Set(s);return r.has(t)?r.delete(t):r.add(t),r})};n.useEffect(()=>{h.forEach(t=>{t.id===p&&t.chats.forEach(s=>{x(s.id)})})},[h]),n.useEffect(()=>{j(l.filter(t=>d.has(t.id)))},[l,d]);const S=({index:t,key:s,style:r})=>{const i=o[t];if(i)return e.jsx("li",{style:r,children:e.jsx("div",{className:"form-control",children:e.jsxs("label",{className:"cursor-pointer label gap-2 justify-start",children:[e.jsx(k,{id:i.id,estado:d.has(i.id),checkedUpdade:()=>x(i.id)}),e.jsx("span",{className:"flex-[inherit] overflow-hidden text-ellipsis whitespace-nowrap",children:e.jsx("strong",{children:i.name})}),e.jsx("span",{children:i.id})]})})},i.id)},b=e.jsx("div",{className:"w-full pt-2",children:e.jsx("ul",{className:"gap-2 overflow-y-auto overflow-x-hidden justify-center",style:{maxHeight:"calc(100vh - 240px)",minHeight:"60px",height:`${o.length*32}px`},children:e.jsx(E,{children:({width:t,height:s})=>e.jsx(B,{width:t,height:s,rowCount:o.length,rowHeight:32,rowRenderer:S})})})}),v=e.jsx("div",{children:e.jsx("ul",{children:e.jsx("div",{style:{maxHeight:"calc(100vh - 300px)"},className:"grid overflow-auto mt-4 gap-1",children:e.jsx("li",{children:e.jsx("div",{children:e.jsx("span",{className:"w-full flex justify-center p-4",children:e.jsxs("strong",{children:[" ",a.length!==0?"Nenhum contato encontrado":"Carregando...","  "]})})})})})})});return o.length!==0?b:v};function se({tabId:u}){const{language:a}=R(),{setChatsTab:j}=L(),{openRendertype:p,close:h}=M(),g=T(v=>v.session),[l,C]=n.useState(""),[o,f]=n.useState(!0),d=()=>{f(!o)},[m,x]=n.useState([]);m.length>5&&!g.is_premium&&p("user_free");const S=async()=>{h(),j(m,u)};return e.jsxs("div",{className:"w-[508px] h-fit",children:[e.jsx(O,{children:a.menu_moreAba_addContact_title}),e.jsx(P,{children:a.menu_moreAba_addContact_subTitle}),e.jsx(z,{inpPlaceTxt:a.menu_moreAba_addContact_placeContact,inpValue:l,inpSetValue:C,selectAll:o,btnConfirmName:a.menu_moreAba_addContact_placeButtonSelectAll,btnConfirmFuncao:d,btnNegacaoName:a.menu_moreAba_removeAll,btnNegacaoFuncao:d}),e.jsx(F,{selectAll:o,pesquisar:l,setSelecionados:x,tabId:u}),e.jsx("div",{className:"flex justify-end p-2",children:e.jsx(U,{name:a.menu_moreAba_addContact_placeButtonSave,funcao:S})})]})}export{se as default};
