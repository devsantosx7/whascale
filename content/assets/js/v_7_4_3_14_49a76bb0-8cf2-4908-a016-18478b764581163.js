import{j as t,m as Rt,r as R,R as K}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581.js";import{u as b,p as Le,j as Ft,d as Kt,n as ut,a as Xt,h as Nn}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458120.js";import{c as z}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b7645818.js";import{f as tt,u as Rn}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458122.js";import{a as j,C as I,d as Fn,E as Pn,u as Yt}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581105.js";import{P as gt,bp as kn,aa as In,bI as $n,bJ as Mn,bK as An,bL as Dn,bM as zn,bN as En,aD as Jt,I as A,r as Qt,ac as S,a8 as Zt,bO as Ln,bP as Tn,bQ as Vn,bR as Gn,bS as On,bT as Hn,bU as Bn,bV as qn,bW as Un,bX as Wn,bY as Kn,bZ as Xn,b_ as Pt,b$ as Yn,c0 as Jn,c1 as Qn,c2 as kt,c3 as It,c4 as Zn,c5 as es,c6 as ts,c7 as ns,c8 as ss,c9 as as,ca as rs,cb as is,cc as os,cd as mt,J as $t,ce as en,cf as ls,cg as X,ch as tn,ci as pt,cj as cs,ck as He,cl as _e,cm as ds,cn as Ie,co as nn,cp as ee,ad as nt,cq as st,D as sn,Q as Mt,cr as At,cs as us,ct as gs,cu as ms,cv as ps,cw as xs,cx as fs,cy as hs,cz as vs,cA as bs,c as _s,a7 as Cs,bs as js,cB as ys,cC as ws,a9 as xt,ab as $e,cD as Ae,cE as ft,cF as an,cG as Me,cH as Ss,cI as Be,cJ as Se,cK as Ns,cL as Rs,b as rn,bk as Fs,cM as Ps,cN as ks,cO as Is,cP as $s,cQ as Ms,cR as As,cS as Ds}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458111.js";import{E as zs,u as O,a as oe,g as on,b as ht}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458143.js";import{d as Es}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581109.js";import{u as vt}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458146.js";import{A as Ls}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581194.js";import{A as Ts}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581198.js";import{R as Vs}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458189.js";import{bb as Te,m as B,n as L,u as bt,D as Gs,bc as Os,au as qe}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458123.js";import{E as Hs,I as ln}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581199.js";import{u as _t}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b7645816.js";import{W as M,V as Bs}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458119.js";import{P as qs}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581167.js";import{p as cn,X as dn,q as Us,r as Dt,s as Ws,t as Ks,u as zt,v as Xs,w as Ys,U as Js,x as Qs,y as Zs,z as Et}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b7645819.js";import{a as Lt}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b7645817.js";import{u as ea}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458192.js";import{a as ta}from"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458190.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458110.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458145.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458147.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581104.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581125.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458126.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458136.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458159.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581106.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581107.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581108.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458135.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b76458134.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b7645814.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b7645813.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b7645812.js";import"./v_7_4_3_14_49a76bb0-8cf2-4908-a016-18478b764581155.js";function na(e){const s=b.getState().language,n=gt(e);return n.endsWith("@c.us")?s.user_type_contato:n.endsWith("@g.us")?s.user_type_grupo:n.endsWith("lid")?s.user_type_contato:s.user_type_desconhecido}const le=z((e,s)=>({activePage:"campaigns",setActivePage:n=>{s().activePage!==n&&e({activePage:n})}})),De=z()(Le(e=>({isHidden:!1,toggleHeader:()=>e(s=>({isHidden:!s.isHidden}))}),{name:"useHeaderController-store",version:1,partialize:e=>({isHidden:e.isHidden})})),sa=({type:e,icon:s,label:n,title:a,onClick:r})=>{const o=le(g=>g.activePage)===e,m=j(g=>g.campaigns.find(c=>c.id===g.currentCampaignId))?.status===I.SENDING,d={exitToPanel:"#ef4444",exitToWhats:"#22c55e"};return t.jsxs(Rt.button,{type:"button",onClick:r,"aria-label":n,title:a||n,className:`w-4/5 p-2 relative rounded-md cursor-pointer place-items-center ${o?"bg-[var(--filter-btn-active-bg)] text-[var(--filter-btn-active-text)]":"bg-[var(--filter-btn-inactive-bg)] hover:bg-[var(--sidebar-line-color)] border border-[var(--filter-btn-inactive-border-color)]"}`,whileHover:{scale:1.05,boxShadow:"0px 5px 10px rgba(0, 0, 0, 0.1)"},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:17},children:[t.jsx(Rt.div,{whileHover:{rotate:2},transition:{type:"spring",stiffness:400,damping:20},children:t.jsx(s,{color:d[e]??void 0,className:"2xl:text-2.5xl text-lg"})}),m&&e==="sendFastCampaign"&&t.jsx("div",{className:"absolute top-0.5 right-0.5 pointer-events-none",children:t.jsx(kn,{tipo:"ativado",size:2})})]})},at=({width:e="100%",borderColor:s="var(--sidebar-line-color)",borderWidth:n="1.5px",margin:a="0"})=>t.jsx("hr",{style:{width:e,borderColor:s,borderWidth:n,borderStyle:"solid",margin:a}}),aa=()=>{const e=Ft(g=>g.theme),{setTheme:s}=Ft.getState(),{config:n}=Kt(vt(g=>({config:g.config}))),{setActivePage:a}=le.getState(),r=De(g=>g.isHidden),i=b(g=>g.language),o=g=>{switch(g){case"sendFastCampaign":a("sendFastCampaign");break;case"campaigns":a("campaigns");break;case"analytics":a("analytics");break;case"toggleHiddenHeader":De.getState().toggleHeader();break;case"themeToggle":s(!e);break;case"exitToPanel":tt.getState().open(t.jsx(zs,{}));break;case"exitToWhats":tt.getState().close();break;default:console.warn("Ação não implementada:",g)}},l=[{type:"sendFastCampaign",icon:In,label:i.sidebar_enviar_campanha,title:i.sidebar_enviar_campanha,onClick:()=>o("sendFastCampaign")},{type:"campaigns",icon:$n,label:i.sidebar_gerenciar_campanhas,title:i.sidebar_gerenciar_campanhas,onClick:()=>o("campaigns")},{type:"analytics",icon:Mn,label:i.visualizar_relatorios,title:i.visualizar_relatorios,onClick:()=>o("analytics")}],m=[{type:"toggleHiddenHeader",icon:r?An:Dn,label:r?i.sidebar_mostrar_cabecalho:i.sidebar_ocultar_cabecalho,title:r?i.sidebar_mostrar_cabecalho:i.sidebar_ocultar_cabecalho,onClick:()=>o("toggleHiddenHeader")},{type:"themeToggle",icon:e?zn:En,label:i.sidebar_alternar_tema,title:i.sidebar_alternar_tema_desc,onClick:()=>o("themeToggle")},{type:"exitToWhats",icon:Jt,label:i.sidebar_voltar_whats,title:i.sidebar_voltar_whats,onClick:()=>o("exitToWhats")},{type:"exitToPanel",icon:Es,label:i.sidebar_voltar_painel,title:i.sidebar_voltar_painel,onClick:()=>o("exitToPanel")}],d=g=>g.map(c=>t.jsx(sa,{...c},c.type));return t.jsxs("aside",{className:"bg-[var(--sidebar-bg-primary)] flex flex-col items-center justify-between w-12 2xl:w-16 py-1",children:[t.jsxs("div",{className:"w-full flex flex-col items-center gap-1",children:[t.jsx("img",{src:chrome.runtime.getURL("label/icons/plugin/icon.png"),className:"object-cover w-4/6 h-auto rounded-full",title:n.primeiroNome,alt:"Logo"}),t.jsx(at,{}),d(l)]}),t.jsxs("div",{className:"w-full flex flex-col items-center gap-1",children:[t.jsx(at,{}),d(m)]})]})};function rt(e){const s=b.getState().language;j.getState().setCurrentCampaignId(e);const n=j.getState().campaigns.find(r=>r.id===e);if(!n){A({type:"Error",message:s.campanha_nao_encontrada});return}const a=n.status===I.SENDING||n.status===I.PAUSED;O.getState().setCurrentStep(a?"envio":"contatos"),le.getState().setActivePage("sendFastCampaign")}function un({name:e}){return{newCampaign:{id:Qt(),name:e,selectedContacts:[],actions:[],status:I.DRAFT,config:Fn,createdAt:new Date,updatedAt:new Date}}}const ra=()=>{const e=b(o=>o.language),{addCampaign:s,setCurrentCampaignId:n}=j.getState(),a=j(o=>o.campaigns),r=j(o=>o.currentCampaignId),i=a.find(o=>o.id===r);return R.useEffect(()=>{if(!r||!i){const o=new Date().toLocaleString(void 0,{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),{newCampaign:l}=un({name:`${e.ensure_campanha} ${o}`});s(l),n(l.id)}},[r,a,s,n,i]),i};var gn=function(e){var s=R.useRef(null),n=function(a){a.preventDefault();var r=s.current;if(r){a.clientX;var i=a.clientY;r.scrollLeft;var o=r.scrollTop,l=function(d){r.scrollTop=o-(d.clientY-i)},m=function(){document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",m),r.style.cursor="grab"};r.style.cursor="grabbing",document.addEventListener("mousemove",l),document.addEventListener("mouseup",m)}};return{ref:s,onMouseDown:n}},ia=function(e,s){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,i=[],o;try{for(;(s===void 0||s-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(l){o={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i},de={sm:640,md:768,lg:1024,xl:1280,"2xl":1536},Y=function(){var e=ia(R.useState("xs"),2),s=e[0],n=e[1];return R.useEffect(function(){var a=function(){var r=window.innerWidth;r>=de["2xl"]?n("2xl"):r>=de.xl?n("xl"):r>=de.lg?n("lg"):r>=de.md?n("md"):r>=de.sm?n("sm"):n("xs")};return a(),window.addEventListener("resize",a),function(){return window.removeEventListener("resize",a)}},[]),{breakpoint:s,isMobile:s==="xs"||s==="sm",isTablet:s==="md",isDesktop:s==="lg"||s==="xl"||s==="2xl"}},oa=function(e,s){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,i=[],o;try{for(;(s===void 0||s-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(l){o={error:l}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i};function la(e,s){var n=oa(R.useState(!1),2),a=n[0],r=n[1];return R.useEffect(function(){var i=e.persist.onFinishHydration(function(){return setTimeout(function(){return r(!0)},s)});return setTimeout(function(){return r(e.persist.hasHydrated())},s),function(){i()}},[e,s]),a}const ca=()=>{const e=O(d=>d.steps),s=O(d=>d.currentStep),n=e.findIndex(({key:d})=>d===s),a=j(d=>d.currentCampaignId),i=j(d=>d.campaigns).find(d=>d.id===a)?.name||"Nome Desconhecido",{breakpoint:o}=Y(),l={width:o==="2xl"?"36px":"24px",margin:o==="2xl"?"0 12px":"0 8px"},m=De(d=>d.isHidden);return t.jsxs("header",{children:[!m&&t.jsx("div",{className:"flex items-center justify-center py-2 2xl:py-3",children:e.map(({key:d,icon:g,label:c},p)=>{const u=p<=n;return t.jsxs("div",{className:"flex items-center",children:[p!==0&&t.jsx(at,{width:l.width,margin:l.margin,borderColor:u?"var(--primaria)":"var(--sidebar-line-color)"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:S("size-7 2xl:size-9 rounded-full flex items-center justify-center",u?"bg-[var(--primaria)]":"bg-[var(--step-bg-inactive)]"),children:t.jsx(g,{className:S(u?"text-white":"text-[var(--step-icon-color)]","size-4 2xl:size-5")})}),t.jsx("span",{className:S("absolute left-1/2 -translate-x-1/2 top-full text-xs 2xl:text-sm font-semibold whitespace-nowrap",u?"text-[var(--primaria)]":"text-[var(--step-label-color)]"),children:c})]})]},d)})}),t.jsx("div",{className:"mt-2",children:t.jsx("div",{className:"divider before:bg-[var(--sidebar-line-color)] after:bg-[var(--sidebar-line-color)]",children:t.jsx("span",{className:"badge badge-soft bg-[var(--primaria)] text-white !text-xs 2xl:!text-sm font-semibold",children:i})})})]})},Ve=({title:e,subtitle:s})=>t.jsxs("div",{className:"mb-2 2xl:mb-4",children:[t.jsx("h1",{className:"text-lg 2xl:text-2xl font-medium leading-none text-[var(--primary-strong)]",children:e}),s&&t.jsx("p",{className:"text-sm 2xl:text-lg text-[var(--light-text-color)]",children:s})]}),da=()=>{const n=(j(a=>a.campaigns.find(r=>r.id===a.currentCampaignId))?.actions||[]).length===0?"col-span-2":"";return t.jsx("div",{className:S(n,"max-h-[55dvh] overflow-y-auto transition-all duration-200","bg-[var(--eem-bg-secondary)] p-2 rounded-md h-fit"),children:t.jsx(Ls,{acaoModel:"useAcaoEnvioEmMassaNew",placement:"left"})})},D=z(e=>({contacts:[],setContacts:s=>e({contacts:s}),loading:!0,setLoading:s=>e({loading:s})})),ua=()=>{const e=()=>S("text-xs 2xl:text-base font-medium w-full text-left h-7 2xl:h-10 rounded-md transition-transform duration-200 mb-1 last:mb-0","border border-solid flex items-center justify-between px-1.5 leading-tight transform-gpu will-change-transform motion-reduce:transform-none","!border-[var(--filter-btn-inactive-border-color)] !bg-[var(--filter-btn-inactive-bg)] hover:!scale-[0.98]","hover:!bg-[var(--filter-btn-inactive-bg)] active:!bg-[var(--filter-btn-inactive-bg)] active:!text-[var(--primary-strong)]"),s={containerClassName:S("!w-full !p-0.5"),itemClassName:e()};return t.jsx("div",{children:t.jsx(Ts,{acaoModel:"useAcaoEnvioEmMassaNew",style:s})})},ga=()=>{const{breakpoint:e}=Y(),s=e==="2xl"?"560":"418";return t.jsx("div",{className:"relative",children:t.jsx(Vs,{listSize:s})})},ma=()=>{const e=D(o=>o.loading),s=b(o=>o.language),[n,a]=R.useState("actions"),r=o=>{e||n===o||a(o)},i=o=>S("text-xs 2xl:text-sm truncate flex items-center justify-center gap-1 flex-1 h-7 2xl:h-10 px-2 rounded-md transition-all duration-200 font-medium leading-none transform-gpu will-change-transform motion-reduce:transform-none",!e&&"hover:scale-[0.98] active:scale-[0.96] active:opacity-80",e&&"opacity-50 cursor-not-allowed",o?"bg-[var(--filter-btn-active-bg)] text-[var(--filter-btn-active-text)] shadow-sm":"text-[var(--primary-strong)] bg-[var(--view-btn-inactive-bg)]");return t.jsxs("div",{className:"flex flex-col gap-1 bg-[var(--eem-bg-secondary)] p-2 rounded-md h-fit",children:[t.jsxs("div",{className:"w-full flex items-center rounded-md gap-1",children:[t.jsxs("button",{type:"button","aria-pressed":n==="actions",className:i(n==="actions"),onClick:e?void 0:()=>r("actions"),disabled:e,children:[t.jsx(Zt,{className:"text-inherit"}),t.jsx("span",{className:"font-bold",children:s.switch_acoes})]}),t.jsxs("button",{type:"button","aria-pressed":n==="fastResponse",className:i(n==="fastResponse"),onClick:e?void 0:()=>r("fastResponse"),disabled:e,children:[t.jsx(Ln,{className:"text-inherit"}),t.jsx("span",{className:"font-bold",children:s.switch_respostas_rapidas})]})]}),n==="actions"?t.jsx(ua,{}):t.jsx(ga,{})]})},F=17,pa={txt:t.jsx(os,{size:F}),image:t.jsx(is,{size:F}),video:t.jsx(rs,{size:F}),audio:t.jsx(as,{size:F}),doc:t.jsx(ss,{size:F}),sticker:t.jsx(ns,{size:F}),respostaRapida:t.jsx(ts,{size:F}),addCRM:t.jsx(es,{size:F}),removeCRM:t.jsx(Zn,{size:F}),removeAllCRM:t.jsx(kt,{size:F}),addLabel:t.jsx(It,{size:F}),removeLabel:t.jsx(It,{size:F}),removeAllLabel:t.jsx(kt,{size:F}),timer:t.jsx(Qn,{size:F}),composing:t.jsx(Jn,{size:F}),recording:t.jsx(Yn,{size:F}),arquivar:t.jsx(Pt,{size:F}),desarquivar:t.jsx(Pt,{size:F}),fixarChat:t.jsx(Xn,{size:F}),desfixarChat:t.jsx(Kn,{size:F}),marcarNaoLido:t.jsx(Wn,{size:F}),transferir:t.jsx(Un,{size:F}),bloquear:t.jsx(qn,{size:F}),pix:t.jsx(Bn,{size:F}),groupInvite:t.jsx(Hn,{size:F}),contact:t.jsx(On,{size:F}),linkPreview:t.jsx(Gn,{size:F}),list:t.jsx(Vn,{size:F})},xa=e=>pa[e]??t.jsx(Tn,{size:F}),ue=({action:e})=>t.jsx("div",{className:"w-5 h-5 flex-shrink-0 rounded-md flex items-center justify-center",children:t.jsx("span",{className:"inline-flex items-center justify-center",children:xa(e.type)})}),fa=({action:e,index:s})=>{const n=b(g=>g.language),a="p-1 2xl:p-1.5 rounded-md bg-[color-mix(in_srgb,var(--primaria)_30%,white)] shadow-md text-black font-semibold flex items-center gap-2",r="flex items-center justify-center size-4 2xl:size-5 rounded-full bg-[var(--primaria)] text-black text-xs flex-shrink-0",i="flex-1 flex items-center gap-2 min-w-0",o="truncate text-xs 2xl:text-sm",l="p-1 2xl:p-1.5 rounded-md bg-gray-100 shadow-md text-gray-500 font-normal flex items-center gap-2 border-2 border-dashed border-gray-300",m=g=>t.jsxs("div",{className:l,children:[t.jsx("div",{className:"flex items-center justify-center size-5 2xl:size-6 rounded-full !bg-gray-400 !text-white text-xs 2xl:text-sm flex-shrink-0",children:s+1}),t.jsx("div",{className:i,children:t.jsx("span",{className:S("text-gray-500 italic",o),children:g})})]}),d=g=>{switch(g.type){case"txt":{const{mensagem:c}=g.propriedades;return c?.trim()?t.jsxs("div",{className:a,children:[t.jsx("div",{className:r,children:s+1}),t.jsxs("div",{className:i,children:[t.jsx(ue,{action:g}),t.jsx("span",{className:o,children:c})]})]}):m(n.action_item_mensagem_vazia)}case"image":{const{base64:c,mensagem:p}=g.propriedades;return c?t.jsxs("div",{className:a,children:[t.jsx("div",{className:r,children:s+1}),t.jsxs("div",{className:i,children:[t.jsx("div",{className:"2xl:size-8 size-7 flex-shrink-0 overflow-hidden rounded-md",children:t.jsx("img",{src:c,alt:p??"imagem",className:"w-full h-full object-cover"})}),p&&t.jsx("span",{className:o,children:p})]})]}):m(n.action_item_imagem_nao_encontrada)}case"video":{const{base64:c,mensagem:p}=g.propriedades;return c?t.jsxs("div",{className:a,children:[t.jsx("div",{className:r,children:s+1}),t.jsxs("div",{className:i,children:[t.jsx("div",{className:"2xl:size-8 size-7 flex-shrink-0 overflow-hidden rounded-md",children:t.jsx("video",{src:c,className:"w-full h-full object-cover"})}),p&&t.jsx("span",{className:o,children:p})]})]}):m(n.action_item_video_nao_encontrado)}case"audio":{const{base64:c}=g.propriedades;return c?t.jsxs("div",{className:a,children:[t.jsx("div",{className:r,children:s+1}),t.jsxs("div",{className:i,children:[t.jsx(ue,{action:g}),t.jsx("div",{className:"w-full max-w-xs min-w-0",children:t.jsx("audio",{controls:!0,src:c,className:"w-full h-4"})})]})]}):m(n.action_item_audio_nao_encontrado)}case"doc":{const{base64:c,base64Name:p}=g.propriedades;return!c||!p?m(n.action_item_documento_nao_encontrado):t.jsxs("div",{className:a,children:[t.jsx("div",{className:r,children:s+1}),t.jsxs("div",{className:i,children:[t.jsx(ue,{action:g}),t.jsx("span",{className:o,children:p})]})]})}case"sticker":{const{base64:c}=g.propriedades;return c?t.jsxs("div",{className:a,children:[t.jsx("div",{className:r,children:s+1}),t.jsxs("div",{className:i,children:[t.jsx("div",{className:"2xl:size-8 size-7 flex-shrink-0 overflow-hidden rounded-md",children:t.jsx("img",{src:c,alt:"sticker",className:"w-full h-full object-cover"})}),t.jsx("div",{className:o,children:n.action_item_criar_sticker})]})]}):m(n.action_item_sticker_nao_encontrado)}case"respostaRapida":{const{respostaRapidaID:c}=g.propriedades;return c?.trim()?t.jsxs("div",{className:a,children:[t.jsx("div",{className:r,children:s+1}),t.jsxs("div",{className:i,children:[t.jsx(ue,{action:g}),t.jsx("span",{className:o,children:n.action_item_resposta_rapida})]})]}):m(n.action_item_resposta_rapida_nao_selecionada)}case"addCRM":case"removeCRM":case"removeAllCRM":case"addLabel":case"removeLabel":case"removeAllLabel":case"timer":case"composing":case"recording":case"arquivar":case"desarquivar":case"fixarChat":case"desfixarChat":case"marcarNaoLido":case"bloquear":case"groupInvite":case"contact":case"linkPreview":case"transferir":case"pix":{const c=g.propriedades;let p="";switch(g.type){case"addCRM":p=`${n.action_item_adicionar_crm}${c.crmID?`: ${c.crmID}`:""}${c.abaID?` (${n.action_item_aba}: ${c.abaID})`:""}`;break;case"removeCRM":p=`${n.action_item_remover_crm}${c.crmID?`: ${c.crmID}`:""}${c.abaID?` (${n.action_item_aba}: ${c.abaID})`:""}`;break;case"removeAllCRM":p=n.action_item_remover_todos_crms;break;case"addLabel":p=`${n.action_item_adicionar_etiqueta}: ${c.labelID||n.action_item_sem_id}`;break;case"removeLabel":p=`${n.action_item_remover_etiqueta}: ${c.labelID||n.action_item_sem_id}`;break;case"removeAllLabel":p=n.action_item_remover_todas_etiquetas;break;case"timer":p=c.segundos?`${n.action_item_aguardar_segundos} ${c.segundos} ${n.action_item_segundos}`:n.action_item_timer_sem_duracao;break;case"composing":p=c.segundos?`${n.action_item_digitando_por} ${c.segundos} ${n.action_item_segundos}`:n.action_item_tempo_digitacao_nao_definido;break;case"recording":p=c.segundos?`${n.action_item_gravando_por} ${c.segundos} ${n.action_item_segundos}`:n.action_item_tempo_gravacao_nao_definido;break;case"arquivar":p=n.action_item_arquivar_contato;break;case"desarquivar":p=n.action_item_desarquivar_contato;break;case"fixarChat":p=n.action_item_fixar_conversa;break;case"desfixarChat":p=n.action_item_desfixar_conversa;break;case"marcarNaoLido":p=n.action_item_marcar_nao_lido;break;case"bloquear":p=n.action_item_bloquear_contato;break;case"groupInvite":p=n.action_item_convite_grupo;break;case"contact":p=c.userName?`${c.userName} - ${c.userID??""}`:n.action_item_contato_sem_nome;break;case"linkPreview":p=c.title||c.link||n.action_item_link;break;case"transferir":if(!c.email?.trim())return m(n.action_item_email_transferencia_nao_definido);p=`${n.action_item_transferir_para}: ${c.email}${c.urgencia?` (${n.action_item_urgente})`:""}${c.mensagem?` - ${c.mensagem}`:""}`;break;case"pix":if(!c.key?.trim()||!c.name?.trim())return m(n.action_item_dados_pix_incompletos);p=`${n.action_item_pix} (${c.keyType}): ${c.name} - ${c.key}`;break;default:p=`${g.type}`}return t.jsxs("div",{className:a,children:[t.jsx("div",{className:r,children:s+1}),t.jsxs("div",{className:i,children:[t.jsx(ue,{action:g}),t.jsx("span",{className:o,children:p})]})]})}default:return m(`${n.action_item_acao}: ${g.type}`)}};return t.jsx(t.Fragment,{children:d(e)})},ha="/assets/png/Whatsbg.chunk.png",va=()=>{const e=b(a=>a.language),n=j(a=>a.campaigns.find(r=>r.id===a.currentCampaignId))?.actions||[];return t.jsxs("div",{style:{backgroundImage:`url(${chrome.runtime.getURL(`content/${ha}`)})`},className:"flex flex-col p-3 2xl:p-4 rounded-md overflow-hidden h-[43dvh] overflow-y-auto transition-all duration-200",children:[t.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2 w-full text-[var(--primaria)] font-bold mb-3 2xl:mb-4",children:[t.jsx(mt,{className:"2xl:text-2xl text-lg"}),t.jsx("h2",{className:"2xl:text-lg text-sm",children:e.preview_titulo})]}),t.jsx("div",{className:"flex-1 flex flex-col gap-1.5 2xl:gap-2 overflow-y-auto",children:n.map((a,r)=>t.jsx(fa,{action:a,index:r},a.id))})]})},ba=()=>{const e=b(c=>c.language),s=j(c=>c.campaigns.find(p=>p.id===c.currentCampaignId)),n=j(c=>c.updateConfig),a="range !range-xs w-full",r="font-medium label p-0";if(!s)return null;const i=c=>{n(s.id,{interval:{...s.config.interval,seconds:parseInt(c)}})},o=c=>{n(s.id,{pause:{...s.config.pause,every:parseInt(c)}})},l=c=>{n(s.id,{pause:{...s.config.pause,durationSeconds:parseInt(c)}})},m=c=>{const p=c.target.checked;n(s.id,{signature:{...s.config.signature,disabled:p,useCustomName:p?!1:s.config.signature.useCustomName,customName:p?void 0:s.config.signature.customName}})},d=c=>{const p=c.target.checked;n(s.id,{signature:{...s.config.signature,useCustomName:p,customName:p?s.config.signature.customName:void 0}})},g=c=>{n(s.id,{signature:{...s.config.signature,customName:c.trim()||void 0}})};return t.jsxs("div",{className:"w-full !text-xs 2xl:!text-sm",children:[t.jsxs("div",{title:e.campaign_settings_intervalo_tooltip,children:[t.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[t.jsx("label",{className:"font-medium",children:e.campaign_settings_intervalo}),t.jsxs("span",{className:"font-semibold",children:[s.config.interval.seconds," ",e.campaign_settings_segundos]})]}),t.jsx("input",{type:"range",min:1,max:60,value:s.config.interval.seconds,onChange:c=>i(c.target.value),className:a,style:{zoom:"75%"}})]}),t.jsxs("div",{title:e.campaign_settings_pausa_tooltip,children:[t.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[t.jsx("label",{className:"font-medium",children:e.campaign_settings_pausa_a_cada}),t.jsxs("span",{className:"font-semibold",children:[s.config.pause.every," ",e.campaign_settings_contatos]})]}),t.jsx("input",{type:"range",min:1,max:50,value:s.config.pause.every,onChange:c=>o(c.target.value),className:a,style:{zoom:"75%"}})]}),t.jsxs("div",{title:e.campaign_settings_tempo_pausa_tooltip,children:[t.jsxs("div",{className:"flex justify-between items-center mb-0.5",children:[t.jsx("label",{className:"font-medium",children:e.campaign_settings_tempo_pausa}),t.jsxs("span",{className:"font-semibold",children:[s.config.pause.durationSeconds," ",e.campaign_settings_segundos]})]}),t.jsx("input",{type:"range",min:5,max:300,value:s.config.pause.durationSeconds,onChange:c=>l(c.target.value),className:a,style:{zoom:"75%"}})]}),t.jsx("div",{className:"mb-1",title:e.campaign_settings_desativar_tooltip,children:t.jsxs("label",{className:r,children:[e.campaign_settings_desativar_assinatura,t.jsx($t,{id:"disable-signature",estado:s.config.signature.disabled,switchUpdate:m,zoom:{zoom:"60%"}})]})}),!s.config.signature.disabled&&t.jsx("div",{className:"mb-1",title:e.campaign_settings_personalizar_tooltip,children:t.jsxs("label",{className:r,children:[e.campaign_settings_personalizar_nome,t.jsx($t,{id:"custom-signature-name",estado:s.config.signature.useCustomName,switchUpdate:d,zoom:{zoom:"60%"}})]})}),s.config.signature.useCustomName&&!s.config.signature.disabled&&t.jsx("div",{title:e.campaign_settings_nome_tooltip,children:t.jsxs("fieldset",{className:"fieldset",children:[t.jsx("legend",{className:"fieldset-legend",children:e.campaign_settings_nome_assinatura}),t.jsx("input",{type:"text",className:`input 2xl:input-sm input-xs input-bordered w-full
                           2xl:placeholder:!text-sm placeholder:!text-xs`,placeholder:e.campaign_settings_digite_nome,value:s.config.signature.customName||"",onChange:c=>g(c.target.value)})]})})]})},_a=()=>{const e=b(a=>a.language),n=j(a=>a.campaigns.find(r=>r.id===a.currentCampaignId))?.actions||[];return t.jsxs(t.Fragment,{children:[t.jsx(Ve,{title:e.step_actions_titulo,subtitle:e.step_actions_subtitulo}),t.jsxs("div",{className:"grid grid-cols-[30%_minmax(300px,1fr)_23%] gap-2 2xl:gap-4",children:[t.jsx(ma,{}),t.jsx(da,{}),n.length>0&&t.jsxs("div",{className:"flex flex-col gap-2 bg-[var(--eem-bg-secondary)] p-2 rounded-md h-fit",children:[t.jsx(va,{}),t.jsx(ba,{})]})]})]})},ne=z((e,s)=>({activeFilter:{type:"filter",id:"savedContacts"},setActiveFilter:n=>{e({activeFilter:{type:"filter",id:n}})},setActiveGroupment:n=>{e({activeFilter:{type:"groupment",id:n}})}})),ze=z()(Le(e=>({groupments:[],addGroupment:s=>e(n=>({groupments:[...n.groupments,s]})),removeGroupment:s=>e(n=>({groupments:n.groupments.filter(a=>a.id!==s)}))}),{name:"useGroupments-store",version:1,partialize:e=>({groupments:e.groupments})})),Ca=()=>{const e=b(C=>C.language),[s,n]=R.useState("filters"),a=D(C=>C.loading),r=ne(C=>C.activeFilter),{setActiveFilter:i,setActiveGroupment:o}=ne.getState(),l=ze(C=>C.groupments),m=ze(C=>C.removeGroupment),d=Te.getState().setImportedContacts,c=j(C=>C.campaigns.find(V=>V.id===C.currentCampaignId))?.selectedContacts||[],p=B.getState().open,u=C=>{r.type==="filter"&&r.id===C||i(C)},x=()=>{p(t.jsx(ln,{list:C=>d(C)}))},f=C=>{r.type==="groupment"&&r.id===C||o(C)},v=C=>{a||s===C||n(C)},h=[{id:"savedContacts",type:"filter",label:e.cts_salvos,onClick:()=>u("savedContacts")},{id:"inbox",type:"filter",label:e.inbox,onClick:()=>u("inbox")},{id:"labels",type:"filter",label:e.etiquetas,onClick:()=>u("labels")},{id:"groups",type:"filter",label:e.grupos,onClick:()=>u("groups")},{id:"groupContacts",type:"filter",label:e.cts_grupos,onClick:()=>u("groupContacts")},{id:"crmOrTabs",type:"filter",label:`${e.crms} / ${e.abas}`,onClick:()=>u("crmOrTabs")},{id:"contactProfile",type:"filter",label:e.perfil_cts,onClick:()=>u("contactProfile")},{id:"importSpreadsheet",type:"filter",label:e.importar_planilha,onClick:()=>u("importSpreadsheet")}],_=l.map(C=>({id:C.id,type:"groupment",label:C.name,onClick:()=>f(C.id)})),N=s==="filters"?h:_,k=C=>S("text-xs 2xl:text-sm truncate flex items-center justify-center gap-1 flex-1 h-7 2xl:h-10 px-2 rounded-md transition-all duration-200 font-medium leading-none transform-gpu will-change-transform motion-reduce:transform-none",!a&&"hover:scale-[0.98] active:scale-[0.96] active:opacity-80",a&&"opacity-50 cursor-not-allowed",C?"bg-[var(--filter-btn-active-bg)] text-[var(--filter-btn-active-text)] shadow-sm":"text-[var(--primary-strong)] bg-[var(--view-btn-inactive-bg)]"),P=C=>S("text-xs 2xl:text-base font-medium w-full text-left h-7 2xl:h-10 rounded-md transition-transform duration-200 border border-solid flex items-center justify-between px-1.5 leading-tight transform-gpu will-change-transform motion-reduce:transform-none",C?"bg-[var(--filter-btn-active-bg)] text-[var(--filter-btn-active-text)]":"border-[var(--filter-btn-inactive-border-color)] bg-[var(--filter-btn-inactive-bg)] hover:scale-[0.98]",a&&!C&&"opacity-50 cursor-not-allowed hover:scale-100");return t.jsxs("div",{className:"flex flex-col items-start gap-1 bg-[var(--eem-bg-secondary)] p-2 rounded-md h-fit",children:[t.jsxs("div",{className:"w-full flex items-center rounded-md gap-1",children:[t.jsxs("button",{className:k(s==="filters"),onClick:a?void 0:()=>v("filters"),disabled:a,children:[t.jsx(en,{className:"text-inherit"}),t.jsx("span",{className:"font-bold",children:e.filtros}),t.jsx("div",{className:"badge badge-xs 2xl:badge-sm badge-soft text-white bg-[var(--primaria)]",children:h.length})]}),t.jsxs("button",{className:k(s==="groups"),onClick:a?void 0:()=>v("groups"),disabled:a,children:[t.jsx(ls,{className:"text-inherit"}),t.jsx("span",{className:"font-bold",children:e.agrupamentos}),t.jsx("div",{className:"badge badge-xs 2xl:badge-sm badge-soft text-white bg-[var(--primaria)]",children:_.length})]})]}),t.jsxs("div",{className:"flex flex-col gap-1 w-full max-h-[50dvh] overflow-y-auto p-[0.5px]",children:[N.map(C=>{const V=r.type===C.type&&r.id===C.id,H=C.id==="importSpreadsheet",ce=C.type==="groupment";return t.jsxs("button",{className:P(V),onClick:a&&!V?void 0:C.onClick,disabled:a&&!V,children:[t.jsx("span",{className:"truncate flex-1",children:C.label}),a&&V&&t.jsx(X,{className:"text-sm 2xl:text-base animate-spin"}),H&&!a&&t.jsxs("button",{type:"button",title:e.importar_planilha_titulo,className:"rounded-md text-xs 2xl:text-base px-2 gap-1 transition-all active:scale-95 flex items-center justify-center border border-solid duration-200 hover:scale-[0.98]",onClick:()=>x(),children:[e.importar,t.jsx(tn,{})]}),ce&&!a&&t.jsx("button",{type:"button",title:e.remover_agrupamento,className:"2xl:size-6 size-5 rounded-md transition-all active:scale-95 text-red-500 flex items-center justify-center border border-solid duration-200 hover:scale-[0.98]",onClick:Oe=>{Oe.stopPropagation(),m(C.id)},children:t.jsx(pt,{className:"2xl:text-base text-sm"})})]},`${C.type}-${C.id}`)}),s==="groups"&&_.length===0&&t.jsxs("div",{className:"text-center text-xs 2xl:text-base py-2 2xl:py-4 px-1.5 2x:px-2 border border-dotted italic rounded-md",children:[e.nenhum_agrupamento_criado,t.jsx("br",{}),e.criar_agrupamentos_destinatarios]})]}),t.jsxs("button",{className:`mt-1 text-xs 2xl:text-base w-full truncate flex items-center justify-center gap-1 p-1.5 
        rounded-md transition-all duration-200 font-medium leading-none transform-gpu 
        motion-reduce:transform-none hover:scale-[0.98] active:scale-[0.96] will-change-transform 
        active:opacity-80 text-[var(--primary-strong)] bg-[var(--view-btn-inactive-bg)]`,onClick:()=>Hs(c),children:[t.jsx(cs,{}),t.jsx("span",{className:"font-medium",children:e.exportar_contatos_selecionados})]})]})},we=({contact:e,className:s="",size:n="md"})=>{const[a,r]=R.useState(!1),i=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-orange-500","bg-indigo-500","bg-teal-500"],o={xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-12 h-12 text-base"},l=e.id.charCodeAt(0)%i.length,m=i[l],d=`${o[n]} rounded-full ${s} border border-solid border-[var(--contact-img-border-color)]`;function g(u){const x=u.match(/[A-Za-zÀ-ÖØ-öø-ÿ]/);if(x)return x[0].toUpperCase();const f=u.match(/\d/);return f?f[0]:"?"}const c=e.name?.trim()?e.name.trim():e.phone||e.id;return e.avatarUrl&&e.avatarUrl!=="undefined"&&e.avatarUrl.trim()&&!a?t.jsx("img",{src:e.avatarUrl,alt:e.name,className:`${d} object-cover`,onError:()=>r(!0)}):t.jsx("div",{className:`${d} flex items-center justify-center ${m}`,children:t.jsx("span",{className:"text-white font-semibold",children:g(c)})})},ja=({contact:e,virtualItem:s})=>{const n=b(p=>p.language),{breakpoint:a}=Y(),r=j(p=>p.currentCampaignId),i=j(p=>p.campaigns),{updateCampaign:o}=j.getState(),l=i.find(p=>p.id===r),m=l?.selectedContacts.some(p=>p.id===e.id)||!1,d=na(e.id),g=a==="2xl"?"md":"sm",c=()=>{if(!l)return;const p=m?l.selectedContacts.filter(u=>u.id!==e.id):[...l.selectedContacts,e];o(l.id,{selectedContacts:p})};return t.jsx("div",{className:"absolute top-0 left-0 w-full will-change-transform",style:{height:s.size,transform:`translateY(${s.start}px)`},children:t.jsxs("label",{htmlFor:`contact-checkbox-${e.id}`,className:`w-full h-full py-1 2xl:py-1.5 px-2 2xl:px-3 flex items-center gap-1 2xl:gap-2 
        bg-[var(--contact-card-bg)] rounded-md cursor-pointer
        transition-all duration-200 hover:scale-[1.01] hover:opacity-90
        active:scale-[0.98] active:opacity-90`,style:{border:"1px solid var(--sidebar-line-color)"},children:[t.jsx("input",{id:`contact-checkbox-${e.id}`,type:"checkbox",checked:m,onChange:c,className:"checkbox checkbox-xs 2xl:checkbox-sm checkbox-neutral"}),t.jsx(we,{contact:e,size:g}),t.jsxs("div",{className:"flex flex-col w-10/12",children:[t.jsx("span",{className:"text-xs 2xl:text-base font-medium truncate",children:e.name}),t.jsxs("span",{className:"2xl:text-xs text-[10px] text-[var(--light-text-color)]",children:[t.jsx("strong",{children:n.contact_card_tipo})," ",d]})]})]})})},ya=K.memo(ja),Ce=z(e=>({activeLabel:"all",setActiveLabel:s=>e({activeLabel:s})}));let Ne=null;const wa=300*1e3,Sa=()=>{const e=b(u=>u.language),[s,n]=R.useState([]),a=D(u=>u.loading),r=R.useRef(null),i=Ce(u=>u.activeLabel),o=Ce.getState().setActiveLabel,l=L(u=>u.modalOptions),{open:m,close:d}=L.getState();R.useEffect(()=>{const u=Date.now();if(Ne&&u-Ne.timestamp<wa){n(Ne.data);return}M.Labels("getAllLabels").then(x=>{n(x),Ne={data:x,timestamp:u}}).catch(x=>console.error("Erro ao buscar labels:",x))},[]);const g=()=>t.jsxs("div",{className:"flex flex-col rounded-md max-h-[42vh] overflow-hidden",style:{width:r.current?.offsetWidth},children:[t.jsx("div",{className:"sticky top-0 px-3 py-2",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("span",{className:"text-sm font-medium text-gray-600",children:s.length===0?e.nenhuma_etiqueta_disponivel:s.length===1?`${s.length} ${e.etiqueta_disponivel}`:`${s.length} ${e.etiquetas_disponiveis}`})})}),t.jsxs("div",{className:"flex-1 overflow-y-auto px-2 py-1",children:[s.length>0&&t.jsxs("div",{className:S("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md transition-colors",{"dark:bg-neutral-700 bg-neutral-300":i==="all"},{"hover:bg-[var(--view-btn-inactive-bg)]":i!=="all"}),onClick:()=>{o("all"),d()},children:[t.jsx(He,{className:"flex-shrink-0"}),t.jsx("span",{className:"truncate",children:e.todas_etiquetas})]}),s.map(({id:u,name:x})=>t.jsxs("div",{className:S("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md transition-colors",{"dark:bg-neutral-700 bg-neutral-300":i===u},{"hover:bg-[var(--view-btn-inactive-bg)]":i!==u}),onClick:()=>{o(u),d()},children:[t.jsx(ds,{className:"flex-shrink-0"}),t.jsx("span",{className:"truncate",children:x})]},u)),s.length===0&&!a&&t.jsx("div",{className:"flex items-center justify-center py-6 text-gray-500",children:t.jsxs("div",{className:"text-center",children:[t.jsx(He,{className:"text-2xl mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-sm",children:e.nenhuma_etiqueta_encontrada})]})})]})]}),c=u=>{u.stopPropagation(),l?d():m(t.jsx(g,{}),{placement:"bottom"},u.currentTarget)},p=a?e.carregando_etiquetas:s.length===0?e.nenhuma_etiqueta_disponivel:i==="all"?e.todas_etiquetas:s.find(u=>u.id===i)?.name||e.selecione_uma_etiqueta;return t.jsx("div",{className:"w-full",children:t.jsxs("button",{ref:r,onClick:c,disabled:a,className:S("w-full flex items-center justify-between gap-1 2xl:gap-2 px-2 2xl:px-3 py-1","2xl:py-2 text-xs 2xl:text-sm rounded-md transition-all duration-200 border",a?"cursor-not-allowed opacity-60":"cursor-pointer hover:scale-[1.01] active:opacity-80",l?"bg-[var(--view-btn-inactive-bg)]":"bg-[var(--filter-btn-inactive-bg)] hover:bg-[var(--view-btn-inactive-bg)]","border-solid border-[var(--sidebar-line-color)]"),children:[t.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2",children:[a?t.jsx(X,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)] animate-spin"}):t.jsx(He,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)]"}),t.jsx("span",{className:"truncate font-medium text-[var(--primary-strong)]",children:p})]}),!a&&t.jsx(_e,{className:S("text-sm 2xl:text-lg text-[var(--primary-strong)] transform transition-transform",{"rotate-180":l})})]})})},Ee=z(e=>({activeGroup:"all",setActiveGroup:s=>e({activeGroup:s})}));let Re=null;const Na=300*1e3,Ra=()=>{const e=b(u=>u.language),[s,n]=R.useState([]),a=D(u=>u.loading),r=R.useRef(null),i=Ee(u=>u.activeGroup),o=Ee.getState().setActiveGroup,l=L(u=>u.modalOptions),{open:m,close:d}=L.getState();R.useEffect(()=>{const u=Date.now();if(Re&&u-Re.timestamp<Na){n(Re.data);return}M.Chat("List","onlyGroups").then(x=>{const f=x.filter(v=>v.name).sort((v,h)=>v.name.localeCompare(h.name));n(f),Re={data:f,timestamp:Date.now()}}).catch(x=>console.error("Erro ao buscar grupos:",x))},[]);const g=()=>t.jsxs("div",{className:"flex flex-col rounded-md max-h-[42vh] overflow-hidden",style:{width:r.current?.offsetWidth},children:[t.jsx("div",{className:"sticky top-0 px-3 py-2",children:t.jsx("div",{className:"flex items-center justify-between",children:t.jsx("span",{className:"text-xs 2xl:text-sm font-medium text-gray-600",children:s.length===0?e.nenhum_grupo_disponivel:s.length===1?`${s.length} ${e.grupo_disponivel}`:`${s.length} ${e.grupos_disponiveis}`})})}),t.jsxs("div",{className:"flex-1 overflow-y-auto px-2 py-1",children:[s.length>0&&t.jsxs("div",{className:S("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md transition-all duration-200",{"dark:bg-neutral-700 bg-neutral-300":i==="all"},{"hover:bg-[var(--view-btn-inactive-bg)]":i!=="all"}),onClick:()=>{o("all"),d()},children:[t.jsx(Ie,{className:"flex-shrink-0"}),t.jsx("span",{className:"truncate",children:e.todos_grupos})]}),s.map(({id:u,name:x})=>t.jsxs("div",{className:S("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md transition-all duration-200",{"dark:bg-neutral-700 bg-neutral-300":i===u},{"hover:bg-[var(--view-btn-inactive-bg)]":i!==u}),onClick:()=>{o(u),d()},children:[t.jsx(nn,{className:"flex-shrink-0"}),t.jsx("span",{className:"truncate",children:x})]},u.toString())),s.length===0&&!a&&t.jsx("div",{className:"flex items-center justify-center py-6 text-gray-500",children:t.jsxs("div",{className:"text-center",children:[t.jsx(Ie,{className:"text-2xl mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-sm",children:e.nenhum_grupo_encontrado})]})})]})]}),c=u=>{u.stopPropagation(),l?d():m(t.jsx(g,{}),{placement:"bottom"},u.currentTarget)},p=a?e.carregando_grupos:s.length===0?e.nenhum_grupo_disponivel:i==="all"?e.todos_grupos:s.find(u=>u.id===i)?.name||e.selecione_um_grupo;return t.jsx("div",{className:"w-full",children:t.jsxs("button",{ref:r,onClick:c,disabled:a,className:S("w-full flex items-center justify-between gap-1 2xl:gap-2 px-2 2xl:px-3 py-1","2xl:py-2 text-xs 2xl:text-sm rounded-md transition-all duration-200 border",a?"cursor-not-allowed opacity-60":"cursor-pointer hover:scale-[1.01] active:opacity-80",l?"bg-[var(--view-btn-inactive-bg)]":"bg-[var(--filter-btn-inactive-bg)] hover:bg-[var(--view-btn-inactive-bg)]","border-solid border-[var(--sidebar-line-color)]"),children:[t.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2",children:[a?t.jsx(X,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)] animate-spin"}):t.jsx(Ie,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)]"}),t.jsx("span",{className:"truncate font-medium text-[var(--primary-strong)]",children:p})]}),!a&&t.jsx(_e,{className:S("text-sm 2xl:text-lg text-[var(--primary-strong)] transform transition-transform",{"rotate-180":l})})]})})},re=z(e=>({activeCrm:"all",setActiveCrm:s=>e({activeCrm:s})})),ie=z((e,s)=>({activeSwitch:"tab",setActiveSwitch:n=>{s().activeSwitch!==n&&e({activeSwitch:n})}})),je=z(e=>({activeCrmTab:"all",setActiveCrmTab:s=>e({activeCrmTab:s}),resetActiveCrmTab:()=>e({activeCrmTab:"all"})})),ye=z(e=>({activeUserTab:"all",setActiveUserTab:s=>e({activeUserTab:s})}));function Ct(){const{crm:e}=ut.getState(),{userTabs:s}=bt.getState(),{activeCrm:n}=re.getState(),{activeCrmTab:a}=je.getState(),{activeSwitch:r}=ie.getState(),{activeUserTab:i}=ye.getState();return{crms:e,activeCrm:n,activeSwitch:r,activeCrmTab:a,activeUserTab:i,userTabs:s}}const mn=()=>{const{crms:e,activeCrm:s,activeSwitch:n}=Ct();return n!=="crm"||s==="all"?[]:e.find(r=>r.id===s)?.list||[]},Tt=e=>{const{loading:s}=D.getState();return S("flex flex-1 items-center text-xs 2xl:text-sm justify-center gap-1 py-0.5 2xl:py-1 rounded-md transition-all duration-200 font-medium",!s&&"hover:scale-[1.02] active:scale-95 active:opacity-80",s&&"opacity-50 cursor-not-allowed",e?"bg-[var(--filter-btn-active-bg)] text-[var(--filter-btn-active-text)] shadow-sm border border-[var(--filter-btn-active-bg)]":"text-[var(--primary-strong)] bg-[var(--view-btn-inactive-bg)]")},Fa=()=>{const{language:e}=b.getState(),{loading:s}=D.getState(),{crms:n,activeCrm:a,activeCrmTab:r}=Ct();if(s)return e.carregando;if(r==="all"){const l=n.find(m=>m.id===a)?.name||"";return`${e.todas_abas_crm} ${l}`}return mn().find(l=>l.id===r)?.name||e.selecione_uma_aba},Pa=()=>{const{language:e}=b.getState(),{activeSwitch:s,activeCrm:n,activeUserTab:a,crms:r,userTabs:i}=Ct(),{loading:o}=D.getState();if(o)return e.carregando;if(s==="crm")return n==="all"?e.todos_crms:r.find(l=>l.id===n)?.name||e.selecione_um_crm;if(s==="tab")return a==="all"?e.todas_abas:i.find(l=>l.id===a)?.tag||e.selecione_uma_aba},ka=({crmTabsFilterRef:e})=>{const s=b(l=>l.language),n=mn(),a=je(l=>l.activeCrmTab),r=je.getState().setActiveCrmTab,i=D(l=>l.loading),o=L.getState().close;return t.jsx("div",{className:"flex flex-col rounded-md max-h-[42vh] overflow-hidden",style:{width:e.current?.offsetWidth},children:t.jsxs("div",{className:"flex-1 overflow-y-auto px-2 py-1",children:[t.jsxs("div",{className:S("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md",{"dark:bg-neutral-700 bg-neutral-300":a==="all"},{"hover:bg-[var(--view-btn-inactive-bg)]":a!=="all"}),onClick:()=>{r("all"),o()},children:[t.jsx(ee,{className:"flex-shrink-0"}),t.jsx("span",{className:"truncate",children:s.todas_abas})]}),n.map(l=>t.jsxs("div",{className:S("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md",{"dark:bg-neutral-700 bg-neutral-300":a===l.id,"hover:bg-[var(--view-btn-inactive-bg)]":a!==l.id}),onClick:()=>{r(l.id),o()},children:[t.jsx(ee,{className:"flex-shrink-0"}),t.jsx("span",{className:"truncate",children:l.name})]},l.id)),n.length===0&&!i&&t.jsx("div",{className:"flex items-center justify-center py-6 text-gray-500",children:t.jsxs("div",{className:"text-center",children:[t.jsx(ee,{className:"text-2xl mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-sm",children:s.nenhuma_aba_encontrada})]})})]})})},Ia=({mainFilterRef:e})=>{const s=b(h=>h.language),n=bt(h=>h.userTabs),a=ye(h=>h.activeUserTab),r=ye.getState().setActiveUserTab,i=ie(h=>h.activeSwitch),o=D(h=>h.loading),l=ut(h=>h.crm),m=re(h=>h.activeCrm),d=re.getState().setActiveCrm,g=L.getState().close,c=i==="crm",p=c?l:n,u=c?m:a,x=c?d:r,f=c?s.todos_crms:s.todas_abas,v=c?nt:ee;return t.jsx("div",{className:"flex flex-col rounded-md max-h-[42vh] overflow-hidden",style:{width:e.current?.offsetWidth},children:t.jsxs("div",{className:"flex-1 overflow-y-auto px-2 py-1",children:[t.jsxs("div",{className:S("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md",{"dark:bg-neutral-700 bg-neutral-300":u==="all"},{"hover:bg-[var(--view-btn-inactive-bg)]":u!=="all"}),onClick:()=>{x("all"),g()},children:[t.jsx(v,{className:"flex-shrink-0"}),t.jsx("span",{className:"truncate",children:f})]}),p.map(h=>{const _="name"in h?h.name:h.tag;return t.jsxs("div",{className:S("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md",{"dark:bg-neutral-700 bg-neutral-300":u===h.id,"hover:bg-[var(--view-btn-inactive-bg)]":u!==h.id}),onClick:()=>{x(h.id),g()},children:[t.jsx(v,{className:"flex-shrink-0"}),t.jsx("span",{className:"truncate",children:_})]},h.id)}),p.length===0&&!o&&t.jsx("div",{className:"flex items-center justify-center py-6 text-gray-500",children:t.jsxs("div",{className:"text-center",children:[t.jsx(v,{className:"text-2xl mx-auto mb-2 opacity-50"}),t.jsx("p",{className:"text-sm",children:s.nenhum_item_encontrado})]})})]})})},$a=()=>{const e=b(f=>f.language),s=ie(f=>f.activeSwitch),n=ie.getState().setActiveSwitch,a=D(f=>f.loading),r=R.useRef(null),i=R.useRef(null),{open:o,close:l}=L.getState(),m=L(f=>f.modalOptions),d=re(f=>f.activeCrm),g=f=>{a||s===f||(n(f),l())},c=(f,v="main")=>{f.stopPropagation(),v==="main"?m?l():o(t.jsx(Ia,{mainFilterRef:r}),{placement:"bottom"},f.currentTarget,5):m?l():o(t.jsx(ka,{crmTabsFilterRef:i}),{placement:"bottom"},f.currentTarget,5)},p=m&&r.current===document.activeElement,u=m&&i.current===document.activeElement,x=s==="crm"&&d!=="all";return t.jsxs("div",{className:"w-full flex flex-col gap-1 2xl:gap-2 2xl:mt-1",children:[t.jsxs("div",{className:"w-full flex gap-1 2xl:gap-2 items-center",children:[t.jsxs("button",{className:Tt(s==="tab"),onClick:a?void 0:()=>g("tab"),disabled:a,children:[t.jsx(ee,{}),t.jsx("span",{className:"font-bold",children:e.abas})]}),t.jsxs("button",{className:Tt(s==="crm"),onClick:a?void 0:()=>g("crm"),disabled:a,children:[t.jsx(nt,{}),t.jsx("span",{className:"font-bold",children:e.crms})]})]}),t.jsxs("button",{ref:r,onClick:f=>c(f,"main"),disabled:a,className:S("w-full flex items-center justify-between gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 text-xs 2xl:text-sm cursor-pointer border rounded-md transition-all duration-200",a?"cursor-not-allowed opacity-60 bg-gray-100":"cursor-pointer hover:scale-[1.01] active:opacity-80",p?"bg-[var(--view-btn-inactive-bg)]":"bg-[var(--filter-btn-inactive-bg)] hover:bg-[var(--view-btn-inactive-bg)]","border-solid border-[var(--sidebar-line-color)]"),children:[t.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2",children:[a?t.jsx(X,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)] animate-spin"}):s==="tab"?t.jsx(ee,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)]"}):t.jsx(nt,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)]"}),t.jsx("span",{className:"truncate font-medium text-[var(--primary-strong)]",children:Pa()})]}),!a&&t.jsx(_e,{className:S("text-sm 2xl:text-lg text-[var(--primary-strong)] transform transition-transform",{"rotate-180":p})})]}),x&&t.jsxs("button",{ref:i,onClick:f=>c(f,"crmTabs"),disabled:a,className:S("w-full flex items-center justify-between gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 text-xs 2xl:text-sm cursor-pointer border rounded-md transition-all duration-200",a?"cursor-not-allowed opacity-60 bg-gray-100":"cursor-pointer hover:scale-[1.01] active:opacity-80",u?"bg-[var(--view-btn-inactive-bg)]":"bg-[var(--filter-btn-inactive-bg)] hover:bg-[var(--view-btn-inactive-bg)]","border-solid border-[var(--sidebar-line-color)]"),children:[t.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2",children:[a?t.jsx(X,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)] animate-spin"}):t.jsx(ee,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)]"}),t.jsx("span",{className:"truncate font-medium text-[var(--primary-strong)]",children:Fa()})]}),!a&&t.jsx(_e,{className:S("text-sm 2xl:text-lg text-[var(--primary-strong)] transform transition-transform",{"rotate-180":u})})]})]})},Ue={gender:null,birthDate:null,city:null,state:null,leadSource:null,entryDate:null,exitDate:null,company:null,jobTitle:null,interestedProducts:[]},W=z()(Le((e,s)=>({tempFilters:Ue,appliedFilters:Ue,currentProduct:"",updateTempField:(n,a)=>{e(r=>({tempFilters:{...r.tempFilters,[n]:a}}))},setCurrentProduct:n=>{e({currentProduct:n})},addProduct:()=>{const{currentProduct:n,tempFilters:a}=s(),r=n.trim();r&&!a.interestedProducts.includes(r)&&e(i=>({tempFilters:{...i.tempFilters,interestedProducts:[...i.tempFilters.interestedProducts,r]},currentProduct:""}))},removeProduct:n=>{e(a=>({tempFilters:{...a.tempFilters,interestedProducts:a.tempFilters.interestedProducts.filter(r=>r!==n)}}))},clearTempFilters:()=>{e({tempFilters:Ue,currentProduct:""})},applyFilters:()=>{const{tempFilters:n}=s();e({appliedFilters:n})}}),{name:"advanced-filters-eem",version:1,partialize:e=>({tempFilters:e.tempFilters,appliedFilters:e.appliedFilters})})),q=({id:e,label:s,type:n="text",placeholder:a,options:r,grid:i=!1})=>{const o=b(c=>c.language),l=W(c=>c.tempFilters),m=W(c=>c.updateTempField),d=l[e]||"",g=c=>{m(e,c||null)};return t.jsxs("div",{className:`space-y-1 ${i?"flex-1":""}`,children:[t.jsx("label",{htmlFor:e,className:"block text-sm font-semibold",children:s}),r?t.jsxs("select",{id:e,value:d,onChange:c=>g(c.target.value),className:"select select-sm !leading-none w-full border border-solid border-[var(--fallback-bc,oklch(var(--bc)/.2))]",children:[t.jsx("option",{value:"",children:a||`${o.selecione} ${s.toLowerCase()}`}),r.map(c=>t.jsx("option",{value:c.value,children:c.label},c.value))]}):t.jsx("input",{id:e,type:n,placeholder:a,className:"input input-sm input-bordered w-full border border-solid transition-all duration-200",value:d,onChange:c=>g(c.target.value)})]})},Ma=[{value:"AC",label:"Acre"},{value:"AL",label:"Alagoas"},{value:"AP",label:"Amapá"},{value:"AM",label:"Amazonas"},{value:"BA",label:"Bahia"},{value:"CE",label:"Ceará"},{value:"DF",label:"Distrito Federal"},{value:"ES",label:"Espírito Santo"},{value:"GO",label:"Goiás"},{value:"MA",label:"Maranhão"},{value:"MT",label:"Mato Grosso"},{value:"MS",label:"Mato Grosso do Sul"},{value:"MG",label:"Minas Gerais"},{value:"PA",label:"Pará"},{value:"PB",label:"Paraíba"},{value:"PR",label:"Paraná"},{value:"PE",label:"Pernambuco"},{value:"PI",label:"Piauí"},{value:"RJ",label:"Rio de Janeiro"},{value:"RN",label:"Rio Grande do Norte"},{value:"RS",label:"Rio Grande do Sul"},{value:"RO",label:"Rondônia"},{value:"RR",label:"Roraima"},{value:"SC",label:"Santa Catarina"},{value:"SP",label:"São Paulo"},{value:"SE",label:"Sergipe"},{value:"TO",label:"Tocantins"}],Aa=[{value:"whatsapp",label:"WhatsApp"},{value:"youtube",label:"YouTube"},{value:"facebook",label:"Facebook"},{value:"instagram",label:"Instagram"},{value:"linkedin",label:"LinkedIn"},{value:"tiktok",label:"TikTok"},{value:"google",label:"Google"},{value:"site",label:b.getState().language.lead_sources_site||"Site"},{value:"formulario",label:b.getState().language.lead_sources_formulario||"Formulário"},{value:"crm",label:"CRM"},{value:"outros",label:b.getState().language.lead_sources_outros||"Outros"}],Da=[{value:"male",label:b.getState().language.gender_masculino||"Masculino"},{value:"female",label:b.getState().language.gender_feminino||"Feminino"}],za=()=>{const e=b(l=>l.language),s=W(l=>l.tempFilters),n=W(l=>l.currentProduct),{setCurrentProduct:a,addProduct:r,removeProduct:i}=W.getState(),o=l=>{l.key==="Enter"&&(l.preventDefault(),n.trim()&&r())};return t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"block text-sm font-semibold",children:e.digite_produto_interesse}),t.jsxs("div",{className:"flex gap-2 items-center",children:[t.jsx("input",{type:"text",placeholder:e.digite_produto_interesse,className:"input input-sm input-bordered flex-1 border border-solid transition-all duration-200",value:n,onChange:l=>a(l.target.value),onKeyDown:o}),t.jsx("button",{type:"button",onClick:r,className:"bg-[var(--primaria)] text-white p-2 rounded-md",children:e.adicionar})]}),s.interestedProducts.length>0&&t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"block text-sm font-semibold",children:e.produtos_selecionados}),t.jsx("div",{className:"flex flex-wrap gap-2",children:s.interestedProducts.map((l,m)=>t.jsxs("button",{type:"button",title:e.remover_produto,onClick:()=>i(l),className:`bg-gray-100 dark:bg-gray-700 px-3 py-1 rounded-full text-sm flex items-center
                gap-2 hover:scale-105 active:scale-90 cursor-pointer transition-all duration-150`,children:[t.jsx("span",{className:"truncate flex-1 min-w-0",children:l}),t.jsx(st,{className:"text-red-500 hover:text-red-600 cursor-pointer flex-shrink-0 w-4 h-4"})]},m))})]})]})},Ea=()=>{const e=b(r=>r.language),{applyFilters:s,clearTempFilters:n}=W.getState(),a=r=>{r.preventDefault(),s(),B.getState().close(),A({type:"Success",message:e.filtros_aplicados_sucesso})};return t.jsxs("div",{className:"w-[520px] max-h-[92vh] overflow-y-auto",children:[t.jsx(sn,{children:e.filtragem_avancada}),t.jsxs("form",{className:"space-y-3 mt-3",onSubmit:r=>r.preventDefault(),children:[t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(q,{id:"gender",label:e.genero,options:Da,grid:!0}),t.jsx(q,{id:"birthDate",label:e.data_nascimento,type:"date",grid:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(q,{id:"city",label:e.cidade,placeholder:e.digite_cidade,grid:!0}),t.jsx(q,{id:"state",label:e.estado,options:Ma,grid:!0})]}),t.jsx(q,{id:"leadSource",label:e.origem_lead,options:Aa}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(q,{id:"entryDate",label:e.data_entrada,type:"date",grid:!0}),t.jsx(q,{id:"exitDate",label:e.data_saida,type:"date",grid:!0})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsx(q,{id:"company",label:e.empresa,placeholder:e.nome_empresa,grid:!0}),t.jsx(q,{id:"jobTitle",label:e.cargo,placeholder:e.cargo_placeholder,grid:!0})]}),t.jsx(za,{}),t.jsxs("div",{className:"pt-2 w-full flex justify-center gap-3",children:[t.jsx(Mt,{type:"reset",name:e.limpar,funcao:n},"clearTempFilters"),t.jsx(Mt,{type:"submit",name:e.filtrar,funcao:a},"applyFilters")]})]})]})},ae=z()(Le((e,s)=>({options:[{key:"all"},{key:"birthdaysThisMonth"},{key:"genderMale"},{key:"genderFemale"}],selectedOption:"all",setSelectedOption:n=>{s().selectedOption!==n&&e({selectedOption:n})}}),{name:"useProfilesOptions-store",version:1,partialize:e=>({selectedOption:e.selectedOption})}));function pn(e){const s=b.getState().language;return{all:s.todos_os_contatos,birthdaysThisMonth:s.aniversariantes_mes,genderMale:s.sexo_masculino,genderFemale:s.sexo_feminino}[e]??s.opcao_desconhecida}function xn(e){const s="text-sm 2xl:text-base flex-shrink-0";return{all:t.jsx(At,{className:s}),birthdaysThisMonth:t.jsx(ms,{className:s}),genderMale:t.jsx(gs,{className:s}),genderFemale:t.jsx(us,{className:s})}[e]??t.jsx(At,{className:s})}const La=({profileOptionsRef:e})=>{const s=ae(i=>i.options),n=ae(i=>i.selectedOption),a=ae.getState().setSelectedOption,r=L.getState().close;return t.jsx("div",{className:"flex flex-col rounded-md max-h-[42vh] overflow-hidden",style:{width:e.current?.offsetWidth},children:t.jsx("div",{className:"flex-1 overflow-y-auto px-2 py-0.5 2xl:py-1",children:s.map(i=>t.jsxs("div",{className:S("flex items-center gap-1 2xl:gap-2 px-2 2xl:px-3 py-1 2xl:py-2 my-0.5 text-xs 2xl:text-sm cursor-pointer rounded-md",{"dark:bg-neutral-700 bg-neutral-300":i.key===n,"hover:bg-[var(--view-btn-inactive-bg)]":i.key!==n}),onClick:()=>{a(i.key),r()},children:[xn(i.key),t.jsx("span",{className:"truncate",children:pn(i.key)})]},i.key))})})},Ta=()=>{const e=b(g=>g.language),s=R.useRef(null),n=R.useRef(null),a=W(g=>g.appliedFilters),r=Object.values(a).filter(g=>g?.length??g).length,i=D(g=>g.loading),o=L(g=>g.modalOptions),l=()=>{const{open:g}=B.getState();g(t.jsx(Ea,{}))},m=g=>{const{open:c,close:p}=L.getState();o?p():c(t.jsx(La,{profileOptionsRef:n}),{placement:"bottom"},g.currentTarget,5)},d=ae(g=>g.selectedOption);return t.jsxs("div",{className:"w-full flex items-center gap-1 2xl:gap-2",children:[t.jsxs("button",{type:"button",ref:n,onClick:m,disabled:i,className:S("w-full flex items-center justify-between px-1.5 2xl:px-3 py-1 2xl:py-2 border rounded-md transition-all duration-200",i?"cursor-not-allowed opacity-60 bg-gray-100":"cursor-pointer hover:scale-[1.01] active:opacity-80",o?"bg-[var(--view-btn-inactive-bg)]":"bg-[var(--filter-btn-inactive-bg)] hover:bg-[var(--view-btn-inactive-bg)]","border-solid border-[var(--sidebar-line-color)]"),children:[t.jsxs("div",{className:"flex items-center gap-2",children:[i?t.jsx(X,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)] animate-spin"}):xn(d),t.jsx("span",{className:"truncate text-xs 2xl:text-base font-medium text-[var(--primary-strong)]",children:pn(d)})]}),!i&&t.jsx(_e,{className:S("text-sm 2xl:text-lg text-[var(--primary-strong)] transform transition-transform",{"rotate-180":o})})]}),t.jsx("button",{type:"button",ref:s,title:e.abrir_filtragem_avancada,onClick:l,disabled:i,className:S("w-fit flex items-center justify-between px-1.5 2xl:px-3 py-1 2xl:py-2 border rounded-md transition-all duration-200",i?"cursor-not-allowed opacity-60 bg-gray-100":"cursor-pointer hover:scale-[1.01] active:opacity-80","bg-[var(--filter-btn-inactive-bg)] hover:bg-[var(--view-btn-inactive-bg)]","border-solid border-[var(--sidebar-line-color)]"),children:t.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2",children:[i?t.jsx(X,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)] animate-spin"}):t.jsx(en,{className:"text-sm 2xl:text-lg text-[var(--primary-strong)]"}),t.jsxs("div",{className:"truncate text-xs 2xl:text-base font-medium text-[var(--primary-strong)]",children:[t.jsxs("span",{children:[e.filtragem_avancada," "]}),t.jsx("div",{className:"badge badge-xs 2xl:badge-sm badge-outline bg-[var(--primaria)]",children:r})]})]})})]})},Va=()=>{const e=ne(n=>n.activeFilter);return{savedContacts:null,inbox:null,labels:t.jsx(Sa,{}),groups:null,groupContacts:t.jsx(Ra,{}),crmOrTabs:t.jsx($a,{}),contactProfile:t.jsx(Ta,{}),importSpreadsheet:null}[e.id]||null},Ga=()=>{const e=Te.getState().setImportedContacts,s=B.getState().open,n=b(r=>r.language),a=()=>{s(t.jsx(ln,{list:r=>e(r)}))};return t.jsxs("button",{type:"button",title:n.importar_planilha,className:"rounded-md text-xs 2xl:text-sm px-2 py-1 gap-1 transition-all active:scale-95 flex items-center justify-center border border-solid duration-200 hover:scale-[0.98]",onClick:()=>a(),children:[n.importar_contatos,t.jsx(tn,{})]})},Oa=()=>{const e=ne(n=>n.activeFilter);return{savedContacts:null,inbox:null,labels:null,groups:null,groupContacts:null,crmOrTabs:null,contactProfile:null,importSpreadsheet:t.jsx(Ga,{})}[e.id]||null},Ha=()=>{const e=b(_=>_.language),[s,n]=R.useState(""),a=D(_=>_.contacts),r=D(_=>_.loading),i=j(_=>_.currentCampaignId),o=j(_=>_.campaigns),{updateCampaign:l}=j.getState(),m=o.find(_=>_.id===i),d=m?.selectedContacts||[],g=R.useMemo(()=>{if(!s.trim())return a;const _=s.toLowerCase();return a.filter(N=>N.name?.toLowerCase().includes(_)||N.phone?.toLowerCase().includes(_))},[a,s]),{breakpoint:c}=Y(),p={estimateSize:c==="2xl"?70:44,gap:c==="2xl"?8:4,padding:c==="2xl"?8:4},u=K.useRef(null),x=_t({count:g.length,getScrollElement:()=>u.current,estimateSize:()=>p.estimateSize,paddingStart:p.padding,paddingEnd:p.padding,gap:p.gap,overscan:10}),f=x.getTotalSize(),v=x.getVirtualItems(),h=()=>{if(!m)return;const _=new Set(g.map(P=>P.id)),k=g.every(P=>d.some(C=>C.id===P.id))?d.filter(P=>!_.has(P.id)):[...d,...g.filter(P=>!d.some(C=>C.id===P.id))];l(m.id,{selectedContacts:k})};return t.jsxs("div",{className:"bg-[var(--eem-bg-secondary)] p-2 rounded-md h-fit",children:[t.jsxs("div",{className:"w-full flex gap-1 2xl:gap-2 h-8 2xl:h-11 items-stretch px-1 2xl:px-2",children:[t.jsxs("div",{className:"relative flex-1 h-full",children:[t.jsx(ps,{className:"absolute text-base 2xl:text-xl left-3 top-1/2 transform -translate-y-1/2 text-black"}),t.jsx("input",{role:"search",type:"text",placeholder:e.contacts_list_pesquisar,value:s,onChange:_=>n(_.target.value),className:S("w-full pl-8 2xl:pl-10 h-full border text-sm 2xl:text-base rounded-md","bg-[var(--search-bg-color)] text-black","placeholder:!text-sm 2xl:placeholder:!text-base placeholder:!text-slate-500")})]}),t.jsxs("button",{onClick:h,className:`w-fit px-2 flex items-center justify-center rounded-md 
             h-full bg-[var(--selectAll-btn-bg-color)] hover:bg-[var(--selectAll-btn-hover-bg)] 
             text-white text-sm 2xl:text-base transition-all duration-150
             hover:scale-[1.02] active:scale-95 active:opacity-80
             border border-solid border-[var(--eem-border-primary)]`,children:[t.jsx(xs,{className:"text-white text-base 2xl:text-xl"}),t.jsx("span",{className:"ml-1 font-medium",children:g.every(_=>d.some(N=>N.id===_.id))?e.contacts_list_desmarcar_tudo:e.contacts_list_selecionar_tudo})]})]}),t.jsx("div",{className:"w-full px-1 2xl:px-2 py-1",children:t.jsx(Va,{})}),t.jsx("div",{className:"w-full px-2 pb-2 border-b-2 border-solid border-[var(--sidebar-line-color)]",children:r&&a.length===0?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(X,{className:"text-xs 2xl:text-base animate-spin"}),t.jsx("span",{className:"text-xs 2xl:text-base",children:e.contacts_list_carregando})]}):t.jsx("p",{className:"2xl:text-base text-xs",children:`${a.length} ${e.contacts_list_disponiveis} • ${d.length} ${e.contacts_list_selecionados}`})}),t.jsx("div",{className:"w-full overflow-auto max-h-[40dvh] px-1",ref:u,children:r&&a.length===0?t.jsx("div",{className:"flex h-[38vh] justify-center items-center",children:t.jsx(X,{size:48,className:"animate-spin"})}):g.length===0?t.jsxs("div",{className:"flex flex-col h-[36dvh] justify-center items-center text-gray-600 dark:text-gray-400",children:[t.jsx(fs,{className:"2xl:mb-3 mb-1 opacity-60 text-3xl 2xl:text-4xl"}),t.jsx("p",{className:"text-base 2xl:text-lg font-medium 2xl:mb-1",children:s.trim()?e.contacts_list_nenhum_encontrado:e.contacts_list_nenhum_disponivel}),t.jsx("p",{className:"text-xs 2xl:text-sm text-center max-w-xs mb-1",children:s.trim()?e.contacts_list_ajustar_busca:a.length===0?e.contacts_list_nao_existe:e.contacts_list_aparecerao_aqui}),t.jsx(Oa,{})]}):t.jsx("div",{style:{height:f,position:"relative"},children:v.map(_=>{const N=g[_.index];return N?t.jsx(ya,{contact:N,virtualItem:_},N.id):null})})})]})},Ba=({selectedContact:e,virtualItem:s})=>{const n=b(g=>g.language),{breakpoint:a}=Y(),r=j(g=>g.currentCampaignId),i=j(g=>g.campaigns),{updateCampaign:o}=j.getState(),l=i.find(g=>g.id===r),m=a==="2xl"?"sm":"xs",d=g=>{if(!l)return;const c=l.selectedContacts.filter(p=>p.id!==g);o(l.id,{selectedContacts:c})};return t.jsx("div",{className:"absolute top-0 left-0 w-full will-change-transform",style:{height:s.size,transform:`translateY(${s.start}px)`},children:t.jsxs("label",{htmlFor:`selectedContact-${e.id}`,className:`flex items-center justify-between bg-[var(--contact-card-bg)] rounded-md p-1 border border-solid
        border-[var(--sidebar-line-color)] cursor-pointer hover:scale-[1.02] active:scale-95 active:opacity-80 transition-all duration-200`,title:n.remover_contato,children:[t.jsxs("div",{className:"flex items-center gap-1.5 2xl:gap-3 w-10/12",children:[t.jsx(we,{contact:e,size:m}),t.jsx("p",{className:"text-xs 2xl:text-base font-medium truncate flex-1",children:e.name})]}),t.jsx("button",{id:`selectedContact-${e.id}`,className:`hover:bg-[var(--view-btn-inactive-bg)] hover:scale-[1.04] active:scale-90
          active:opacity-80 p-1 2xl:p-1.5 rounded-md transition-all duration-200 text-red-500`,onClick:()=>d(e.id),children:t.jsx(pt,{className:"text-sm 2xl:text-xl"})})]},e.id)})},Vt={contactId:"",name:"",surname:"",syncAdressBook:!0},Gt={isChecking:!1,isValid:null,message:""},te=z(e=>({formData:Vt,validation:Gt,setFormData:s=>e(n=>({formData:{...n.formData,...s}})),setValidation:s=>e(()=>({validation:s})),resetForm:()=>e(()=>({formData:Vt,validation:Gt}))})),qa=()=>{const e=te(a=>a.validation);if(!e.message)return null;const s=()=>{const a="flex items-center gap-2 mt-2 text-sm";return e.isChecking?`${a} text-base-content/60`:e.isValid===!1?`${a} text-error`:e.isValid===!0?`${a} text-success`:a},n=()=>e.isChecking?t.jsx("span",{className:"loading loading-spinner loading-xs"}):e.isValid===!1?t.jsx(hs,{className:"w-4 h-4"}):e.isValid===!0?t.jsx(vs,{className:"w-4 h-4"}):null;return t.jsxs("div",{className:s(),children:[n(),t.jsx("span",{children:e.message})]})},Ua=()=>{const e=b(r=>r.language),s=te(r=>r.validation),n=s.isChecking||s.isValid===!1||!s.message.trim(),a=`
    w-full mt-6 px-6 py-3 
    bg-gray-900 hover:bg-gray-800 active:bg-gray-950 
    dark:bg-gray-100 dark:hover:bg-gray-200 dark:active:bg-gray-50 
    text-white dark:text-gray-900 
    font-medium rounded-xl 
    transition-all duration-200 ease-out 
    flex items-center justify-center gap-2 
    shadow-lg hover:shadow-xl 
    dark:shadow-gray-200/20 dark:hover:shadow-gray-200/30 
    transform hover:-translate-y-0.5 active:translate-y-0 
    focus:outline-none focus:ring-2 focus:ring-gray-500 
    dark:focus:ring-gray-400 focus:ring-offset-2 
    dark:focus:ring-offset-gray-800 
    disabled:opacity-50 disabled:cursor-not-allowed 
    disabled:transform-none group
  `.replace(/\s+/g," ").trim();return t.jsx("button",{type:"submit",disabled:n,className:a,children:s.isChecking?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"loading loading-spinner loading-sm"}),t.jsx("span",{className:"tracking-wide",children:e.verificando})]}):t.jsxs(t.Fragment,{children:[t.jsx(bs,{className:"w-4 h-4 transition-transform duration-200 group-hover:scale-110"}),t.jsx("span",{className:"tracking-wide",children:e.criar_adicionar_contato})]})})};let ve=null;const Wa=500,Ka=e=>{const{language:s}=b.getState(),{setValidation:n}=te.getState();ve&&clearTimeout(ve),n({isChecking:!1,isValid:null,message:""});const a=e.replace(/\D/g,"");a.trim()&&(ve=setTimeout(async()=>{n({isChecking:!0,isValid:null,message:s.verificando_numero});try{const[r]=await Promise.all([M.Contact("queryExists",a),new Promise(i=>setTimeout(i,Wa))]);n({isChecking:!1,isValid:r&&r!=="undefined",message:r&&r!=="undefined"?s.numero_valido_existe:s.numero_invalido_nao_existe})}catch{n({isChecking:!1,isValid:!1,message:s.erro_verificar_numero})}},1e3))},Xa=()=>{ve&&clearTimeout(ve)},Ya=async()=>{const{language:e}=b.getState(),{formData:s}=te.getState(),{currentCampaignId:n,campaigns:a,updateCampaign:r}=j.getState();try{const i=a.find(x=>x.id===n);if(!i)return A({type:"Error",message:e.nenhuma_campanha_ativa}),!1;const o={contactId:s.contactId,name:s.name,options:{surname:s.surname,syncAdressBook:s.syncAdressBook}},l=await M.Contact("save",o);if(!l||typeof l=="string"&&l==="undefined")return A({type:"Error",message:e.erro_salvar_contato}),!1;const m=l.id.toString(),d=await M.Contact("getProfilePictureUrl",m).catch(()=>null),g=d&&d!=="undefined"?d:null,c={id:m,name:l.name,phone:_s(m),avatarUrl:g};if(i.selectedContacts.some(x=>x.id===c.id))return A({type:"Error",message:e.contato_ja_existe_campanha}),!1;const u=[...i.selectedContacts,c];return r(i.id,{selectedContacts:u}),A({type:"Success",message:e.contato_adicionado_sucesso}),!0}catch(i){return console.error("Erro ao criar contato:",i),A({type:"Error",message:e.erro_criar_contato}),!1}},Ja=()=>{const e=b(d=>d.language),s=te(d=>d.formData),n=te(d=>d.validation),{setFormData:a,resetForm:r}=te.getState(),{close:i}=B.getState(),o=(d,g)=>{d==="contactId"&&typeof g=="string"?(a({contactId:g}),Ka(g)):a({[d]:g})},l=async d=>{if(d.preventDefault(),n.isValid===!1)return;await Ya()&&(i(),r())},m=()=>{const d="!input !input-bordered !pl-14 !focus:input-neutral";return n.isValid===!1?`${d} !input-error`:n.isValid===!0?`${d} !input-success`:d};return R.useEffect(()=>()=>{Xa()},[]),t.jsxs("form",{onSubmit:l,className:"space-y-2",children:[t.jsxs("div",{className:"form-control",children:[t.jsx("label",{className:"label",children:t.jsx("span",{className:"label-text font-medium",children:e.numero_whatsapp})}),t.jsx(qs,{value:s.contactId,setValue:d=>o("contactId",d),inputClass:m(),buttonStyle:{marginTop:"9px",paddingLeft:"10px"},placeholder:e.digite_numero_whatsapp,preferredCountries:["in","br","ar","us","id","mx","ru","pk","ng"],enableSearch:!0,searchPlaceholder:e.buscar_pais,searchNotFound:e.pais_nao_encontrado,inputProps:{name:"whatsapp",required:!0,autoFocus:!0}}),t.jsx(qa,{})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("div",{className:"form-control",children:[t.jsx("label",{className:"label",children:t.jsx("span",{className:"label-text font-medium",children:e.nome})}),t.jsx("input",{type:"text",value:s.name,onChange:d=>o("name",d.target.value),placeholder:"João",className:"input input-bordered focus:input-neutral",required:!0})]}),t.jsxs("div",{className:"form-control",children:[t.jsx("label",{className:"label",children:t.jsx("span",{className:"label-text font-medium",children:e.sobrenome})}),t.jsx("input",{type:"text",value:s.surname,onChange:d=>o("surname",d.target.value),placeholder:"Silva",className:"input input-bordered focus:input-neutral"})]})]}),t.jsx("div",{className:"form-control",children:t.jsxs("label",{className:"label cursor-pointer justify-start gap-3",children:[t.jsx("input",{type:"checkbox",checked:s.syncAdressBook,onChange:d=>o("syncAdressBook",d.target.checked),className:"checkbox checkbox-neutral checkbox-sm"}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"label-text font-medium",children:e.sincronizar_google_contatos}),t.jsx("span",{className:"text-xs text-base-content/60 mt-1",children:s.syncAdressBook?e.contato_salvo_whatsapp_google:e.contato_salvo_apenas_whatsapp})]})]})}),t.jsx(Ua,{})]})},Qa=()=>t.jsxs("div",{className:"min-w-[450px] bg-base-100 p-3",children:[t.jsx(Za,{}),t.jsx(Ja,{})]}),Za=()=>{const e=b(s=>s.language);return t.jsxs("div",{className:"flex flex-col items-center mb-2",children:[t.jsx("div",{className:"avatar placeholder mb-2",children:t.jsx("div",{className:"bg-neutral text-neutral-content rounded-full w-14 h-14",children:t.jsx(Cs,{className:"w-7 h-7"})})}),t.jsx(sn,{children:e.adicionar_novo_contato}),t.jsxs("p",{className:"text-base-content/70 text-center mt-2 text-base leading-relaxed max-w-sm",children:[e.crie_contato_adicione," ",t.jsx("span",{className:"text-[var(--primary-strong)] font-semibold",children:e.automaticamente})," ",e.a_lista]})]})},er=()=>{const e=b(f=>f.language),[s,n]=K.useState(!1),a=K.useRef(null),r=j(f=>f.currentCampaignId),o=j(f=>f.campaigns).find(f=>f.id===r),{open:l,close:m}=Rn.getState(),d=o?.selectedContacts||[],{addGroupment:g}=ze.getState(),c=f=>{f.preventDefault();const h=new FormData(f.currentTarget).get("groupmentName");if(!h?.trim())return;const _={id:Qt(),name:h.trim(),contacts:[...d]};g(_),A({type:"Success",message:e.agrupamento_criado_sucesso}),a.current&&a.current.reset(),n(!1)},p=()=>{n(!1),a.current&&a.current.reset()},u=()=>S("h-full px-1 2xl:px-2 rounded-md bg-[var(--addContact-btn-bg-color)] hover:bg-[var(--addContact-btn-hover-bg)]","text-black transition-all duration-150 gap-1 hover:scale-[1.02] active:scale-95 active:opacity-80","border border-solid border-[var(--eem-border-primary)] flex items-center justify-center"),x=f=>{l(e.salve_contatos_agrupamento,{placement:"top"},f.currentTarget)};return d.length===0?null:t.jsx("div",{className:"w-full h-6 2xl:h-8 text-xs 2xl:text-base font-medium",children:s?t.jsxs("form",{className:"w-full h-full flex items-center gap-1",onSubmit:c,ref:a,children:[t.jsx("input",{type:"text",name:"groupmentName",className:`flex-1 px-1.5 2xl:px-2.5 h-full rounded-md border border-solid border-[var(--eem-border-primary)]
              placeholder:!text-xs 2xl:placeholder:!text-base`,placeholder:e.insira_nome_agrupamento,autoFocus:!0}),t.jsx("button",{type:"submit",title:e.criar_agrupamento,className:`${u()} w-fit flex items-center justify-center`,children:t.jsx(cn,{fontWeight:800,className:"text-black text-inherit"})}),t.jsx("button",{type:"button",title:e.cancelar_criacao,onClick:p,className:`${u()} w-fit flex items-center justify-center`,children:t.jsx(dn,{fontWeight:800,className:"text-red-600 text-inherit"})})]}):t.jsxs("button",{type:"button",className:`${u()} w-full`,onClick:()=>n(!0),children:[t.jsx("span",{children:e.criar_agrupamento}),t.jsx("span",{onMouseEnter:x,onMouseLeave:m,onClick:m,children:t.jsx(js,{})})]})})},tr=()=>{const e=b(x=>x.language),s=j(x=>x.currentCampaignId),n=j(x=>x.campaigns),{updateCampaign:a}=j.getState(),{open:r}=B.getState(),i=n.find(x=>x.id===s),o=i?.selectedContacts||[],l=()=>{i&&a(i.id,{selectedContacts:[]})},{breakpoint:m}=Y(),d={estimateSize:m==="2xl"?37:29,gap:m==="2xl"?8:6,padding:m==="2xl"?8:6},g=K.useRef(null),c=_t({count:o.length,getScrollElement:()=>g.current,estimateSize:()=>d.estimateSize,paddingStart:d.padding,paddingEnd:d.padding,gap:d.gap,overscan:10}),p=c.getTotalSize(),u=c.getVirtualItems();return t.jsxs("div",{className:"flex flex-col items-center bg-[var(--eem-bg-secondary)] p-2 rounded-md h-fit",children:[t.jsxs("div",{className:"flex items-center justify-between w-full mb-1 2xl:mb-2",children:[t.jsx("h2",{className:"text-xs xl:text-base 2xl:text-lg",children:e.destinatarios_selecionados}),t.jsxs("button",{className:`w-fit px-0.5 2xl:px-2 flex items-center justify-center rounded-md 
          bg-[var(--addContact-btn-bg-color)] hover:bg-[var(--addContact-btn-hover-bg)] 
        text-black transition-all duration-150 gap-0.5 2xl:gap-1 text-xs xl:text-base 2xl:text-lg
          hover:scale-[1.02] active:scale-95 active:opacity-80
          border border-solid border-[var(--eem-border-primary)]`,onClick:()=>r(t.jsx(Qa,{})),children:[t.jsx(ys,{className:"text-black"}),t.jsx("span",{className:"font-medium",children:e.adicionar_contato})]})]}),t.jsxs("div",{className:"flex items-center justify-between w-full mb-0.5 text-xs xl:text-base 2xl:text-lg",children:[t.jsx("p",{className:"text-[var(--light-text-color)]",children:`${o.length} ${ws(o.length,e.destinatario,e.destinatarios)}`}),t.jsxs("button",{title:e.limpar_tudo,className:`flex items-center gap-0.5 2xl:gap-1 hover:bg-[var(--view-btn-inactive-bg)]
          hover:scale-[1.04] active:scale-90 active:opacity-80 p-1 2xl:p-1.5 transition-all duration-200 rounded-md`,onClick:()=>o.length>0&&l(),children:[t.jsx(pt,{}),t.jsx("span",{className:"font-medium",children:e.limpar})]})]}),t.jsx("div",{className:"w-full overflow-auto max-h-[36dvh] px-1",ref:g,children:t.jsx("div",{style:{height:p,position:"relative"},children:u.map(x=>{const f=o[x.index];return f?t.jsx(Ba,{selectedContact:f,virtualItem:x},x.key):null})})}),t.jsx("hr",{className:"w-full my-1.5 2xl:my-3 border-1 border-solid border-[var(--eem-border-primary)]"}),t.jsx(er,{})]})},nr=()=>{const e=b(s=>s.language);return t.jsxs(t.Fragment,{children:[t.jsx(Ve,{title:e.step_contacts_titulo,subtitle:e.step_contacts_subtitulo}),t.jsxs("div",{className:"grid grid-cols-[29%_minmax(300px,1fr)_28%] gap-2 2xl:gap-4",children:[t.jsx(Ca,{}),t.jsx(Ha,{}),t.jsx(tr,{})]})]})},se=({label:e,value:s,className:n=""})=>t.jsxs("div",{className:S("flex justify-between text-xs",n),children:[t.jsx("span",{children:e}),t.jsx("span",{className:"font-medium",children:s})]}),Ot=e=>e.toLocaleDateString(void 0,{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}),sr=(e,s)=>{const n=new Date(s).getTime()-new Date(e).getTime(),a=Math.floor(n/6e4),r=Math.floor(n%6e4/1e3);return a>0?`${a}m ${r}s`:`${r}s`},ar=()=>{const e=b(i=>i.language),s=j(i=>i.currentCampaignId),{execution:n}=oe(s);if(n?.status!==Pn.COMPLETED)return t.jsx("div",{className:"text-center py-8",children:e.resultados_disponiveis_apos_conclusao});const a=({value:i,label:o})=>t.jsxs("div",{className:"bg-[var(--result-card-bg-color)] h-full flex-1 flex flex-col items-center justify-center rounded-md",children:[t.jsx("h2",{className:"text-[30px] 2xl:text-[40px] text-[var(--primaria)] font-semibold",children:i}),t.jsx("p",{className:"text-[var(--light-text-color)] text-sm 2xl:text-base",children:o})]}),r=n.totalContacts*n.totalActions;return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[t.jsx("div",{className:"size-12 2xl:size-16 bg-[#d2fecc] rounded-full flex items-center justify-center",children:t.jsx(xt,{className:"text-green-600 text-[30px] 2xl:text-[40px]"})}),t.jsx("h1",{className:"text-lg 2xl:text-2xl font-medium leading-none",children:e.acoes_executadas_sucesso}),t.jsx("p",{className:"text-sm 2xl:text-lg text-[var(--light-text-color)]",children:e.todas_acoes_executadas}),t.jsxs("div",{className:`w-full border border-solid border-[var(--sidebar-line-color)] 
        rounded-md p-2 2xl:p-3 space-y-6 2xl:space-y-12 mt-3 2xl:mt-6`,children:[t.jsxs("div",{className:"flex items-center gap-1.5 2xl:gap-2 text-sm 2xl:text-lg font-medium",children:[t.jsx($e,{className:"text-base 2xl:text-2xl"}),t.jsx("span",{children:e.resumo_execucao})]}),t.jsxs("div",{className:"flex gap-2 h-32",children:[t.jsx(a,{value:n.totalContacts,label:e.contatos_alcancados}),t.jsx(a,{value:r,label:e.total_acoes_enviadas}),t.jsx(a,{value:n.failedContacts.length,label:e.erros_no_envio})]}),t.jsxs("div",{className:"space-y-0.5 2xl:space-y-1",children:[t.jsx(se,{label:e.detalhes,value:"",className:"font-bold"}),t.jsx(se,{label:e.iniciado_em,value:Ot(n.startedAt)}),t.jsx(se,{label:e.concluido_em,value:Ot(n.completedAt)}),t.jsx(se,{label:e.tempo_total,value:sr(n.startedAt,n.completedAt)})]})]})]})})},jt=e=>{const s=b.getState().language;return{txt:{title:s.action_txt_title,description:s.action_txt_desc,icon:null},image:{title:s.action_image_title,description:s.action_image_desc,icon:null},video:{title:s.action_video_title,description:s.action_video_desc,icon:null},audio:{title:s.action_audio_title,description:s.action_audio_desc,icon:null},doc:{title:s.action_doc_title,description:s.action_doc_desc,icon:null},respostaRapida:{title:s.action_respostaRapida_title,description:s.action_respostaRapida_desc,icon:null},addCRM:{title:s.action_addCRM_title,description:s.action_addCRM_desc,icon:null},removeCRM:{title:s.action_removeCRM_title,description:s.action_removeCRM_desc,icon:null},removeAllCRM:{title:s.action_removeAllCRM_title,description:s.action_removeAllCRM_desc,icon:null},addLabel:{title:s.action_addLabel_title,description:s.action_addLabel_desc,icon:null},removeLabel:{title:s.action_removeLabel_title,description:s.action_removeLabel_desc,icon:null},removeAllLabel:{title:s.action_removeAllLabel_title,description:s.action_removeAllLabel_desc,icon:null},timer:{title:s.action_timer_title,description:s.action_timer_desc,icon:null},composing:{title:s.action_composing_title,description:s.action_composing_desc,icon:null},recording:{title:s.action_recording_title,description:s.action_recording_desc,icon:null},arquivar:{title:s.action_arquivar_title,description:s.action_arquivar_desc,icon:null},desarquivar:{title:s.action_desarquivar_title,description:s.action_desarquivar_desc,icon:null},fixarChat:{title:s.action_fixarChat_title,description:s.action_fixarChat_desc,icon:null},desfixarChat:{title:s.action_desfixarChat_title,description:s.action_desfixarChat_desc,icon:null},marcarNaoLido:{title:s.action_marcarNaoLido_title,description:s.action_marcarNaoLido_desc,icon:null},transferir:{title:s.action_transferir_title,description:s.action_transferir_desc,icon:null},bloquear:{title:s.action_bloquear_title,description:s.action_bloquear_desc,icon:null},pix:{title:s.action_pix_title,description:s.action_pix_desc,icon:null},groupInvite:{title:s.action_groupInvite_title,description:s.action_groupInvite_desc,icon:null},contact:{title:s.action_contact_title,description:s.action_contact_desc,icon:null},linkPreview:{title:s.action_linkPreview_title,description:s.action_linkPreview_desc,icon:null},sticker:{title:s.action_sticker_title,description:s.action_sticker_desc,icon:null},list:{title:s.action_list_title,description:s.action_list_desc,icon:null}}[e]},rr=()=>{const e=b(H=>H.language),[s,n]=R.useState(null);R.useEffect(()=>{async function H(){const ce=await on();n(ce)}H()},[]);const a=j(H=>H.currentCampaignId),{execution:r,isLoading:i,actions:o,isRunning:l,isPaused:m,isCompleted:d,isCancelled:g,campaign:c}=oe(a),{clearExecution:p}=Yt.getState(),u=()=>{p(a),r?.type==="test"?o.sendTest():o.sendFull()};if(!c)return t.jsx("div",{className:"text-center py-8",children:e.nenhuma_campanha_selecionada});const{breakpoint:x}=Y(),f=r?r.currentContactIndex/r.totalContacts*100:0,v=r?.type==="test"?s?[s]:[]:c.selectedContacts,h=r&&r.currentContactIndex<v.length?v[r.currentContactIndex]:null,_=r?.currentActionIndex??0,N=c.actions[_],k=c.actions.length>0?(_+1)/c.actions.length*100:0,P=N?jt(N.type):null,C=r&&c.config.pause?.every>0?c.config.pause.every-r.currentContactIndex%c.config.pause.every:null,V=m&&r?.isAutoPause===!0;return r?.type==="test"&&!s?t.jsx("div",{className:"flex-1 flex flex-col rounded-md border border-solid overflow-hidden bg-[var(--eem-bg-primary)] border-[var(--eem-border-primary)] min-h-0",children:t.jsx("div",{className:"px-4 py-3 border-b border-solid border-[var(--eem-border-primary)] bg-[var(--sidebar-bg-primary)]",children:t.jsx("h3",{className:"font-semibold text-sm",children:e.carregando_contatos})})}):t.jsxs("div",{className:"flex-1 flex flex-col rounded-md border border-solid overflow-hidden bg-[var(--eem-bg-primary)] border-[var(--eem-border-primary)] min-h-0",children:[r&&t.jsxs("div",{className:"flex-shrink-0 px-3 2xl:px-6 py-2 2xl:py-4 border-b border-solid border-[var(--eem-border-primary)] bg-[var(--sidebar-bg-primary)]",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h3",{className:"font-semibold text-xs 2xl:text-sm",children:e.progresso}),t.jsxs("span",{className:"text-xs font-medium opacity-70",children:[r.currentContactIndex," / ",r.totalContacts]})]}),t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("span",{className:"text-xs font-bold",children:[f.toFixed(0),"%"]})}),t.jsx("progress",{className:`progress w-full h-2 ${d?"progress-success":g?"progress-error":m?"progress-warning":"progress-primary"}`,value:r.currentContactIndex,max:r.totalContacts})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0",children:[r&&t.jsxs("div",{className:"grid grid-cols-3 divide-x divide-solid border-b border-solid border-[var(--eem-border-primary)] divide-[var(--eem-border-primary)]",children:[t.jsxs("div",{className:"px-2 2xl:px-4 py-1.5 2xl:py-3 text-center",children:[t.jsx("div",{className:"text-sm 2xl:text-2xl font-bold mb-0.5",children:r.currentContactIndex}),t.jsx("div",{className:"text-xs uppercase tracking-wide opacity-60",children:e.contatos_processados})]}),t.jsxs("div",{className:"px-2 2xl:px-4 py-1.5 2xl:py-3 text-center",children:[t.jsxs("div",{className:"text-sm 2xl:text-2xl font-bold text-success flex items-center justify-center gap-0.5 2xl:gap-1.5 mb-0.5",children:[t.jsx(Ae,{size:x==="2xl"?20:14}),r.successContacts.length]}),t.jsx("div",{className:"text-xs uppercase tracking-wide opacity-60",children:e.contatos_enviados})]}),t.jsxs("div",{className:"px-2 2xl:px-4 py-1.5 2xl:py-3 text-center",children:[t.jsxs("div",{className:"text-sm 2xl:text-2xl font-bold text-error flex items-center justify-center gap-0.5 2xl:gap-1.5 mb-0.5",children:[t.jsx(ft,{size:x==="2xl"?20:14}),r.failedContacts.length]}),t.jsx("div",{className:"text-xs uppercase tracking-wide opacity-60",children:e.falhas})]})]}),t.jsxs("div",{className:"px-2 2xl:px-4 py-1.5 2xl:py-3 border-b border-solid bg-[var(--eem-bg-primary)] border-[var(--eem-border-primary)]",children:[t.jsx("h3",{className:"font-semibold text-xs 2xl:text-sm mb-1 2xl:mb-2",children:e.configuracoes_de_envio}),t.jsxs("div",{className:"grid grid-cols-2 gap-1.5 2xl:gap-3 text-xs",children:[t.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2",children:[t.jsx(an,{className:"text-primary flex-shrink-0",size:x==="2xl"?16:12}),t.jsx("div",{children:t.jsxs("div",{className:"font-medium",children:[e.intervalo_entre_contatos," ",c.config.interval?.seconds||0,"s"]})})]}),(c.config.pause?.every||0)>0&&t.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2",children:[t.jsx(Me,{className:"text-warning flex-shrink-0",size:x==="2xl"?16:12}),t.jsx("div",{children:t.jsxs("div",{className:"font-medium",children:[e.pausa_auto_a_cada," ",c.config.pause.every," ",e.contato," • ",c.config.pause.durationSeconds,"s"]})})]}),l&&C&&t.jsx("div",{className:"col-span-2 mt-1 p-2 bg-warning/10 rounded-md",children:t.jsxs("div",{className:"text-warning font-medium",children:[e.proxima_pausa_auto_em," ",C," ",e.contato,"(s)"]})})]})]}),l&&P&&t.jsxs("div",{className:"px-2 2xl:px-4 py-1.5 2xl:py-3 border-b border-solid bg-[var(--sidebar-bg-primary)] border-[var(--eem-border-primary)]",children:[t.jsxs("div",{className:"flex items-center justify-between mb-1 2xl:mb-2",children:[t.jsx("h3",{className:"font-semibold text-xs 2xl:text-sm",children:e.acao_atual}),t.jsxs("span",{className:"text-xs font-medium opacity-70",children:[_+1," / ",c.actions.length]})]}),t.jsxs("div",{className:"flex items-center gap-1.5 2xl:gap-3 mb-1 2xl:mb-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"font-medium text-xs 2xl:text-sm",children:P.title}),t.jsx("div",{className:"text-xs opacity-70",children:P.description})]}),t.jsx("div",{className:"loading loading-spinner loading-xs 2xl:loading-sm text-primary flex-shrink-0"})]}),t.jsx("progress",{className:"progress progress-primary w-full h-1.5",value:_+1,max:c.actions.length}),t.jsxs("div",{className:"text-xs text-right mt-0.5 2xl:mt-1 opacity-70",children:[k.toFixed(0),"%"]})]}),l&&h&&t.jsx("div",{className:"px-2 2xl:px-4 py-1.5 2xl:py-3 border-b border-solid bg-[var(--sidebar-bg-primary)] border-[var(--eem-border-primary)]",children:t.jsxs("div",{className:"flex items-center gap-1.5 2xl:gap-3",children:[t.jsx("div",{className:"loading loading-spinner loading-xs 2xl:loading-sm text-primary"}),t.jsx(we,{contact:h,size:x==="2xl"?"sm":"xs"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"font-semibold text-xs 2xl:text-sm truncate",children:h.name}),t.jsx("div",{className:"text-xs opacity-70 truncate",children:h.phone})]})]})})]}),t.jsx("div",{className:"flex-shrink-0 px-3 2xl:px-6 py-2 2xl:py-4 bg-[var(--eem-bg-primary)]",children:t.jsxs("div",{className:"flex gap-1 2xl:gap-2 justify-center flex-wrap",children:[!r&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:o.sendTest,disabled:i,className:"py-1 px-1.5 flex gap-1 bg-transparent border border-solid hover:opacity-80 rounded-md items-center disabled:opacity-50",children:[t.jsx(Us,{size:16,className:"flex-shrink-0"}),t.jsx("span",{className:"hidden sm:inline whitespace-nowrap",children:e.enviar_teste})]}),t.jsxs("button",{onClick:o.sendFull,disabled:i||v.length===0,className:"py-1 px-1.5 flex gap-1 bg-transparent border border-solid hover:opacity-80 rounded-md items-center disabled:opacity-50",children:[i?t.jsx(Dt,{size:16,className:"flex-shrink-0 animate-spin"}):t.jsx(Ws,{size:16,className:"flex-shrink-0"}),t.jsx("span",{className:"whitespace-nowrap",children:e.iniciar_campanha})]})]}),l&&!V&&t.jsxs(t.Fragment,{children:[t.jsxs("button",{onClick:o.pause,className:"py-1 px-1.5 flex gap-1 bg-transparent border border-solid hover:opacity-80 rounded-md items-center disabled:opacity-50",children:[t.jsx(Ks,{size:16,className:"flex-shrink-0"}),t.jsx("span",{className:"whitespace-nowrap",children:e.pausar})]}),t.jsxs("button",{onClick:o.cancel,className:"py-1 px-1.5 flex gap-1 bg-transparent border border-solid hover:opacity-80 rounded-md items-center disabled:opacity-50",children:[t.jsx(zt,{size:16,className:"flex-shrink-0"}),t.jsx("span",{className:"whitespace-nowrap",children:e.cancelar})]})]}),m&&!V&&t.jsx(t.Fragment,{children:t.jsxs("button",{onClick:o.resume,disabled:i,className:"py-1 px-1.5 flex gap-1 bg-transparent border border-solid hover:opacity-80 rounded-md items-center disabled:opacity-50",children:[i?t.jsx(Dt,{size:16,className:"flex-shrink-0 animate-spin"}):t.jsx(Xs,{size:16,className:"flex-shrink-0"}),t.jsx("span",{className:"whitespace-nowrap",children:e.continuar})]})}),(d||g)&&t.jsxs("button",{onClick:u,className:"py-1 px-1.5 flex gap-1 bg-transparent border border-solid hover:opacity-80 rounded-md items-center",children:[t.jsx(Ys,{size:16,className:"flex-shrink-0"}),t.jsx("span",{className:"whitespace-nowrap",children:e.enviar_novamente})]}),l&&r&&t.jsxs("button",{onClick:o.forceCancel,className:"py-1 px-1.5 flex gap-1 bg-error text-white border-error hover:opacity-80 rounded-md items-center disabled:opacity-50",children:[t.jsx(zt,{size:16,className:"flex-shrink-0"}),t.jsx("span",{className:"whitespace-nowrap",children:e.forcar_cancelamento})]})]})})]})},ir=()=>{const e=b(c=>c.language),s=j(c=>c.currentCampaignId),{campaign:n,execution:a,isRunning:r}=oe(s),[i,o]=R.useState(null),l=R.useRef(null),{breakpoint:m}=Y();R.useEffect(()=>{async function c(){const p=await on();o(p)}c()},[a]);const d=a?.type==="test"?i?[i]:[]:n.selectedContacts,g=_t({count:d.length,getScrollElement:()=>l.current,estimateSize:()=>60,overscan:5,gap:8,paddingEnd:8,paddingStart:8});return a?.type==="test"&&!i?t.jsx("div",{className:"w-80 flex flex-col rounded-md border border-solid overflow-hidden bg-[var(--eem-bg-primary)] border-[var(--eem-border-primary)] min-h-0",children:t.jsx("div",{className:"flex-shrink-0 px-4 py-3 border-b border-solid border-[var(--eem-border-primary)] bg-[var(--sidebar-bg-primary)]",children:t.jsx("h3",{className:"font-semibold text-sm",children:e.carregando_contatos})})}):t.jsxs("div",{className:"w-80 flex flex-col rounded-md border border-solid overflow-hidden bg-[var(--eem-bg-primary)] border-[var(--eem-border-primary)] min-h-0",children:[t.jsx("div",{className:"flex-shrink-0 px-4 py-3 border-b border-solid border-[var(--eem-border-primary)] bg-[var(--sidebar-bg-primary)]",children:t.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[t.jsx("span",{children:e.contatos}),t.jsx("span",{className:"badge badge-neutral badge-xs",children:d.length})]})}),t.jsx("div",{ref:l,className:"flex-1 overflow-y-auto p-2 min-h-0",children:t.jsx("div",{style:{height:`${g.getTotalSize()}px`,width:"100%",position:"relative"},children:g.getVirtualItems().map(c=>{const p=d[c.index],u=c.index<a.currentContactIndex,x=c.index===a.currentContactIndex&&r,f=a.failedContacts.some(v=>v.id===p.id);return t.jsxs("div",{"data-index":c.index,ref:g.measureElement,className:`flex items-center gap-2.5 px-3 py-2 rounded-md transition-all mb-1.5 ${x?"bg-primary/10 ring-1 ring-primary":f?"bg-error/10 ring-1 ring-error/30":u?"bg-success/10":"opacity-50 bg-[var(--sidebar-bg-primary)]"}`,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${c.start}px)`},children:[t.jsx(we,{contact:p,size:m==="2xl"?"sm":"xs"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"font-medium text-xs 2xl:text-sm truncate",children:p.name}),t.jsx("div",{className:"text-xs opacity-70 truncate",children:p.phone})]}),t.jsxs("div",{className:"flex-shrink-0",children:[f&&t.jsx(ft,{className:"text-error",size:18}),!f&&u&&t.jsx(Ae,{className:"text-success",size:18}),x&&t.jsx("span",{className:"loading loading-spinner loading-xs text-primary"})]})]},c.key)})})})]})},or=()=>{const e=b(h=>h.language),s=j(h=>h.currentCampaignId),{execution:n,isRunning:a,isPaused:r,isCompleted:i,isCancelled:o,campaign:l}=oe(s);if(!l)return t.jsx("div",{className:"text-center py-8",children:e.nenhuma_campanha_selecionada});const m=n&&n.currentContactIndex<l.selectedContacts.length?l.selectedContacts[n.currentContactIndex]:null,d=n?.currentActionIndex??0,g=l.actions[d],c=g?jt(g.type):null,p=r&&n?.isAutoPause===!0,u={idle:{title:e.pronto_para_enviar,subtitle:e.inicie_envio_ou_teste},running:{title:e.enviando_mensagens,subtitle:m?`${e.enviando_para} ${m.name}`:e.processando},paused:{title:e.campanha_pausada,subtitle:e.continue_de_onde_parou},completed:{title:e.envio_concluido,subtitle:e.todas_mensagens_processadas},cancelled:{title:e.envio_cancelado,subtitle:e.envio_foi_interrompido}},x=n?a?"running":r?"paused":i?"completed":"cancelled":"idle",{title:f,subtitle:v}=u[x];return t.jsxs(t.Fragment,{children:[t.jsx(Ve,{title:f,subtitle:v}),t.jsxs("div",{className:"flex flex-col gap-2 border border-solid border-[var(--sidebar-line-color)] rounded-md p-2 2xl:p-4",children:[t.jsxs("div",{className:"h-[64vh] flex gap-2",children:[t.jsx(rr,{}),n&&l.selectedContacts.length>0&&t.jsx(ir,{})]}),!n&&t.jsxs("div",{className:"alert alert-info py-1.5 2xl:py-2.5 text-xs 2xl:text-sm !rounded-md",children:[t.jsx(Ae,{size:18}),t.jsxs("span",{children:[t.jsx("strong",{children:e.dicas})," ",e.dicas_teste_pausa]})]}),p&&t.jsxs("div",{className:"alert alert-warning py-1.5 2xl:py-2.5 text-xs 2xl:text-sm !rounded-md",children:[t.jsx(an,{size:18,className:"animate-pulse"}),t.jsx("div",{className:"flex flex-col",children:t.jsxs("span",{children:[t.jsx(Me,{size:14,className:"inline mb-0.5"})," ",t.jsx("strong",{children:e.pausa_automatica})," •",e.processados," ",t.jsx("strong",{children:n?.currentContactIndex})," ",e.de," ",t.jsx("strong",{children:n?.totalContacts})," ",e.contatos]})})]}),r&&!p&&t.jsxs("div",{className:"alert alert-warning py-1.5 2xl:py-2.5 text-xs 2xl:text-sm !rounded-md",children:[t.jsx(Me,{size:18}),t.jsxs("span",{children:[t.jsx(Me,{size:14,className:"inline mb-0.5"})," ",t.jsx("strong",{children:e.pausado_manualmente})," •",e.contato," ",t.jsx("strong",{children:n?.currentContactIndex+1})," ",e.de," ",t.jsx("strong",{children:n?.totalContacts}),c&&` • ${e.acao}: ${c.title} (${n?.currentActionIndex+1}/${l.actions.length})`]})]}),i&&t.jsxs("div",{className:"alert alert-success py-1.5 2xl:py-2.5 text-xs 2xl:text-sm !rounded-md",children:[t.jsx(Ae,{size:18}),t.jsx("span",{children:t.jsx("strong",{children:e.envio_concluido_alert})})]}),o&&t.jsxs("div",{className:"alert alert-error py-1.5 2xl:py-2.5 text-xs 2xl:text-sm !rounded-md",children:[t.jsx(ft,{size:18}),t.jsx("span",{children:t.jsx("strong",{children:e.envio_cancelado_alert})})]})]})]})},lr=({action:e,index:s})=>{const n=jt(e.type),a=n.icon;return t.jsxs("div",{className:"flex bg-[var(--contact-card-bg)] rounded-md items-center gap-2 2xl:gap-3 p-1.5 2xl:p-3 border-[var(--sidebar-line-color)] border border-solid",children:[t.jsx("div",{className:"size-5 2xl:size-6 bg-[var(--terciaria)] rounded-full flex items-center justify-center text-[var(--primaria)] font-semibold text-xs",children:s+1}),n.icon&&t.jsx("div",{className:"size-6 2xl:size-8 flex items-center justify-center",children:t.jsx(a,{size:16})}),t.jsxs("div",{className:"flex-1",children:[n.title&&t.jsx("div",{className:"font-semibold text-xs 2xl:text-sm",children:n.title}),n.description&&t.jsx("div",{className:"text-xs",children:n.description})]})]})},fn=({onClick:e})=>{const s=b(i=>i.language),n=j(i=>i.campaigns.find(o=>o.id===i.currentCampaignId)),a=n.status===I.SENDING||n.status===I.PAUSED,r=()=>{a||e()};return t.jsxs("button",{onClick:r,disabled:a,className:`ml-auto text-blue-600 hover:text-blue-700 active:scale-[0.98] hover:scale-[1.02] text-xs 2xl:text-sm font-medium
     flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed transition-all`,children:[t.jsx(Ss,{className:"text-base 2xl:text-2xl"}),s.editar]})},cr=()=>{const e=b(p=>p.language),s=j(p=>p.campaigns.find(u=>u.id===p.currentCampaignId)),{setCurrentStep:n}=O.getState(),{ref:a,onMouseDown:r}=gn(),{actions:i}=s,{interval:o,pause:l}=s.config,{durationSeconds:m,every:d}=l,g=i.length===0?0:(i.length-1)*o.seconds+Math.floor(i.length/d)*m,c=`${Math.floor(g/60)}m ${g%60}s`;return t.jsxs("div",{className:"h-full flex-1 flex flex-col p-3 2xl:p-4 border border-[var(--sidebar-line-color)] border-solid rounded-md",children:[t.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2 mb-2 2xl:mb-4",children:[t.jsx(Zt,{className:"text-base 2xl:text-2xl"}),t.jsx("h2",{className:"text-sm 2xl:text-base font-medium",children:e.sequencia_acoes}),t.jsx(fn,{onClick:()=>n("acoes")})]}),t.jsx("div",{ref:a,className:"flex flex-col gap-1 2xl:gap-2 mb-2 2xl:mb-4 pb-0.5 2xl:pb-1 pr-1 overflow-y-auto flex-1 min-h-0 select-none",onMouseDown:r,style:{WebkitOverflowScrolling:"touch"},children:i.map((p,u)=>t.jsx("div",{children:t.jsx(lr,{action:p,index:u},p.id)}))}),t.jsxs("div",{className:"mt-auto border-t border-solid border-[var(--sidebar-line-color)] pt-1.5 2xl:pt-3 space-y-0.5 2xl:space-y-1 w-full",children:[t.jsx(se,{label:e.total_de_acoes,value:i.length}),t.jsx(se,{label:e.tempo_estimado,value:`~${c}`})]})]})},dr=50,ur=()=>{const e=b(u=>u.language),s=j(u=>u.campaigns.find(x=>x.id===u.currentCampaignId)),n=D(u=>u.contacts),{setCurrentStep:a}=O.getState(),{ref:r,onMouseDown:i}=gn(),{selectedContacts:o}=s,l=o.slice(0,dr),m=Math.max(0,o.length-l.length),{breakpoint:d}=Y(),g=d==="2xl"?"sm":"xs",p=!Xt(u=>u.session).is_premium;return t.jsxs("div",{className:"h-full flex flex-col p-3 2xl:p-4 border border-[var(--sidebar-line-color)] border-solid rounded-md",children:[t.jsxs("div",{className:"flex items-center gap-1 2xl:gap-2 mb-2 2xl:mb-4",children:[t.jsx(nn,{className:"text-base 2xl:text-2xl"}),t.jsx("h2",{className:"text-sm 2xl:text-base font-medium capitalize",children:e.destinatarios}),t.jsx(fn,{onClick:()=>a("contatos")})]}),t.jsxs("div",{className:"mb-2 2xl:mb-4",children:[t.jsxs("div",{className:"text-xs 2xl:text-sm font-medium",children:[o.length," ",e.contatos_selecionados]}),t.jsxs("div",{className:"text-xs",children:[e.de_um_total_de," ",n.length," ",e.contatos]})]}),t.jsxs("div",{ref:r,className:`grid 2xl:grid-cols-4 xl:grid-cols-3 lg:grid-cols-2 grid-cols-1 auto-rows-[2rem] 2xl:auto-rows-[2.8rem] 
        gap-1 2xl:gap-2 mb-2 2xl:mb-4 pb-0.5 2xl:pb-1 pr-1 overflow-y-auto flex-1 min-h-0 select-none`,onMouseDown:i,style:{WebkitOverflowScrolling:"touch"},children:[l.map((u,x)=>t.jsxs("div",{className:S("flex items-center justify-start gap-1 2xl:gap-2 h-full flex-none p-0.5 2xl:p-1","bg-[var(--contact-card-bg)] border border-[var(--sidebar-line-color)] border-solid rounded-md",p&&x>=5&&"opacity-40"),title:u.name,children:[t.jsx(we,{contact:u,size:g}),t.jsx("span",{className:"text-xs 2xl:text-sm font-semibold truncate flex-1",children:u.name})]},u.id)),m>0&&t.jsx("div",{className:`flex items-center justify-center gap-1 2xl:gap-2 h-full flex-none 
            p-1.5 2xl:p-2 border border-[var(--sidebar-line-color)] border-dashed rounded-md`,children:t.jsxs("span",{className:"text-xs 2xl:text-sm text-center font-semibold truncate flex-1",children:["+",m]})},"extra-count")]})]})},gr=()=>{const e=b(a=>a.language),s=j(a=>a.campaigns.find(r=>r.id===a.currentCampaignId)),{actions:n}=oe(s.id);return t.jsxs("div",{className:"col-span-1 flex flex-col p-3 2xl:p-4 bg-amber-100 border border-yellow-300 border-solid rounded-md",children:[t.jsxs("div",{className:"flex gap-1 2xl:gap-2 items-center",children:[t.jsx(mt,{className:"text-yellow-600 text-base 2xl:text-2xl"}),t.jsx("h2",{className:"text-sm 2xl:text-base font-medium text-yellow-600",children:e.importante})]}),t.jsx("p",{className:"text-xs 2xl:text-sm text-yellow-600 font-medium",children:e.warning_card_desc}),t.jsx("button",{className:`w-fit bg-white text-black text-xs 2xl:text-sm p-1 2xl:p-1.5 border border-solid border-gray-200
        rounded mt-1.5 2xl:mt-2 hover:bg-gray-100 hover:scale-[1.02] active:scale-[0.98] transition-all`,onClick:n.sendTest,children:e.executar_teste_para_mim})]})},mr=()=>{const e=b(r=>r.language),s=Xt(r=>r.session),n=Nn(),a=!s.is_premium;return t.jsxs("div",{className:"col-span-1 flex flex-col p-3 2xl:p-4 bg-blue-100 border border-blue-300 border-solid rounded-md",children:[t.jsxs("div",{className:"flex gap-1 2xl:gap-2 items-center",children:[t.jsx(mt,{className:"text-blue-600 text-base 2xl:text-2xl"}),t.jsx("h2",{className:"text-sm 2xl:text-base font-medium text-blue-600",children:a?e.versao_gratuita:e.versao_premium})]}),a?t.jsx("p",{className:"text-xs 2xl:text-sm text-blue-600 font-medium",children:e.warning_user_free_desc}):t.jsx("p",{className:"text-xs 2xl:text-sm text-blue-600 font-medium",children:e.warning_user_premium_desc}),a&&t.jsx("a",{href:n,target:"_blank",rel:"noopener noreferrer",className:`w-fit bg-white text-black text-xs 2xl:text-sm p-1 2xl:p-1.5 border border-solid border-gray-200
          rounded mt-1.5 2xl:mt-2 hover:bg-gray-100 hover:scale-[1.02] active:scale-[0.98] transition-all`,children:e.atualizar_para_premium})]})},pr=()=>{const e=b(i=>i.language),n=j(i=>i.campaigns.find(o=>o.id===i.currentCampaignId)).status,a=n===I.SENDING||n===I.PAUSED,r=S("grid-rows-[clamp(360px,40dvh,497px)] auto-rows-[clamp(360px,40dvh,497px)]","lg:grid-rows-[clamp(250px,40dvh,497px)] lg:auto-rows-[clamp(250px,40dvh,497px)]","xl:grid-rows-[clamp(360px,44dvh,497px)] xl:auto-rows-[clamp(360px,44dvh,497px)]","2xl:grid-rows-[clamp(360px,45dvh,497px)] 2xl:auto-rows-[clamp(360px,45dvh,497px)]");return t.jsxs(t.Fragment,{children:[t.jsx(Ve,{title:a?e.enviando_acoes:e.revise_confirme,subtitle:a?e.acoes_estao_sendo_executadas:e.verifique_os_detalhes}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-2 2xl:gap-4",children:[t.jsxs("div",{className:S("col-span-full grid grid-cols-1 lg:grid-cols-2 gap-2 2xl:gap-4",r),children:[t.jsx(cr,{}),t.jsx(ur,{})]}),t.jsxs("div",{className:S("col-span-full grid grid-cols-1 lg:grid-cols-2 gap-2 2xl:gap-4"),children:[t.jsx(gr,{}),t.jsx(mr,{})]})]})]})},xr=()=>{const e=O(a=>a.currentStep),s={contatos:nr,acoes:_a,revisao:pr,envio:or,resultados:ar},n=()=>{const a=s[e];return t.jsx(a,{})};return t.jsx("div",{className:"flex-1",children:n()})},Ht=({onClick:e,disabled:s,children:n,variant:a="primary",className:r})=>t.jsx("button",{onClick:e,disabled:s,className:S("p-1.5 2xl:p-2.5 rounded-md transition-colors disabled:opacity-70 disabled:cursor-not-allowed","flex items-center justify-center gap-1 2xl:gap-1.5 text-xs 2xl:text-base font-semibold",a==="primary"?"bg-black text-white dark:bg-white dark:text-black":"border border-solid",r),children:n}),fr={contatos:e=>(e.selectedContacts?.length||0)===0?{isValid:!1,message:b.getState().language.validate_selecione_destinatario}:{isValid:!0},acoes:e=>(e.actions?.length||0)===0?{isValid:!1,message:b.getState().language.validate_adicione_acao}:{isValid:!0},revisao:()=>({isValid:!0}),envio:()=>({isValid:!0}),resultados:()=>({isValid:!0})};function hr(){const{campaigns:e,currentCampaignId:s}=j.getState(),n=e.find(r=>r.id===s);if(!n)return{isValid:!1,message:b.getState().language.validate_nenhuma_campanha};const a=O.getState().currentStep;return fr[a](n)}const vr=()=>{const e=b(o=>o.language),{close:s}=B.getState(),{close:n}=tt.getState(),{setCurrentStep:a}=O.getState(),r=()=>{a("envio"),s()},i=()=>{s(),n()};return t.jsxs("div",{className:"flex flex-col gap-y-6 max-w-lg",children:[t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl font-semibold text-[var(--primary-strong)] mb-2",children:e.envio_iniciado_sucesso}),t.jsx("p",{className:"text-[var(--light-text-color)] text-sm leading-relaxed",children:e.description_return_whats})]}),t.jsxs("div",{className:"flex flex-col sm:flex-row-reverse gap-3 pt-2",children:[t.jsx("button",{onClick:r,className:S("flex-1 flex items-center justify-center gap-x-2 px-6 py-3 rounded-lg","font-medium transition-all duration-200","bg-gray-100 text-gray-900 hover:bg-gray-200","focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-gray-400"),children:e.acompanhar_envio}),t.jsxs("button",{onClick:i,className:S("flex-1 flex items-center justify-center gap-x-2.5 px-6 py-3 rounded-lg","font-medium transition-all duration-200","bg-[#25D366] text-white hover:bg-[#128C7E]","focus:outline-none focus:ring-1 focus:ring-offset-1 focus:ring-[#25D366]"),children:[t.jsx(Jt,{className:"w-5 h-5"}),e.voltar_ao_whats]})]})]})},br=()=>{const e=b(c=>c.language),s=j(c=>c.campaigns.find(p=>p.id===c.currentCampaignId));if(!s)return null;const[n,a]=R.useState(!1),[r,i]=R.useState(!1),{close:o}=B.getState(),{actions:l}=oe(s.id),m=async()=>{if(!n){i(!0);return}o(),l.sendFull(),B.getState().open(t.jsx(vr,{}),!1,void 0,!0)},d=()=>{o()},g=()=>{a(!n),r&&i(!1)};return t.jsxs("div",{className:"flex max-w-lg flex-col gap-y-5 font-sans",children:[t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("h2",{className:"text-2xl font-medium text-[var(--primary-strong)]",children:e.termos_de_uso}),t.jsx("button",{onClick:d,className:"text-2xl text-gray-500 hover:text-gray-800 transition-colors","aria-label":"Fechar modal",children:"×"})]}),t.jsxs("div",{className:"border-t border-solid border-[#E4E4E4] pt-4",children:[t.jsx("h3",{className:"font-semibold mb-2 text-[var(--primary-strong)]",children:e.termos_de_uso}),t.jsx("p",{className:"text-[var(--light-text-color)] leading-relaxed",children:e.warning_spam_desc})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"flex items-center gap-x-2 cursor-pointer text-gray-700",children:[t.jsx("input",{type:"checkbox",checked:n,onChange:g,className:"checkbox checkbox-sm checkbox-success","aria-describedby":"error-message"}),t.jsx("span",{className:"text-[var(--primary-strong)] font-semibold",children:e.eu_entendo_e_aceito})]}),r&&t.jsx("p",{id:"error-message",className:"text-red-600 text-sm mt-2",role:"alert",children:e.voce_precisa_aceitar_para_continuar})]}),t.jsxs("div",{className:"flex justify-end items-center gap-x-3 border-t border-[#E4E4E4] pt-4",children:[t.jsx("button",{onClick:d,className:`px-6 py-3 rounded-md bg-[#1d1d1d] text-white font-semibold
          transition-colors duration-150 hover:bg-[#141414]
          focus:outline-none focus:ring-2 focus:ring-gray-500`,children:e.cancelar}),t.jsx("button",{onClick:m,disabled:!n,className:S("px-8 py-3 rounded-md font-semibold transition-colors duration-150","focus:outline-none focus:ring-2 focus:ring-offset-2",n?"bg-[var(--primaria)] text-white hover:bg-[color-mix(in_srgb,var(--primaria)_85%,black_15%)] focus:ring-[var(--primaria)]":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:e.enviar})]})]})},_r=()=>{const e=b(d=>d.language),s=j(d=>d.campaigns.find(g=>g.id===d.currentCampaignId));if(!s)return{config:{},getConfig:()=>{}};const n=s.status,a=()=>n===I.DRAFT?e.step_config_executar_acoes:n===I.SENDING?e.step_config_enviando:e.step_config_executar_acoes,{setCurrentStep:r}=O.getState(),{clearExecution:i}=Yt.getState(),o=()=>()=>{s&&(i(s.id),r("acoes"))},l={contatos:{nextLabel:e.step_config_proximo,nextIcon:t.jsx(Be,{size:18}),previousLabel:e.step_config_voltar,previousIcon:t.jsx(Se,{size:18})},acoes:{nextLabel:e.step_config_proximo,nextIcon:t.jsx(Be,{size:18}),previousLabel:e.step_config_voltar,previousIcon:t.jsx(Se,{size:18})},revisao:{nextLabel:a(),nextIcon:t.jsx(Ns,{size:18}),previousLabel:e.step_config_voltar,previousIcon:t.jsx(Se,{size:18}),nextPersonalizedAction:()=>B.getState().open(t.jsx(br,{}),!1,void 0,!0)},envio:{nextLabel:e.step_config_ver_resultados,previousLabel:e.step_config_voltar,previousIcon:t.jsx(Se,{size:18}),nextIcon:t.jsx(Be,{size:18})},resultados:{nextLabel:e.step_config_nova_sequencia,previousLabel:e.step_config_retornar_gerenciador,prevPersonalizedAction:()=>le.getState().setActivePage("campaigns"),nextPersonalizedAction:o()}};return{config:l,getConfig:d=>l[d]}},Cr=()=>{const s=j(f=>f.campaigns.find(v=>v.id===f.currentCampaignId)).status,{currentStep:n,steps:a,setCurrentStep:r}=O(vt(f=>({currentStep:f.currentStep,steps:f.steps,setCurrentStep:f.setCurrentStep}))),i=a.findIndex(f=>f.key===n),o=i===0,l=i===a.length-1,m=s===I.SENDING||s===I.PAUSED,{getConfig:d}=_r(),g=d(n),c=m?!0:o&&!g.prevPersonalizedAction,p=m?!0:l&&!g.nextPersonalizedAction,u=f=>{if(f==="next"&&g.nextPersonalizedAction){g.nextPersonalizedAction();return}if(f==="previous"&&g.prevPersonalizedAction){g.prevPersonalizedAction();return}x(f)},x=f=>{if(f==="next"&&!l){const v=hr();if(!v.isValid){A({type:"Error",message:v.message||"Erro ao validar etapa."});return}r(a[i+1].key)}else f==="previous"&&!o&&r(a[i-1].key)};return t.jsxs("div",{className:"flex justify-between my-4 2xl:my-6 2xl:gap-2 gap-1",children:[t.jsxs(Ht,{className:S(n==="resultados"&&"w-full"),onClick:()=>u("previous"),disabled:c,variant:"secondary",children:[g.previousIcon,g.previousLabel]}),t.jsxs(Ht,{className:S(n==="resultados"&&"w-full"),onClick:()=>u("next"),disabled:p,variant:"primary",children:[g.nextLabel,g.nextIcon]})]})},jr=()=>{const e=b(i=>i.language),s=ra(),n=O(i=>i.currentStep),{setActivePage:a}=le.getState(),r=De(i=>i.isHidden);return R.useEffect(()=>{s&&rt(s.id)},[s?.id]),s?t.jsxs(t.Fragment,{children:[t.jsx(ca,{}),t.jsxs("div",{className:S("flex flex-col",n==="resultados"?"2xl:px-80 px-60":"2xl:px-36 px-24 justify-between flex-1",r?"pt-6":"pt-0"),children:[t.jsx(xr,{}),t.jsx(Cr,{})]})]}):t.jsx("div",{className:"flex-1 flex flex-col items-center justify-center bg-[var(--eem-bg-primary)]",children:t.jsxs("div",{className:"flex flex-col items-center justify-center text-center gap-1",children:[t.jsx("div",{className:"p-2 rounded-md border border-solid border-[var(--eem-border-primary)]",children:t.jsx(Rs,{className:"size-7"})}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-2xl leading-snug font-semibold",children:e.messaging_nenhuma_campanha}),t.jsx("p",{className:"text-base",children:e.messaging_selecione_ou_crie})]}),t.jsx("button",{className:`py-1 px-2 bg-[var(--primaria)] font-semibold rounded-md text-base text-white 
            hover:brightness-95 hover:scale-105 active:scale-95 transition`,onClick:()=>a("campaigns"),children:e.messaging_ir_gerenciador})]})})},yr=({campaign:e})=>{const s=b(i=>i.language),n=j.getState().removeCampaign;function a(i){return{[I.SENDING]:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",[I.SENT]:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",[I.FAILED]:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",[I.DRAFT]:"bg-gray-100 text-gray-800 dark:bg-gray-700/30 dark:text-gray-300",[I.PAUSED]:"bg-indigo-100 text-indigo-800 dark:bg-indigo-900/20 dark:text-indigo-400"}[i]??"bg-gray-100 text-gray-800 dark:bg-gray-700/50 dark:text-gray-300"}const r=i=>{i.stopPropagation(),rn({icon:t.jsx(Et,{size:20,className:"text-red-600 dark:text-red-400"}),content:s.card_confirmar_excluir,confirmText:s.card_excluir,submit:()=>n(e.id)})};return t.jsxs("div",{role:"button",className:`rounded-xl p-4 flex flex-col justify-between cursor-pointer shadow-sm hover:shadow-md bg-[var(--contact-card-bg)] 
      border border-solid border-[var(--eem-border-primary)] hover:border-[var(--primaria)] transition-transform transform-gpu hover:-translate-y-0.5`,onClick:()=>rt(e.id),title:s.card_clique_abrir,children:[t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-start justify-between gap-2",children:[t.jsx("h3",{className:"font-semibold text-sm line-clamp-2",children:e.name}),t.jsx("div",{className:`badge text-[13px] ${a(e.status)}`,children:String(e.status)})]}),t.jsxs("p",{className:"text-xs text-[var(--light-text-color)]",children:[s.card_criada," ",e.createdAt.toLocaleString(void 0,{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]}),t.jsxs("p",{className:"text-xs text-[var(--light-text-color)]",children:[s.card_atualizada," ",e.updatedAt.toLocaleString(void 0,{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})]}),t.jsxs("div",{className:"mt-3 flex items-center gap-4 text-sm text-[var(--light-text-color)]",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Js,{size:14}),t.jsx("span",{className:"text-sm",children:e.selectedContacts.length})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Qs,{size:14}),t.jsx("span",{className:"text-sm",children:e.actions.length})]})]})]}),t.jsxs("div",{className:"flex items-center justify-between gap-2 mt-4",children:[t.jsxs("button",{onClick:i=>{i.stopPropagation(),rt(e.id)},title:s.card_abrir_campanha,className:"flex items-center gap-2 px-3 py-1.5 text-sm font-medium rounded-md border border-solid border-[var(--light-text-color)]/20 hover:bg-[var(--light-text-color)]/10 transition-all transform-gpu hover:-translate-y-0.5",children:[t.jsx(Zs,{size:14}),t.jsx("span",{className:"hidden sm:inline",children:s.card_abrir})]}),t.jsx("button",{onClick:r,className:"flex items-center gap-2 p-2 text-base font-medium text-red-600 dark:text-red-400 border border-red-600/20 dark:border-red-400/20 rounded-md hover:bg-red-50 dark:hover:bg-red-900/10 transition-all transform-gpu hover:-translate-y-0.5",title:s.card_deletar_campanha,children:t.jsx(Et,{size:16})})]})]})},wr=()=>{const e=b(m=>m.language),[s,n]=K.useState(!1),a=j(m=>m.addCampaign),r=K.useRef(null),i=m=>{m.preventDefault();const g=new FormData(m.currentTarget).get("campaignName");if(!g?.trim()){A({type:"Error",message:e.create_campaign_nome_vazio});return}const{newCampaign:c}=un({name:g.trim()});a(c),A({type:"Success",message:e.create_campaign_criada_sucesso}),r.current&&r.current.reset(),n(!1)},o=()=>{n(!1),r.current&&r.current.reset()},l=()=>S("h-8 px-2 rounded-md bg-[var(--primaria)] text-white hover:bg-[var(--primaria)]/90","transition-all duration-150 hover:scale-[1.02] active:scale-95 active:opacity-80","flex items-center justify-center");return t.jsx(t.Fragment,{children:s?t.jsxs("form",{className:"flex items-center gap-2",onSubmit:i,ref:r,children:[t.jsx("input",{type:"text",name:"campaignName",className:`px-3 h-8 rounded-md border border-solid border-[var(--eem-border-primary)]
            text-sm placeholder:text-sm focus:outline-none focus:ring-2 focus:ring-[var(--primaria)]/50`,placeholder:e.create_campaign_nome_placeholder,autoFocus:!0}),t.jsx("button",{type:"submit",title:e.create_campaign_criar_titulo,className:l(),children:t.jsx(cn,{size:16,className:"text-white"})}),t.jsx("button",{type:"button",title:e.create_campaign_cancelar_titulo,onClick:o,className:S(l(),"bg-gray-500 hover:bg-gray-600"),children:t.jsx(dn,{size:16,className:"text-white"})})]}):t.jsx("button",{type:"button",className:"mt-auto py-2 px-5 bg-[var(--primaria)] text-[var(--letra)] rounded-lg font-medium hover:opacity-90 transition-opacity",onClick:()=>n(!0),children:e.create_campaign_nova_campanha})})},Sr=()=>{const e=b(a=>a.language),{tutorial_envio_em_massa:s}=Kt(vt(a=>({tutorial_envio_em_massa:a.getUrl("tutoriais","envio_em_massa")}))),n=j(a=>a.campaigns).slice().sort((a,r)=>(r.updatedAt??r.createdAt).getTime()-(a.updatedAt??a.createdAt).getTime());return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between flex-shrink-0 border-b border-solid border-[var(--eem-border-primary)] p-6",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("h2",{className:"text-lg 2xl:text-xl font-bold leading-none",children:e.campaign_feature_titulo}),t.jsx("div",{className:"badge badge-xs 2xl:badge-sm bg-[var(--primaria)] text-white",children:n.length})]}),t.jsxs("div",{className:"flex gap-4 items-center",children:[t.jsx("div",{className:"-mt-3",children:s.active&&t.jsx(Fs,{funcao:()=>window.open(s.link,"_blank")})}),t.jsx(wr,{})]})]}),t.jsx("div",{className:"flex-1 min-h-0 p-6",children:n.length===0?t.jsx("div",{className:"flex items-center justify-center h-full",children:t.jsx("p",{className:"2xl:text-base text-sm text-gray-500",children:e.campaign_feature_nenhuma})}):t.jsx("div",{className:"h-full overflow-y-auto p-1",children:t.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.map(a=>t.jsx(yr,{campaign:a},a.id))})})})]})},We=({icon:e,value:s,label:n,description:a,iconBgColor:r})=>t.jsxs("div",{className:"bg-[var(--result-card-bg-color)] flex-1 flex flex-col items-center justify-center rounded-md gap-1 p-3 2xl:p-6 min-w-[160px] text-center",children:[t.jsx("div",{className:`size-8 2xl:size-12 ${r} rounded-full flex items-center justify-center mb-0.5`,children:e}),t.jsx("h2",{className:"text-[20px] 2xl:text-[32px] text-[var(--primaria)] font-semibold leading-tight",children:s}),t.jsx("p",{className:"text-[var(--light-text-color)] font-bold text-[10px] 2xl:text-sm text-center",children:n}),t.jsx("p",{className:"text-[var(--light-text-color)] text-[10px] 2xl:text-sm",children:a})]});function J(e,s){return typeof e=="function"?e(s):e}function T(e,s){return n=>{s.setState(a=>({...a,[e]:J(n,a[e])}))}}function Ge(e){return e instanceof Function}function Nr(e){return Array.isArray(e)&&e.every(s=>typeof s=="number")}function Rr(e,s){const n=[],a=r=>{r.forEach(i=>{n.push(i);const o=s(i);o!=null&&o.length&&a(o)})};return a(e),n}function y(e,s,n){let a=[],r;return i=>{let o;n.key&&n.debug&&(o=Date.now());const l=e(i);if(!(l.length!==a.length||l.some((g,c)=>a[c]!==g)))return r;a=l;let d;if(n.key&&n.debug&&(d=Date.now()),r=s(...l),n==null||n.onChange==null||n.onChange(r),n.key&&n.debug&&n!=null&&n.debug()){const g=Math.round((Date.now()-o)*100)/100,c=Math.round((Date.now()-d)*100)/100,p=c/16,u=(x,f)=>{for(x=String(x);x.length<f;)x=" "+x;return x};console.info(`%c⏱ ${u(c,5)} /${u(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*p,120))}deg 100% 31%);`,n?.key)}return r}}function w(e,s,n,a){return{debug:()=>{var r;return(r=e?.debugAll)!=null?r:e[s]},key:!1,onChange:a}}function Fr(e,s,n,a){const r=()=>{var o;return(o=i.getValue())!=null?o:e.options.renderFallbackValue},i={id:`${s.id}_${n.id}`,row:s,column:n,getValue:()=>s.getValue(a),renderValue:r,getContext:y(()=>[e,n,s,i],(o,l,m,d)=>({table:o,column:l,row:m,cell:d,getValue:d.getValue,renderValue:d.renderValue}),w(e.options,"debugCells"))};return e._features.forEach(o=>{o.createCell==null||o.createCell(i,n,s,e)},{}),i}function Pr(e,s,n,a){var r,i;const l={...e._getDefaultColumnDef(),...s},m=l.accessorKey;let d=(r=(i=l.id)!=null?i:m?typeof String.prototype.replaceAll=="function"?m.replaceAll(".","_"):m.replace(/\./g,"_"):void 0)!=null?r:typeof l.header=="string"?l.header:void 0,g;if(l.accessorFn?g=l.accessorFn:m&&(m.includes(".")?g=p=>{let u=p;for(const f of m.split(".")){var x;u=(x=u)==null?void 0:x[f]}return u}:g=p=>p[l.accessorKey]),!d)throw new Error;let c={id:`${String(d)}`,accessorFn:g,parent:a,depth:n,columnDef:l,columns:[],getFlatColumns:y(()=>[!0],()=>{var p;return[c,...(p=c.columns)==null?void 0:p.flatMap(u=>u.getFlatColumns())]},w(e.options,"debugColumns")),getLeafColumns:y(()=>[e._getOrderColumnsFn()],p=>{var u;if((u=c.columns)!=null&&u.length){let x=c.columns.flatMap(f=>f.getLeafColumns());return p(x)}return[c]},w(e.options,"debugColumns"))};for(const p of e._features)p.createColumn==null||p.createColumn(c,e);return c}const $="debugHeaders";function Bt(e,s,n){var a;let i={id:(a=n.id)!=null?a:s.id,column:s,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],l=m=>{m.subHeaders&&m.subHeaders.length&&m.subHeaders.map(l),o.push(m)};return l(i),o},getContext:()=>({table:e,header:i,column:s})};return e._features.forEach(o=>{o.createHeader==null||o.createHeader(i,e)}),i}const kr={createTable:e=>{e.getHeaderGroups=y(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(s,n,a,r)=>{var i,o;const l=(i=a?.map(c=>n.find(p=>p.id===c)).filter(Boolean))!=null?i:[],m=(o=r?.map(c=>n.find(p=>p.id===c)).filter(Boolean))!=null?o:[],d=n.filter(c=>!(a!=null&&a.includes(c.id))&&!(r!=null&&r.includes(c.id)));return Fe(s,[...l,...d,...m],e)},w(e.options,$)),e.getCenterHeaderGroups=y(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(s,n,a,r)=>(n=n.filter(i=>!(a!=null&&a.includes(i.id))&&!(r!=null&&r.includes(i.id))),Fe(s,n,e,"center")),w(e.options,$)),e.getLeftHeaderGroups=y(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(s,n,a)=>{var r;const i=(r=a?.map(o=>n.find(l=>l.id===o)).filter(Boolean))!=null?r:[];return Fe(s,i,e,"left")},w(e.options,$)),e.getRightHeaderGroups=y(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(s,n,a)=>{var r;const i=(r=a?.map(o=>n.find(l=>l.id===o)).filter(Boolean))!=null?r:[];return Fe(s,i,e,"right")},w(e.options,$)),e.getFooterGroups=y(()=>[e.getHeaderGroups()],s=>[...s].reverse(),w(e.options,$)),e.getLeftFooterGroups=y(()=>[e.getLeftHeaderGroups()],s=>[...s].reverse(),w(e.options,$)),e.getCenterFooterGroups=y(()=>[e.getCenterHeaderGroups()],s=>[...s].reverse(),w(e.options,$)),e.getRightFooterGroups=y(()=>[e.getRightHeaderGroups()],s=>[...s].reverse(),w(e.options,$)),e.getFlatHeaders=y(()=>[e.getHeaderGroups()],s=>s.map(n=>n.headers).flat(),w(e.options,$)),e.getLeftFlatHeaders=y(()=>[e.getLeftHeaderGroups()],s=>s.map(n=>n.headers).flat(),w(e.options,$)),e.getCenterFlatHeaders=y(()=>[e.getCenterHeaderGroups()],s=>s.map(n=>n.headers).flat(),w(e.options,$)),e.getRightFlatHeaders=y(()=>[e.getRightHeaderGroups()],s=>s.map(n=>n.headers).flat(),w(e.options,$)),e.getCenterLeafHeaders=y(()=>[e.getCenterFlatHeaders()],s=>s.filter(n=>{var a;return!((a=n.subHeaders)!=null&&a.length)}),w(e.options,$)),e.getLeftLeafHeaders=y(()=>[e.getLeftFlatHeaders()],s=>s.filter(n=>{var a;return!((a=n.subHeaders)!=null&&a.length)}),w(e.options,$)),e.getRightLeafHeaders=y(()=>[e.getRightFlatHeaders()],s=>s.filter(n=>{var a;return!((a=n.subHeaders)!=null&&a.length)}),w(e.options,$)),e.getLeafHeaders=y(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(s,n,a)=>{var r,i,o,l,m,d;return[...(r=(i=s[0])==null?void 0:i.headers)!=null?r:[],...(o=(l=n[0])==null?void 0:l.headers)!=null?o:[],...(m=(d=a[0])==null?void 0:d.headers)!=null?m:[]].map(g=>g.getLeafHeaders()).flat()},w(e.options,$))}};function Fe(e,s,n,a){var r,i;let o=0;const l=function(p,u){u===void 0&&(u=1),o=Math.max(o,u),p.filter(x=>x.getIsVisible()).forEach(x=>{var f;(f=x.columns)!=null&&f.length&&l(x.columns,u+1)},0)};l(e);let m=[];const d=(p,u)=>{const x={depth:u,id:[a,`${u}`].filter(Boolean).join("_"),headers:[]},f=[];p.forEach(v=>{const h=[...f].reverse()[0],_=v.column.depth===x.depth;let N,k=!1;if(_&&v.column.parent?N=v.column.parent:(N=v.column,k=!0),h&&h?.column===N)h.subHeaders.push(v);else{const P=Bt(n,N,{id:[a,u,N.id,v?.id].filter(Boolean).join("_"),isPlaceholder:k,placeholderId:k?`${f.filter(C=>C.column===N).length}`:void 0,depth:u,index:f.length});P.subHeaders.push(v),f.push(P)}x.headers.push(v),v.headerGroup=x}),m.push(x),u>0&&d(f,u-1)},g=s.map((p,u)=>Bt(n,p,{depth:o,index:u}));d(g,o-1),m.reverse();const c=p=>p.filter(x=>x.column.getIsVisible()).map(x=>{let f=0,v=0,h=[0];x.subHeaders&&x.subHeaders.length?(h=[],c(x.subHeaders).forEach(N=>{let{colSpan:k,rowSpan:P}=N;f+=k,h.push(P)})):f=1;const _=Math.min(...h);return v=v+_,x.colSpan=f,x.rowSpan=v,{colSpan:f,rowSpan:v}});return c((r=(i=m[0])==null?void 0:i.headers)!=null?r:[]),m}const Ir=(e,s,n,a,r,i,o)=>{let l={id:s,index:a,original:n,depth:r,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:m=>{if(l._valuesCache.hasOwnProperty(m))return l._valuesCache[m];const d=e.getColumn(m);if(d!=null&&d.accessorFn)return l._valuesCache[m]=d.accessorFn(l.original,a),l._valuesCache[m]},getUniqueValues:m=>{if(l._uniqueValuesCache.hasOwnProperty(m))return l._uniqueValuesCache[m];const d=e.getColumn(m);if(d!=null&&d.accessorFn)return d.columnDef.getUniqueValues?(l._uniqueValuesCache[m]=d.columnDef.getUniqueValues(l.original,a),l._uniqueValuesCache[m]):(l._uniqueValuesCache[m]=[l.getValue(m)],l._uniqueValuesCache[m])},renderValue:m=>{var d;return(d=l.getValue(m))!=null?d:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>Rr(l.subRows,m=>m.subRows),getParentRow:()=>l.parentId?e.getRow(l.parentId,!0):void 0,getParentRows:()=>{let m=[],d=l;for(;;){const g=d.getParentRow();if(!g)break;m.push(g),d=g}return m.reverse()},getAllCells:y(()=>[e.getAllLeafColumns()],m=>m.map(d=>Fr(e,l,d,d.id)),w(e.options,"debugRows")),_getAllCellsByColumnId:y(()=>[l.getAllCells()],m=>m.reduce((d,g)=>(d[g.column.id]=g,d),{}),w(e.options,"debugRows"))};for(let m=0;m<e._features.length;m++){const d=e._features[m];d==null||d.createRow==null||d.createRow(l,e)}return l},$r={createColumn:(e,s)=>{e._getFacetedRowModel=s.options.getFacetedRowModel&&s.options.getFacetedRowModel(s,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():s.getPreFilteredRowModel(),e._getFacetedUniqueValues=s.options.getFacetedUniqueValues&&s.options.getFacetedUniqueValues(s,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=s.options.getFacetedMinMaxValues&&s.options.getFacetedMinMaxValues(s,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},hn=(e,s,n)=>{var a,r;const i=n==null||(a=n.toString())==null?void 0:a.toLowerCase();return!!(!((r=e.getValue(s))==null||(r=r.toString())==null||(r=r.toLowerCase())==null)&&r.includes(i))};hn.autoRemove=e=>G(e);const vn=(e,s,n)=>{var a;return!!(!((a=e.getValue(s))==null||(a=a.toString())==null)&&a.includes(n))};vn.autoRemove=e=>G(e);const bn=(e,s,n)=>{var a;return((a=e.getValue(s))==null||(a=a.toString())==null?void 0:a.toLowerCase())===n?.toLowerCase()};bn.autoRemove=e=>G(e);const _n=(e,s,n)=>{var a;return(a=e.getValue(s))==null?void 0:a.includes(n)};_n.autoRemove=e=>G(e);const Cn=(e,s,n)=>!n.some(a=>{var r;return!((r=e.getValue(s))!=null&&r.includes(a))});Cn.autoRemove=e=>G(e)||!(e!=null&&e.length);const jn=(e,s,n)=>n.some(a=>{var r;return(r=e.getValue(s))==null?void 0:r.includes(a)});jn.autoRemove=e=>G(e)||!(e!=null&&e.length);const yn=(e,s,n)=>e.getValue(s)===n;yn.autoRemove=e=>G(e);const wn=(e,s,n)=>e.getValue(s)==n;wn.autoRemove=e=>G(e);const yt=(e,s,n)=>{let[a,r]=n;const i=e.getValue(s);return i>=a&&i<=r};yt.resolveFilterValue=e=>{let[s,n]=e,a=typeof s!="number"?parseFloat(s):s,r=typeof n!="number"?parseFloat(n):n,i=s===null||Number.isNaN(a)?-1/0:a,o=n===null||Number.isNaN(r)?1/0:r;if(i>o){const l=i;i=o,o=l}return[i,o]};yt.autoRemove=e=>G(e)||G(e[0])&&G(e[1]);const U={includesString:hn,includesStringSensitive:vn,equalsString:bn,arrIncludes:_n,arrIncludesAll:Cn,arrIncludesSome:jn,equals:yn,weakEquals:wn,inNumberRange:yt};function G(e){return e==null||e===""}const Mr={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:T("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,s)=>{e.getAutoFilterFn=()=>{const n=s.getCoreRowModel().flatRows[0],a=n?.getValue(e.id);return typeof a=="string"?U.includesString:typeof a=="number"?U.inNumberRange:typeof a=="boolean"||a!==null&&typeof a=="object"?U.equals:Array.isArray(a)?U.arrIncludes:U.weakEquals},e.getFilterFn=()=>{var n,a;return Ge(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(a=s.options.filterFns)==null?void 0:a[e.columnDef.filterFn])!=null?n:U[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,a,r;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((a=s.options.enableColumnFilters)!=null?a:!0)&&((r=s.options.enableFilters)!=null?r:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=s.getState().columnFilters)==null||(n=n.find(a=>a.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,a;return(n=(a=s.getState().columnFilters)==null?void 0:a.findIndex(r=>r.id===e.id))!=null?n:-1},e.setFilterValue=n=>{s.setColumnFilters(a=>{const r=e.getFilterFn(),i=a?.find(g=>g.id===e.id),o=J(n,i?i.value:void 0);if(qt(r,o,e)){var l;return(l=a?.filter(g=>g.id!==e.id))!=null?l:[]}const m={id:e.id,value:o};if(i){var d;return(d=a?.map(g=>g.id===e.id?m:g))!=null?d:[]}return a!=null&&a.length?[...a,m]:[m]})}},createRow:(e,s)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=s=>{const n=e.getAllLeafColumns(),a=r=>{var i;return(i=J(s,r))==null?void 0:i.filter(o=>{const l=n.find(m=>m.id===o.id);if(l){const m=l.getFilterFn();if(qt(m,o.value,l))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(a)},e.resetColumnFilters=s=>{var n,a;e.setColumnFilters(s?[]:(n=(a=e.initialState)==null?void 0:a.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function qt(e,s,n){return(e&&e.autoRemove?e.autoRemove(s,n):!1)||typeof s>"u"||typeof s=="string"&&!s}const Ar=(e,s,n)=>n.reduce((a,r)=>{const i=r.getValue(e);return a+(typeof i=="number"?i:0)},0),Dr=(e,s,n)=>{let a;return n.forEach(r=>{const i=r.getValue(e);i!=null&&(a>i||a===void 0&&i>=i)&&(a=i)}),a},zr=(e,s,n)=>{let a;return n.forEach(r=>{const i=r.getValue(e);i!=null&&(a<i||a===void 0&&i>=i)&&(a=i)}),a},Er=(e,s,n)=>{let a,r;return n.forEach(i=>{const o=i.getValue(e);o!=null&&(a===void 0?o>=o&&(a=r=o):(a>o&&(a=o),r<o&&(r=o)))}),[a,r]},Lr=(e,s)=>{let n=0,a=0;if(s.forEach(r=>{let i=r.getValue(e);i!=null&&(i=+i)>=i&&(++n,a+=i)}),n)return a/n},Tr=(e,s)=>{if(!s.length)return;const n=s.map(i=>i.getValue(e));if(!Nr(n))return;if(n.length===1)return n[0];const a=Math.floor(n.length/2),r=n.sort((i,o)=>i-o);return n.length%2!==0?r[a]:(r[a-1]+r[a])/2},Vr=(e,s)=>Array.from(new Set(s.map(n=>n.getValue(e))).values()),Gr=(e,s)=>new Set(s.map(n=>n.getValue(e))).size,Or=(e,s)=>s.length,Ke={sum:Ar,min:Dr,max:zr,extent:Er,mean:Lr,median:Tr,unique:Vr,uniqueCount:Gr,count:Or},Hr={getDefaultColumnDef:()=>({aggregatedCell:e=>{var s,n;return(s=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?s:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:T("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,s)=>{e.toggleGrouping=()=>{s.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(a=>a!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,a;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((a=s.options.enableGrouping)!=null?a:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=s.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=s.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=s.getCoreRowModel().flatRows[0],a=n?.getValue(e.id);if(typeof a=="number")return Ke.sum;if(Object.prototype.toString.call(a)==="[object Date]")return Ke.extent},e.getAggregationFn=()=>{var n,a;if(!e)throw new Error;return Ge(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(a=s.options.aggregationFns)==null?void 0:a[e.columnDef.aggregationFn])!=null?n:Ke[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=s=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(s),e.resetGrouping=s=>{var n,a;e.setGrouping(s?[]:(n=(a=e.initialState)==null?void 0:a.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,s)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const a=s.getColumn(n);return a!=null&&a.columnDef.getGroupingValue?(e._groupingValuesCache[n]=a.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,s,n,a)=>{e.getIsGrouped=()=>s.getIsGrouped()&&s.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&s.getIsGrouped(),e.getIsAggregated=()=>{var r;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((r=n.subRows)!=null&&r.length)}}};function Br(e,s,n){if(!(s!=null&&s.length)||!n)return e;const a=e.filter(i=>!s.includes(i.id));return n==="remove"?a:[...s.map(i=>e.find(o=>o.id===i)).filter(Boolean),...a]}const qr={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:T("columnOrder",e)}),createColumn:(e,s)=>{e.getIndex=y(n=>[be(s,n)],n=>n.findIndex(a=>a.id===e.id),w(s.options,"debugColumns")),e.getIsFirstColumn=n=>{var a;return((a=be(s,n)[0])==null?void 0:a.id)===e.id},e.getIsLastColumn=n=>{var a;const r=be(s,n);return((a=r[r.length-1])==null?void 0:a.id)===e.id}},createTable:e=>{e.setColumnOrder=s=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(s),e.resetColumnOrder=s=>{var n;e.setColumnOrder(s?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=y(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(s,n,a)=>r=>{let i=[];if(!(s!=null&&s.length))i=r;else{const o=[...s],l=[...r];for(;l.length&&o.length;){const m=o.shift(),d=l.findIndex(g=>g.id===m);d>-1&&i.push(l.splice(d,1)[0])}i=[...i,...l]}return Br(i,n,a)},w(e.options,"debugTable"))}},Xe=()=>({left:[],right:[]}),Ur={getInitialState:e=>({columnPinning:Xe(),...e}),getDefaultOptions:e=>({onColumnPinningChange:T("columnPinning",e)}),createColumn:(e,s)=>{e.pin=n=>{const a=e.getLeafColumns().map(r=>r.id).filter(Boolean);s.setColumnPinning(r=>{var i,o;if(n==="right"){var l,m;return{left:((l=r?.left)!=null?l:[]).filter(c=>!(a!=null&&a.includes(c))),right:[...((m=r?.right)!=null?m:[]).filter(c=>!(a!=null&&a.includes(c))),...a]}}if(n==="left"){var d,g;return{left:[...((d=r?.left)!=null?d:[]).filter(c=>!(a!=null&&a.includes(c))),...a],right:((g=r?.right)!=null?g:[]).filter(c=>!(a!=null&&a.includes(c)))}}return{left:((i=r?.left)!=null?i:[]).filter(c=>!(a!=null&&a.includes(c))),right:((o=r?.right)!=null?o:[]).filter(c=>!(a!=null&&a.includes(c)))}})},e.getCanPin=()=>e.getLeafColumns().some(a=>{var r,i,o;return((r=a.columnDef.enablePinning)!=null?r:!0)&&((i=(o=s.options.enableColumnPinning)!=null?o:s.options.enablePinning)!=null?i:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(l=>l.id),{left:a,right:r}=s.getState().columnPinning,i=n.some(l=>a?.includes(l)),o=n.some(l=>r?.includes(l));return i?"left":o?"right":!1},e.getPinnedIndex=()=>{var n,a;const r=e.getIsPinned();return r?(n=(a=s.getState().columnPinning)==null||(a=a[r])==null?void 0:a.indexOf(e.id))!=null?n:-1:0}},createRow:(e,s)=>{e.getCenterVisibleCells=y(()=>[e._getAllVisibleCells(),s.getState().columnPinning.left,s.getState().columnPinning.right],(n,a,r)=>{const i=[...a??[],...r??[]];return n.filter(o=>!i.includes(o.column.id))},w(s.options,"debugRows")),e.getLeftVisibleCells=y(()=>[e._getAllVisibleCells(),s.getState().columnPinning.left],(n,a)=>(a??[]).map(i=>n.find(o=>o.column.id===i)).filter(Boolean).map(i=>({...i,position:"left"})),w(s.options,"debugRows")),e.getRightVisibleCells=y(()=>[e._getAllVisibleCells(),s.getState().columnPinning.right],(n,a)=>(a??[]).map(i=>n.find(o=>o.column.id===i)).filter(Boolean).map(i=>({...i,position:"right"})),w(s.options,"debugRows"))},createTable:e=>{e.setColumnPinning=s=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(s),e.resetColumnPinning=s=>{var n,a;return e.setColumnPinning(s?Xe():(n=(a=e.initialState)==null?void 0:a.columnPinning)!=null?n:Xe())},e.getIsSomeColumnsPinned=s=>{var n;const a=e.getState().columnPinning;if(!s){var r,i;return!!((r=a.left)!=null&&r.length||(i=a.right)!=null&&i.length)}return!!((n=a[s])!=null&&n.length)},e.getLeftLeafColumns=y(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(s,n)=>(n??[]).map(a=>s.find(r=>r.id===a)).filter(Boolean),w(e.options,"debugColumns")),e.getRightLeafColumns=y(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(s,n)=>(n??[]).map(a=>s.find(r=>r.id===a)).filter(Boolean),w(e.options,"debugColumns")),e.getCenterLeafColumns=y(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(s,n,a)=>{const r=[...n??[],...a??[]];return s.filter(i=>!r.includes(i.id))},w(e.options,"debugColumns"))}};function Wr(e){return e||(typeof document<"u"?document:null)}const Pe={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Ye=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Kr={getDefaultColumnDef:()=>Pe,getInitialState:e=>({columnSizing:{},columnSizingInfo:Ye(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:T("columnSizing",e),onColumnSizingInfoChange:T("columnSizingInfo",e)}),createColumn:(e,s)=>{e.getSize=()=>{var n,a,r;const i=s.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:Pe.minSize,(a=i??e.columnDef.size)!=null?a:Pe.size),(r=e.columnDef.maxSize)!=null?r:Pe.maxSize)},e.getStart=y(n=>[n,be(s,n),s.getState().columnSizing],(n,a)=>a.slice(0,e.getIndex(n)).reduce((r,i)=>r+i.getSize(),0),w(s.options,"debugColumns")),e.getAfter=y(n=>[n,be(s,n),s.getState().columnSizing],(n,a)=>a.slice(e.getIndex(n)+1).reduce((r,i)=>r+i.getSize(),0),w(s.options,"debugColumns")),e.resetSize=()=>{s.setColumnSizing(n=>{let{[e.id]:a,...r}=n;return r})},e.getCanResize=()=>{var n,a;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((a=s.options.enableColumnResizing)!=null?a:!0)},e.getIsResizing=()=>s.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,s)=>{e.getSize=()=>{let n=0;const a=r=>{if(r.subHeaders.length)r.subHeaders.forEach(a);else{var i;n+=(i=r.column.getSize())!=null?i:0}};return a(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const a=s.getColumn(e.column.id),r=a?.getCanResize();return i=>{if(!a||!r||(i.persist==null||i.persist(),Je(i)&&i.touches&&i.touches.length>1))return;const o=e.getSize(),l=e?e.getLeafHeaders().map(h=>[h.column.id,h.column.getSize()]):[[a.id,a.getSize()]],m=Je(i)?Math.round(i.touches[0].clientX):i.clientX,d={},g=(h,_)=>{typeof _=="number"&&(s.setColumnSizingInfo(N=>{var k,P;const C=s.options.columnResizeDirection==="rtl"?-1:1,V=(_-((k=N?.startOffset)!=null?k:0))*C,H=Math.max(V/((P=N?.startSize)!=null?P:0),-.999999);return N.columnSizingStart.forEach(ce=>{let[Oe,Nt]=ce;d[Oe]=Math.round(Math.max(Nt+Nt*H,0)*100)/100}),{...N,deltaOffset:V,deltaPercentage:H}}),(s.options.columnResizeMode==="onChange"||h==="end")&&s.setColumnSizing(N=>({...N,...d})))},c=h=>g("move",h),p=h=>{g("end",h),s.setColumnSizingInfo(_=>({..._,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},u=Wr(n),x={moveHandler:h=>c(h.clientX),upHandler:h=>{u?.removeEventListener("mousemove",x.moveHandler),u?.removeEventListener("mouseup",x.upHandler),p(h.clientX)}},f={moveHandler:h=>(h.cancelable&&(h.preventDefault(),h.stopPropagation()),c(h.touches[0].clientX),!1),upHandler:h=>{var _;u?.removeEventListener("touchmove",f.moveHandler),u?.removeEventListener("touchend",f.upHandler),h.cancelable&&(h.preventDefault(),h.stopPropagation()),p((_=h.touches[0])==null?void 0:_.clientX)}},v=Xr()?{passive:!1}:!1;Je(i)?(u?.addEventListener("touchmove",f.moveHandler,v),u?.addEventListener("touchend",f.upHandler,v)):(u?.addEventListener("mousemove",x.moveHandler,v),u?.addEventListener("mouseup",x.upHandler,v)),s.setColumnSizingInfo(h=>({...h,startOffset:m,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:l,isResizingColumn:a.id}))}}},createTable:e=>{e.setColumnSizing=s=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(s),e.setColumnSizingInfo=s=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(s),e.resetColumnSizing=s=>{var n;e.setColumnSizing(s?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=s=>{var n;e.setColumnSizingInfo(s?Ye():(n=e.initialState.columnSizingInfo)!=null?n:Ye())},e.getTotalSize=()=>{var s,n;return(s=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((a,r)=>a+r.getSize(),0))!=null?s:0},e.getLeftTotalSize=()=>{var s,n;return(s=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((a,r)=>a+r.getSize(),0))!=null?s:0},e.getCenterTotalSize=()=>{var s,n;return(s=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((a,r)=>a+r.getSize(),0))!=null?s:0},e.getRightTotalSize=()=>{var s,n;return(s=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((a,r)=>a+r.getSize(),0))!=null?s:0}}};let ke=null;function Xr(){if(typeof ke=="boolean")return ke;let e=!1;try{const s={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,s),window.removeEventListener("test",n)}catch{e=!1}return ke=e,ke}function Je(e){return e.type==="touchstart"}const Yr={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:T("columnVisibility",e)}),createColumn:(e,s)=>{e.toggleVisibility=n=>{e.getCanHide()&&s.setColumnVisibility(a=>({...a,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,a;const r=e.columns;return(n=r.length?r.some(i=>i.getIsVisible()):(a=s.getState().columnVisibility)==null?void 0:a[e.id])!=null?n:!0},e.getCanHide=()=>{var n,a;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((a=s.options.enableHiding)!=null?a:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,s)=>{e._getAllVisibleCells=y(()=>[e.getAllCells(),s.getState().columnVisibility],n=>n.filter(a=>a.column.getIsVisible()),w(s.options,"debugRows")),e.getVisibleCells=y(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,a,r)=>[...n,...a,...r],w(s.options,"debugRows"))},createTable:e=>{const s=(n,a)=>y(()=>[a(),a().filter(r=>r.getIsVisible()).map(r=>r.id).join("_")],r=>r.filter(i=>i.getIsVisible==null?void 0:i.getIsVisible()),w(e.options,"debugColumns"));e.getVisibleFlatColumns=s("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=s("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=s("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=s("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=s("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var a;e.setColumnVisibility(n?{}:(a=e.initialState.columnVisibility)!=null?a:{})},e.toggleAllColumnsVisible=n=>{var a;n=(a=n)!=null?a:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((r,i)=>({...r,[i.id]:n||!(i.getCanHide!=null&&i.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var a;e.toggleAllColumnsVisible((a=n.target)==null?void 0:a.checked)}}};function be(e,s){return s?s==="center"?e.getCenterVisibleLeafColumns():s==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const Jr={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},Qr={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:T("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:s=>{var n;const a=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[s.id])==null?void 0:n.getValue();return typeof a=="string"||typeof a=="number"}}),createColumn:(e,s)=>{e.getCanGlobalFilter=()=>{var n,a,r,i;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((a=s.options.enableGlobalFilter)!=null?a:!0)&&((r=s.options.enableFilters)!=null?r:!0)&&((i=s.options.getColumnCanGlobalFilter==null?void 0:s.options.getColumnCanGlobalFilter(e))!=null?i:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>U.includesString,e.getGlobalFilterFn=()=>{var s,n;const{globalFilterFn:a}=e.options;return Ge(a)?a:a==="auto"?e.getGlobalAutoFilterFn():(s=(n=e.options.filterFns)==null?void 0:n[a])!=null?s:U[a]},e.setGlobalFilter=s=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(s)},e.resetGlobalFilter=s=>{e.setGlobalFilter(s?void 0:e.initialState.globalFilter)}}},Zr={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:T("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let s=!1,n=!1;e._autoResetExpanded=()=>{var a,r;if(!s){e._queue(()=>{s=!0});return}if((a=(r=e.options.autoResetAll)!=null?r:e.options.autoResetExpanded)!=null?a:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=a=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(a),e.toggleAllRowsExpanded=a=>{a??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=a=>{var r,i;e.setExpanded(a?{}:(r=(i=e.initialState)==null?void 0:i.expanded)!=null?r:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(a=>a.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>a=>{a.persist==null||a.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const a=e.getState().expanded;return a===!0||Object.values(a).some(Boolean)},e.getIsAllRowsExpanded=()=>{const a=e.getState().expanded;return typeof a=="boolean"?a===!0:!(!Object.keys(a).length||e.getRowModel().flatRows.some(r=>!r.getIsExpanded()))},e.getExpandedDepth=()=>{let a=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(i=>{const o=i.split(".");a=Math.max(a,o.length)}),a},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,s)=>{e.toggleExpanded=n=>{s.setExpanded(a=>{var r;const i=a===!0?!0:!!(a!=null&&a[e.id]);let o={};if(a===!0?Object.keys(s.getRowModel().rowsById).forEach(l=>{o[l]=!0}):o=a,n=(r=n)!=null?r:!i,!i&&n)return{...o,[e.id]:!0};if(i&&!n){const{[e.id]:l,...m}=o;return m}return a})},e.getIsExpanded=()=>{var n;const a=s.getState().expanded;return!!((n=s.options.getIsRowExpanded==null?void 0:s.options.getIsRowExpanded(e))!=null?n:a===!0||a?.[e.id])},e.getCanExpand=()=>{var n,a,r;return(n=s.options.getRowCanExpand==null?void 0:s.options.getRowCanExpand(e))!=null?n:((a=s.options.enableExpanding)!=null?a:!0)&&!!((r=e.subRows)!=null&&r.length)},e.getIsAllParentsExpanded=()=>{let n=!0,a=e;for(;n&&a.parentId;)a=s.getRow(a.parentId,!0),n=a.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},it=0,ot=10,Qe=()=>({pageIndex:it,pageSize:ot}),ei={getInitialState:e=>({...e,pagination:{...Qe(),...e?.pagination}}),getDefaultOptions:e=>({onPaginationChange:T("pagination",e)}),createTable:e=>{let s=!1,n=!1;e._autoResetPageIndex=()=>{var a,r;if(!s){e._queue(()=>{s=!0});return}if((a=(r=e.options.autoResetAll)!=null?r:e.options.autoResetPageIndex)!=null?a:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=a=>{const r=i=>J(a,i);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(r)},e.resetPagination=a=>{var r;e.setPagination(a?Qe():(r=e.initialState.pagination)!=null?r:Qe())},e.setPageIndex=a=>{e.setPagination(r=>{let i=J(a,r.pageIndex);const o=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return i=Math.max(0,Math.min(i,o)),{...r,pageIndex:i}})},e.resetPageIndex=a=>{var r,i;e.setPageIndex(a?it:(r=(i=e.initialState)==null||(i=i.pagination)==null?void 0:i.pageIndex)!=null?r:it)},e.resetPageSize=a=>{var r,i;e.setPageSize(a?ot:(r=(i=e.initialState)==null||(i=i.pagination)==null?void 0:i.pageSize)!=null?r:ot)},e.setPageSize=a=>{e.setPagination(r=>{const i=Math.max(1,J(a,r.pageSize)),o=r.pageSize*r.pageIndex,l=Math.floor(o/i);return{...r,pageIndex:l,pageSize:i}})},e.setPageCount=a=>e.setPagination(r=>{var i;let o=J(a,(i=e.options.pageCount)!=null?i:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...r,pageCount:o}}),e.getPageOptions=y(()=>[e.getPageCount()],a=>{let r=[];return a&&a>0&&(r=[...new Array(a)].fill(null).map((i,o)=>o)),r},w(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:a}=e.getState().pagination,r=e.getPageCount();return r===-1?!0:r===0?!1:a<r-1},e.previousPage=()=>e.setPageIndex(a=>a-1),e.nextPage=()=>e.setPageIndex(a=>a+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var a;return(a=e.options.pageCount)!=null?a:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var a;return(a=e.options.rowCount)!=null?a:e.getPrePaginationRowModel().rows.length}}},Ze=()=>({top:[],bottom:[]}),ti={getInitialState:e=>({rowPinning:Ze(),...e}),getDefaultOptions:e=>({onRowPinningChange:T("rowPinning",e)}),createRow:(e,s)=>{e.pin=(n,a,r)=>{const i=a?e.getLeafRows().map(m=>{let{id:d}=m;return d}):[],o=r?e.getParentRows().map(m=>{let{id:d}=m;return d}):[],l=new Set([...o,e.id,...i]);s.setRowPinning(m=>{var d,g;if(n==="bottom"){var c,p;return{top:((c=m?.top)!=null?c:[]).filter(f=>!(l!=null&&l.has(f))),bottom:[...((p=m?.bottom)!=null?p:[]).filter(f=>!(l!=null&&l.has(f))),...Array.from(l)]}}if(n==="top"){var u,x;return{top:[...((u=m?.top)!=null?u:[]).filter(f=>!(l!=null&&l.has(f))),...Array.from(l)],bottom:((x=m?.bottom)!=null?x:[]).filter(f=>!(l!=null&&l.has(f)))}}return{top:((d=m?.top)!=null?d:[]).filter(f=>!(l!=null&&l.has(f))),bottom:((g=m?.bottom)!=null?g:[]).filter(f=>!(l!=null&&l.has(f)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:a,enablePinning:r}=s.options;return typeof a=="function"?a(e):(n=a??r)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:a,bottom:r}=s.getState().rowPinning,i=n.some(l=>a?.includes(l)),o=n.some(l=>r?.includes(l));return i?"top":o?"bottom":!1},e.getPinnedIndex=()=>{var n,a;const r=e.getIsPinned();if(!r)return-1;const i=(n=r==="top"?s.getTopRows():s.getBottomRows())==null?void 0:n.map(o=>{let{id:l}=o;return l});return(a=i?.indexOf(e.id))!=null?a:-1}},createTable:e=>{e.setRowPinning=s=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(s),e.resetRowPinning=s=>{var n,a;return e.setRowPinning(s?Ze():(n=(a=e.initialState)==null?void 0:a.rowPinning)!=null?n:Ze())},e.getIsSomeRowsPinned=s=>{var n;const a=e.getState().rowPinning;if(!s){var r,i;return!!((r=a.top)!=null&&r.length||(i=a.bottom)!=null&&i.length)}return!!((n=a[s])!=null&&n.length)},e._getPinnedRows=(s,n,a)=>{var r;return((r=e.options.keepPinnedRows)==null||r?(n??[]).map(o=>{const l=e.getRow(o,!0);return l.getIsAllParentsExpanded()?l:null}):(n??[]).map(o=>s.find(l=>l.id===o))).filter(Boolean).map(o=>({...o,position:a}))},e.getTopRows=y(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(s,n)=>e._getPinnedRows(s,n,"top"),w(e.options,"debugRows")),e.getBottomRows=y(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(s,n)=>e._getPinnedRows(s,n,"bottom"),w(e.options,"debugRows")),e.getCenterRows=y(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(s,n,a)=>{const r=new Set([...n??[],...a??[]]);return s.filter(i=>!r.has(i.id))},w(e.options,"debugRows"))}},ni={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:T("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=s=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(s),e.resetRowSelection=s=>{var n;return e.setRowSelection(s?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=s=>{e.setRowSelection(n=>{s=typeof s<"u"?s:!e.getIsAllRowsSelected();const a={...n},r=e.getPreGroupedRowModel().flatRows;return s?r.forEach(i=>{i.getCanSelect()&&(a[i.id]=!0)}):r.forEach(i=>{delete a[i.id]}),a})},e.toggleAllPageRowsSelected=s=>e.setRowSelection(n=>{const a=typeof s<"u"?s:!e.getIsAllPageRowsSelected(),r={...n};return e.getRowModel().rows.forEach(i=>{lt(r,i.id,a,!0,e)}),r}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=y(()=>[e.getState().rowSelection,e.getCoreRowModel()],(s,n)=>Object.keys(s).length?et(e,n):{rows:[],flatRows:[],rowsById:{}},w(e.options,"debugTable")),e.getFilteredSelectedRowModel=y(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(s,n)=>Object.keys(s).length?et(e,n):{rows:[],flatRows:[],rowsById:{}},w(e.options,"debugTable")),e.getGroupedSelectedRowModel=y(()=>[e.getState().rowSelection,e.getSortedRowModel()],(s,n)=>Object.keys(s).length?et(e,n):{rows:[],flatRows:[],rowsById:{}},w(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const s=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let a=!!(s.length&&Object.keys(n).length);return a&&s.some(r=>r.getCanSelect()&&!n[r.id])&&(a=!1),a},e.getIsAllPageRowsSelected=()=>{const s=e.getPaginationRowModel().flatRows.filter(r=>r.getCanSelect()),{rowSelection:n}=e.getState();let a=!!s.length;return a&&s.some(r=>!n[r.id])&&(a=!1),a},e.getIsSomeRowsSelected=()=>{var s;const n=Object.keys((s=e.getState().rowSelection)!=null?s:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const s=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:s.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>s=>{e.toggleAllRowsSelected(s.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>s=>{e.toggleAllPageRowsSelected(s.target.checked)}},createRow:(e,s)=>{e.toggleSelected=(n,a)=>{const r=e.getIsSelected();s.setRowSelection(i=>{var o;if(n=typeof n<"u"?n:!r,e.getCanSelect()&&r===n)return i;const l={...i};return lt(l,e.id,n,(o=a?.selectChildren)!=null?o:!0,s),l})},e.getIsSelected=()=>{const{rowSelection:n}=s.getState();return wt(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=s.getState();return ct(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=s.getState();return ct(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof s.options.enableRowSelection=="function"?s.options.enableRowSelection(e):(n=s.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof s.options.enableSubRowSelection=="function"?s.options.enableSubRowSelection(e):(n=s.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof s.options.enableMultiRowSelection=="function"?s.options.enableMultiRowSelection(e):(n=s.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return a=>{var r;n&&e.toggleSelected((r=a.target)==null?void 0:r.checked)}}}},lt=(e,s,n,a,r)=>{var i;const o=r.getRow(s,!0);n?(o.getCanMultiSelect()||Object.keys(e).forEach(l=>delete e[l]),o.getCanSelect()&&(e[s]=!0)):delete e[s],a&&(i=o.subRows)!=null&&i.length&&o.getCanSelectSubRows()&&o.subRows.forEach(l=>lt(e,l.id,n,a,r))};function et(e,s){const n=e.getState().rowSelection,a=[],r={},i=function(o,l){return o.map(m=>{var d;const g=wt(m,n);if(g&&(a.push(m),r[m.id]=m),(d=m.subRows)!=null&&d.length&&(m={...m,subRows:i(m.subRows)}),g)return m}).filter(Boolean)};return{rows:i(s.rows),flatRows:a,rowsById:r}}function wt(e,s){var n;return(n=s[e.id])!=null?n:!1}function ct(e,s,n){var a;if(!((a=e.subRows)!=null&&a.length))return!1;let r=!0,i=!1;return e.subRows.forEach(o=>{if(!(i&&!r)&&(o.getCanSelect()&&(wt(o,s)?i=!0:r=!1),o.subRows&&o.subRows.length)){const l=ct(o,s);l==="all"?i=!0:(l==="some"&&(i=!0),r=!1)}}),r?"all":i?"some":!1}const dt=/([0-9]+)/gm,si=(e,s,n)=>Sn(Q(e.getValue(n)).toLowerCase(),Q(s.getValue(n)).toLowerCase()),ai=(e,s,n)=>Sn(Q(e.getValue(n)),Q(s.getValue(n))),ri=(e,s,n)=>St(Q(e.getValue(n)).toLowerCase(),Q(s.getValue(n)).toLowerCase()),ii=(e,s,n)=>St(Q(e.getValue(n)),Q(s.getValue(n))),oi=(e,s,n)=>{const a=e.getValue(n),r=s.getValue(n);return a>r?1:a<r?-1:0},li=(e,s,n)=>St(e.getValue(n),s.getValue(n));function St(e,s){return e===s?0:e>s?1:-1}function Q(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function Sn(e,s){const n=e.split(dt).filter(Boolean),a=s.split(dt).filter(Boolean);for(;n.length&&a.length;){const r=n.shift(),i=a.shift(),o=parseInt(r,10),l=parseInt(i,10),m=[o,l].sort();if(isNaN(m[0])){if(r>i)return 1;if(i>r)return-1;continue}if(isNaN(m[1]))return isNaN(o)?-1:1;if(o>l)return 1;if(l>o)return-1}return n.length-a.length}const ge={alphanumeric:si,alphanumericCaseSensitive:ai,text:ri,textCaseSensitive:ii,datetime:oi,basic:li},ci={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:T("sorting",e),isMultiSortEvent:s=>s.shiftKey}),createColumn:(e,s)=>{e.getAutoSortingFn=()=>{const n=s.getFilteredRowModel().flatRows.slice(10);let a=!1;for(const r of n){const i=r?.getValue(e.id);if(Object.prototype.toString.call(i)==="[object Date]")return ge.datetime;if(typeof i=="string"&&(a=!0,i.split(dt).length>1))return ge.alphanumeric}return a?ge.text:ge.basic},e.getAutoSortDir=()=>{const n=s.getFilteredRowModel().flatRows[0];return typeof n?.getValue(e.id)=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,a;if(!e)throw new Error;return Ge(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(a=s.options.sortingFns)==null?void 0:a[e.columnDef.sortingFn])!=null?n:ge[e.columnDef.sortingFn]},e.toggleSorting=(n,a)=>{const r=e.getNextSortingOrder(),i=typeof n<"u"&&n!==null;s.setSorting(o=>{const l=o?.find(u=>u.id===e.id),m=o?.findIndex(u=>u.id===e.id);let d=[],g,c=i?n:r==="desc";if(o!=null&&o.length&&e.getCanMultiSort()&&a?l?g="toggle":g="add":o!=null&&o.length&&m!==o.length-1?g="replace":l?g="toggle":g="replace",g==="toggle"&&(i||r||(g="remove")),g==="add"){var p;d=[...o,{id:e.id,desc:c}],d.splice(0,d.length-((p=s.options.maxMultiSortColCount)!=null?p:Number.MAX_SAFE_INTEGER))}else g==="toggle"?d=o.map(u=>u.id===e.id?{...u,desc:c}:u):g==="remove"?d=o.filter(u=>u.id!==e.id):d=[{id:e.id,desc:c}];return d})},e.getFirstSortDir=()=>{var n,a;return((n=(a=e.columnDef.sortDescFirst)!=null?a:s.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var a,r;const i=e.getFirstSortDir(),o=e.getIsSorted();return o?o!==i&&((a=s.options.enableSortingRemoval)==null||a)&&(!(n&&(r=s.options.enableMultiRemove)!=null)||r)?!1:o==="desc"?"asc":"desc":i},e.getCanSort=()=>{var n,a;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((a=s.options.enableSorting)!=null?a:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,a;return(n=(a=e.columnDef.enableMultiSort)!=null?a:s.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const a=(n=s.getState().sorting)==null?void 0:n.find(r=>r.id===e.id);return a?a.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,a;return(n=(a=s.getState().sorting)==null?void 0:a.findIndex(r=>r.id===e.id))!=null?n:-1},e.clearSorting=()=>{s.setSorting(n=>n!=null&&n.length?n.filter(a=>a.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return a=>{n&&(a.persist==null||a.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?s.options.isMultiSortEvent==null?void 0:s.options.isMultiSortEvent(a):!1))}}},createTable:e=>{e.setSorting=s=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(s),e.resetSorting=s=>{var n,a;e.setSorting(s?[]:(n=(a=e.initialState)==null?void 0:a.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},di=[kr,Yr,qr,Ur,$r,Mr,Jr,Qr,ci,Hr,Zr,ei,ti,ni,Kr];function ui(e){var s,n;const a=[...di,...(s=e._features)!=null?s:[]];let r={_features:a};const i=r._features.reduce((p,u)=>Object.assign(p,u.getDefaultOptions==null?void 0:u.getDefaultOptions(r)),{}),o=p=>r.options.mergeOptions?r.options.mergeOptions(i,p):{...i,...p};let m={...{},...(n=e.initialState)!=null?n:{}};r._features.forEach(p=>{var u;m=(u=p.getInitialState==null?void 0:p.getInitialState(m))!=null?u:m});const d=[];let g=!1;const c={_features:a,options:{...i,...e},initialState:m,_queue:p=>{d.push(p),g||(g=!0,Promise.resolve().then(()=>{for(;d.length;)d.shift()();g=!1}).catch(u=>setTimeout(()=>{throw u})))},reset:()=>{r.setState(r.initialState)},setOptions:p=>{const u=J(p,r.options);r.options=o(u)},getState:()=>r.options.state,setState:p=>{r.options.onStateChange==null||r.options.onStateChange(p)},_getRowId:(p,u,x)=>{var f;return(f=r.options.getRowId==null?void 0:r.options.getRowId(p,u,x))!=null?f:`${x?[x.id,u].join("."):u}`},getCoreRowModel:()=>(r._getCoreRowModel||(r._getCoreRowModel=r.options.getCoreRowModel(r)),r._getCoreRowModel()),getRowModel:()=>r.getPaginationRowModel(),getRow:(p,u)=>{let x=(u?r.getPrePaginationRowModel():r.getRowModel()).rowsById[p];if(!x&&(x=r.getCoreRowModel().rowsById[p],!x))throw new Error;return x},_getDefaultColumnDef:y(()=>[r.options.defaultColumn],p=>{var u;return p=(u=p)!=null?u:{},{header:x=>{const f=x.header.column.columnDef;return f.accessorKey?f.accessorKey:f.accessorFn?f.id:null},cell:x=>{var f,v;return(f=(v=x.renderValue())==null||v.toString==null?void 0:v.toString())!=null?f:null},...r._features.reduce((x,f)=>Object.assign(x,f.getDefaultColumnDef==null?void 0:f.getDefaultColumnDef()),{}),...p}},w(e,"debugColumns")),_getColumnDefs:()=>r.options.columns,getAllColumns:y(()=>[r._getColumnDefs()],p=>{const u=function(x,f,v){return v===void 0&&(v=0),x.map(h=>{const _=Pr(r,h,v,f),N=h;return _.columns=N.columns?u(N.columns,_,v+1):[],_})};return u(p)},w(e,"debugColumns")),getAllFlatColumns:y(()=>[r.getAllColumns()],p=>p.flatMap(u=>u.getFlatColumns()),w(e,"debugColumns")),_getAllFlatColumnsById:y(()=>[r.getAllFlatColumns()],p=>p.reduce((u,x)=>(u[x.id]=x,u),{}),w(e,"debugColumns")),getAllLeafColumns:y(()=>[r.getAllColumns(),r._getOrderColumnsFn()],(p,u)=>{let x=p.flatMap(f=>f.getLeafColumns());return u(x)},w(e,"debugColumns")),getColumn:p=>r._getAllFlatColumnsById()[p]};Object.assign(r,c);for(let p=0;p<r._features.length;p++){const u=r._features[p];u==null||u.createTable==null||u.createTable(r)}return r}function gi(){return e=>y(()=>[e.options.data],s=>{const n={rows:[],flatRows:[],rowsById:{}},a=function(r,i,o){i===void 0&&(i=0);const l=[];for(let d=0;d<r.length;d++){const g=Ir(e,e._getRowId(r[d],d,o),r[d],d,i,void 0,o?.id);if(n.flatRows.push(g),n.rowsById[g.id]=g,l.push(g),e.options.getSubRows){var m;g.originalSubRows=e.options.getSubRows(r[d],d),(m=g.originalSubRows)!=null&&m.length&&(g.subRows=a(g.originalSubRows,i+1,g))}}return l};return n.rows=a(s),n},w(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function mi(){return e=>y(()=>[e.getState().sorting,e.getPreSortedRowModel()],(s,n)=>{if(!n.rows.length||!(s!=null&&s.length))return n;const a=e.getState().sorting,r=[],i=a.filter(m=>{var d;return(d=e.getColumn(m.id))==null?void 0:d.getCanSort()}),o={};i.forEach(m=>{const d=e.getColumn(m.id);d&&(o[m.id]={sortUndefined:d.columnDef.sortUndefined,invertSorting:d.columnDef.invertSorting,sortingFn:d.getSortingFn()})});const l=m=>{const d=m.map(g=>({...g}));return d.sort((g,c)=>{for(let u=0;u<i.length;u+=1){var p;const x=i[u],f=o[x.id],v=f.sortUndefined,h=(p=x?.desc)!=null?p:!1;let _=0;if(v){const N=g.getValue(x.id),k=c.getValue(x.id),P=N===void 0,C=k===void 0;if(P||C){if(v==="first")return P?-1:1;if(v==="last")return P?1:-1;_=P&&C?0:P?v:-v}}if(_===0&&(_=f.sortingFn(g,c,x.id)),_!==0)return h&&(_*=-1),f.invertSorting&&(_*=-1),_}return g.index-c.index}),d.forEach(g=>{var c;r.push(g),(c=g.subRows)!=null&&c.length&&(g.subRows=l(g.subRows))}),d};return{rows:l(n.rows),flatRows:r,rowsById:n.rowsById}},w(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}function Ut(e,s){return e?pi(e)?R.createElement(e,s):e:null}function pi(e){return xi(e)||typeof e=="function"||fi(e)}function xi(e){return typeof e=="function"&&(()=>{const s=Object.getPrototypeOf(e);return s.prototype&&s.prototype.isReactComponent})()}function fi(e){return typeof e=="object"&&typeof e.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}function hi(e){const s={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=R.useState(()=>({current:ui(s)})),[a,r]=R.useState(()=>n.current.initialState);return n.current.setOptions(i=>({...i,...e,state:{...a,...e.state},onStateChange:o=>{r(o),e.onStateChange==null||e.onStateChange(o)}})),n.current}function vi(e,s){const n=document.createElement("a");n.href=`data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,${e}`,n.download=s,n.click()}function bi(e,s){const n=new Date().toISOString().split("T")[0].replace(/-/g,""),a={all:b.getState().language.completo,success:b.getState().language.sucesso,failed:b.getState().language.falhas}[s];return`${e}_${a}_${n}.xlsx`}const _i=async(e,s,n)=>{const a={type:e,report:s,campaign:n},r=b.getState().language;if(e==="success"&&s.successContacts.length===0){A({type:"Error",message:r.nao_ha_contatos_com_sucesso_para_exportar,position:"top-right"});return}else if(e==="failed"&&s.failedContacts.length===0){A({type:"Error",message:r.nao_ha_contatos_com_falha_para_exportar,position:"top-right"});return}try{const i=await Lt.post(`${Bs.backend_utils}api/XLSX/bulkSendMessage/exportReport`,a,{headers:{"Content-Type":"application/json"}}),o=bi(n.name,e);vi(i.data.XLSXbase64,o),A({type:"Success",message:r.relatorio_exportado_sucesso,position:"top-right"})}catch(i){console.error("Erro ao exportar relatório da campanha:",i),Lt.isAxiosError(i)&&console.error("Detalhes do erro:",i.response?.data),A({type:"Error",message:r.relatorio_exportado_erro,position:"top-right"})}},Ci=({report:e,campaign:s})=>{const n=b(r=>r.language),a=async r=>{await _i(r,e,s),L.getState().close()};return t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"px-3 pb-2 border-b border-solid border-[var(--sidebar-line-color)]",children:t.jsx("p",{className:"text-xs 2xl:text-sm font-medium",children:n.exportar_relatorio})}),t.jsxs("div",{className:"pt-1",children:[t.jsxs("button",{onClick:()=>a("all"),className:"w-full px-3 py-2 text-left text-xs 2xl:text-sm hover:bg-slate-500 hover:bg-opacity-10 flex items-center gap-2 transition-colors",children:[t.jsx(Ps,{className:"text-base"}),t.jsx("span",{children:n.todos})]}),t.jsxs("button",{onClick:()=>a("success"),className:"w-full px-3 py-2 text-left text-xs 2xl:text-sm hover:bg-slate-500 hover:bg-opacity-10 flex items-center gap-2 transition-colors",children:[t.jsx(xt,{className:"text-base text-green-600"}),t.jsx("span",{children:n.apenas_sucessos})]}),t.jsxs("button",{onClick:()=>a("failed"),className:"w-full px-3 py-2 text-left text-xs 2xl:text-sm hover:bg-slate-500 hover:bg-opacity-10 flex items-center gap-2 transition-colors",children:[t.jsx(ks,{className:"text-base text-red-600"}),t.jsx("span",{children:n.apenas_falhas})]})]})]})},ji=e=>{if(!e)return"-";if(e<1)return"< 1 min";if(e<60)return`${Math.round(e)} min`;const s=Math.floor(e/60),n=Math.round(e%60);return`${s}h ${n}m`},yi=()=>{const e=j.getState().campaigns,s=ht.getState().removeReport,{open:n}=L.getState(),a=b.getState().language;return[{accessorKey:"campaignId",header:a.campanha,cell:r=>{const{campaignId:i,totalExecutions:o}=r.row.original;return t.jsxs("div",{className:"flex flex-col gap-0.5",children:[t.jsx("span",{className:"font-medium text-xs 2xl:text-sm",children:e.find(l=>l.id===i)?.name||a.capanha_removida}),t.jsxs("span",{className:"text-[10px] 2xl:text-xs text-gray-400",children:[o," ",a.execucoes]})]})}},{accessorKey:"startedAt",header:a.inicio,cell:r=>{const i=r.row.original.startedAt;return t.jsx("span",{className:"text-xs 2xl:text-sm",children:new Date(i).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"})})}},{accessorKey:"completedAt",header:a.conclusao,cell:r=>{const i=r.row.original.completedAt;return i?t.jsx("span",{className:"text-xs 2xl:text-sm",children:new Date(i).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"2-digit",hour:"2-digit",minute:"2-digit"})}):t.jsx("span",{className:"text-xs 2xl:text-sm text-gray-400",children:"-"})}},{id:"duration",header:a.duracao,cell:r=>{const{startedAt:i,completedAt:o}=r.row.original,l=(new Date(o).getTime()-new Date(i).getTime())/6e4;return t.jsx("span",{className:"text-xs 2xl:text-sm",children:ji(l)})}},{accessorKey:"successContacts",header:a.sucessos,cell:r=>{const{successContacts:i,totalContacts:o}=r.row.original;return t.jsx("span",{className:`text-xs 2xl:text-sm font-medium ${i.length===o?"text-green-600":"text-gray-400"}`,children:i.length})}},{accessorKey:"failedContacts",header:a.falhas,cell:r=>{const{failedContacts:i}=r.row.original;return t.jsx("span",{className:`text-xs 2xl:text-sm font-medium ${i.length>0?"text-red-600":"text-gray-400"}`,children:i.length})}},{id:"totalActions",header:a.total_de_acoes_enviadas,cell:r=>{const{totalActions:i,totalContacts:o}=r.row.original,l=i*o;return t.jsx("span",{className:"text-xs 2xl:text-sm font-medium",children:l})}},{id:"actions",header:a.acoes,cell:r=>{const i=r.row.original,o=m=>{const d=e.find(g=>g.id===i.campaignId);d&&n(t.jsx(Ci,{report:i,campaign:d}),{placement:"bottom"},m.currentTarget)},l=()=>{rn({icon:t.jsx(st,{className:"text-red-500"}),content:a.toast_delete,confirmText:a.remover,submit:()=>s(i.campaignId)})};return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:o,className:"p-1 hover:bg-slate-500 hover:bg-opacity-10 rounded transition-colors",title:a.exportar_relatorio,children:t.jsx(Is,{className:"text-lg text-[var(--primaria)]"})}),t.jsx("button",{onClick:l,className:"p-1 hover:bg-slate-500 hover:bg-opacity-10 rounded transition-colors",title:a.remover_relatorio,children:t.jsx(st,{className:"text-lg text-red-500"})})]})}}]},wi=()=>{const e=ht(o=>o.reports),[s,n]=K.useState([{id:"completedAt",desc:!0}]),a=K.useMemo(()=>yi(),[]),r=hi({data:e,columns:a,state:{sorting:s},onSortingChange:n,getCoreRowModel:gi(),getSortedRowModel:mi()}),i=o=>{if(!o.column.getCanSort())return null;const l=o.column.getIsSorted();return l==="asc"?t.jsx($s,{className:"text-[var(--primaria)]"}):l==="desc"?t.jsx(Ms,{className:"text-[var(--primaria)]"}):t.jsx(As,{className:"opacity-50"})};return t.jsx("div",{className:"flex-1 overflow-auto",children:t.jsxs("table",{className:"table table-zebra w-full",children:[t.jsx("thead",{children:r.getHeaderGroups().map(o=>t.jsx("tr",{children:o.headers.map(l=>t.jsx("th",{className:l.column.getCanSort()?"cursor-pointer select-none hover:bg-base-200":"",onClick:l.column.getToggleSortingHandler(),children:t.jsxs("div",{className:"flex items-center gap-2",children:[Ut(l.column.columnDef.header,l.getContext()),i(l)]})},l.id))},o.id))}),t.jsx("tbody",{children:r.getRowModel().rows.map(o=>t.jsx("tr",{className:"hover",children:o.getVisibleCells().map(l=>t.jsx("td",{children:Ut(l.column.columnDef.cell,l.getContext())},l.id))},o.id))})]})})},Si=()=>{const e=b(n=>n.language),s=ht(n=>n.reports);return t.jsxs("div",{className:"h-full flex flex-col",children:[t.jsx("div",{className:"flex items-center justify-between flex-shrink-0 border-b border-solid border-[var(--eem-border-primary)] p-4 2xl:p-6",children:t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx("h2",{className:"text-lg 2xl:text-xl font-bold leading-none",children:e.relatorios_campanhas}),t.jsx("div",{className:"badge badge-xs 2xl:badge-sm bg-[var(--primaria)] text-white",children:s.length})]})}),t.jsx("div",{className:"flex-1 min-h-0 p-4 2xl:p-6 overflow-auto",children:s.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-gray-400",children:[t.jsx($e,{className:"text-6xl mb-4 opacity-50"}),t.jsx("p",{className:"text-lg font-medium",children:e.nenhuma_campanha_executada}),t.jsx("p",{className:"text-sm mt-1",children:e.execute_para_ver_metricas})]}):t.jsxs("div",{className:"h-full flex flex-col gap-3 2xl:gap-6",children:[t.jsxs("div",{className:"w-full border border-solid border-[var(--sidebar-line-color)] rounded-md p-4 2xl:p-6 space-y-4 flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-1.5 2xl:gap-2 text-sm 2xl:text-base font-medium",children:[t.jsx($e,{className:"text-lg 2xl:text-2xl"}),t.jsx("span",{children:e.resumo_geral})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[t.jsx(We,{icon:t.jsx(xt,{className:"text-green-600 text-[20px] 2xl:text-[24px]"}),value:s.length,label:e.campanhas_concluidas,description:e.numero_total_de_campanhas_finalizadas,iconBgColor:"bg-[#d2fecc]"}),t.jsx(We,{icon:t.jsx(Ie,{className:"text-purple-600 text-[20px] 2xl:text-[24px]"}),value:s.reduce((n,a)=>n+a.totalContacts,0),label:e.total_de_contatos,description:e.soma_de_todos_os_contatos_processados,iconBgColor:"bg-[#e5ccff]"}),t.jsx(We,{icon:t.jsx(Ds,{className:"text-orange-600 text-[20px] 2xl:text-[24px]"}),value:s.reduce((n,a)=>n+a.totalActions*a.totalContacts,0),label:e.total_de_acoes_enviadas,description:e.soma_de_todas_as_acoes_enviadas,iconBgColor:"bg-[#ffe5cc]"})]})]}),t.jsxs("div",{className:"w-full border border-solid border-[var(--sidebar-line-color)] rounded-md overflow-hidden flex flex-col flex-1 min-h-0",children:[t.jsx("div",{className:"p-4 2xl:p-6 border-b border-solid border-[var(--sidebar-line-color)] flex-shrink-0",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-1.5 2xl:gap-2 text-sm 2xl:text-base font-medium",children:[t.jsx($e,{className:"text-lg 2xl:text-2xl"}),t.jsx("span",{children:e.historico_campanhas})]}),t.jsxs("span",{className:"text-xs 2xl:text-sm text-gray-500",children:[s.length," ",s.length===1?`${e.campanha}`:`${e.campanhas}`]})]})}),t.jsx(wi,{})]})]})})]})},Ni=()=>{const e=le(a=>a.activePage),s=b(a=>a.language),n=()=>{switch(e){case"sendFastCampaign":return t.jsx(jr,{});case"campaigns":return t.jsx(Sr,{});case"analytics":return t.jsx(Si,{});default:return t.jsx("div",{className:"px-36 pt-12",children:s.selecione_pagina_valida})}};return t.jsx("main",{className:"flex-1 flex flex-col overflow-auto",children:n()})};function Ri(){const{crm:e}=ut.getState(),{activeCrm:s}=re.getState(),{activeCrmTab:n}=je.getState();if(s==="all"){const i=e.flatMap(o=>o.list??[]);return n==="all"?i.flatMap(o=>o.chats??[]):i.filter(o=>o.id===n).flatMap(o=>o.chats??[])}const r=e.find(i=>i.id===s)?.list??[];return n==="all"?r.flatMap(i=>i.chats??[]):r.filter(i=>i.id===n).flatMap(i=>i.chats??[])}function Fi(){const{userTabs:e}=bt.getState(),{activeUserTab:s}=ye.getState();return s==="all"?e.flatMap(a=>a.chats??[]):e.find(a=>a.id===s)?.chats??[]}async function Pi(){const{activeSwitch:e}=ie.getState(),n=(e==="crm"?Ri():Fi()).map(r=>({...r,name:r.name&&r.name.trim()!==""?r.name:r.id}));return Array.from(new Map(n.map(r=>[r.id,r])).values())}let me=null;const ki=300*1e3;async function Ii(){const e=Date.now(),{activeGroup:s}=Ee.getState(),n=String(s);if(me&&me.group===n&&e-me.timestamp<ki)return me.data;let a=[];if(s==="all"){const r=await M.Chat("List","onlyGroups");for(const i of r){const o=await M.Chat("List",{type:"getContatosGrupos",activeLid:!0,id:i.id});o&&o.length>0&&(a=[...a,...o])}a=Array.from(new Map(a.map(i=>[i.id,i])).values())}else{const r=await M.Chat("List",{type:"getContatosGrupos",activeLid:!0,id:s});r&&r.length>0&&(a=r)}return me={data:a,group:n,timestamp:e},a}let pe=null;const $i=300*1e3;async function Mi(){try{const e=Date.now();if(pe&&e-pe.timestamp<$i)return pe.data;const n=(await M.Chat("List","onlyGroups")).filter(a=>a?.id&&a?.name?.trim()).sort((a,r)=>a.name.toLowerCase().localeCompare(r.name.toLowerCase(),"pt"));return pe={data:n,timestamp:e},n}catch(e){return console.error("Erro ao buscar grupos:",e),pe?.data||[]}}let xe=null;const Ai=300*1e3;async function Di(){try{const e=Date.now();if(xe&&e-xe.timestamp<Ai)return xe.data;const n=(await M.Chat("List")).filter(a=>a?.id);return xe={data:n,timestamp:e},n}catch(e){return console.error("Erro ao buscar contatos da caixa de entrada:",e),xe?.data||[]}}const fe={},zi=300*1e3;async function Ei(){try{const e=Date.now(),{activeLabel:s}=Ce.getState(),n=String(s);if(fe[n]&&e-fe[n].timestamp<zi)return fe[n].data;let a=[];if(s==="all"){const r=await M.Labels("getAllLabels");for(const i of r){const o=await M.Contact("List",{type:"withLabels",id:i.id});o&&o.length>0&&(a=[...a,...o])}a=Array.from(new Map(a.map(i=>[i.id,i])).values())}else{const r=await M.Contact("List",{type:"withLabels",id:s});r&&r.length>0&&(a=r)}return fe[n]={data:a,timestamp:e},a}catch(e){return console.error("Erro ao buscar contatos por label:",e),fe[String(Ce.getState().activeLabel)]?.data||[]}}let he=null;const Li=300*1e3;async function Ti(){try{const e=Date.now();if(he&&e-he.timestamp<Li)return he.data;const n=(await M.Contact("List","onlyMyContacts")).map(r=>({...r,_sortKey:(r.name??"").toLowerCase()}));n.sort((r,i)=>r._sortKey.localeCompare(i._sortKey,"pt"));const a=n.map(({_sortKey:r,...i})=>i);return he={data:a,timestamp:e},a}catch(e){return console.error("Erro ao buscar contatos salvos:",e),he?.data||[]}}async function Vi(){const e=Te.getState().importedContacts;return!e||e.length===0?[]:e}const E=e=>(e??"").toString().trim().toLowerCase(),Wt=e=>{const s=E(e);return s?["m","masc","masculino","male","h","homem"].includes(s)?"male":["f","fem","feminino","female","mulher"].includes(s)?"female":s==="male"||s==="female"?s:null:null},Z=e=>{if(!e)return null;const s=e.toString().trim();if(!s)return null;const n=s.split(/[\/-]/).map(o=>o.trim());if(n.length<3)return null;if(n[0].length===4){const[o,l,m]=n.map(d=>Number(d));return!isFinite(o)||!isFinite(l)||!isFinite(m)?null:new Date(o,l-1,m)}const[a,r,i]=n.map(o=>Number(o));return!isFinite(i)||!isFinite(r)||!isFinite(a)?null:new Date(i,r-1,a)},Gi=(e,s)=>{const n=Z(e),a=Z(s);return!n||!a?!1:n.getDate()===a.getDate()&&n.getMonth()===a.getMonth()};function Oi(){const e=W.getState().appliedFilters,s=ae.getState().selectedOption,n=(e.interestedProducts||[]).map(p=>E(p)).filter(Boolean),a=E(e.city),r=E(e.state),i=E(e.company),o=E(e.jobTitle),l=E(e.leadSource),m=e.gender?Wt(e.gender):null,d=e.entryDate?Z(e.entryDate):null,g=e.exitDate?Z(e.exitDate):null,c=e.birthDate??null;return p=>{const u=Wt(p.sexo);if(s==="birthdaysThisMonth"){const x=Z(p.dataNascimento),f=new Date().getMonth();if((x?x.getMonth():-1)!==f)return!1}else{if(s==="genderMale"&&u!=="male")return!1;if(s==="genderFemale"&&u!=="female")return!1}if(m&&u!==m||a&&!E(p.cidade).includes(a)||r&&E(p.estado)!==r||i&&!E(p.empresa).includes(i)||o&&!E(p.cargo).includes(o)||l&&E(p.origemLead)!==l)return!1;if(n.length>0){const x=(p.produtos||[]).map(v=>E(v));if(!n.some(v=>x.includes(v)))return!1}if(c&&p.dataNascimento&&!Gi(p.dataNascimento,c))return!1;if(d&&p.entrada){const x=Z(p.entrada);if(x&&x<d)return!1}if(g&&p.saida){const x=Z(p.saida);if(x&&x>g)return!1}return!0}}async function Hi(){const e=Gs.getState().perfil,s=Oi(),n=e.filter(s);return await Promise.all(n.map(async r=>{const i=gt(r.userID),o=await M.Contact("get",i);return{id:o.id||r.userID,name:o.name||r.userID}}))}const Bi={savedContacts:Ti,inbox:Di,labels:Ei,groups:Mi,groupContacts:Ii,crmOrTabs:Pi,contactProfile:Hi,importSpreadsheet:Vi},qi=async()=>{const e=ne.getState().activeFilter.id,s=ze.getState().groupments.find(a=>a.id===e);return s?s.contacts||[]:[]};async function Ui(){const e=ne.getState().activeFilter;if(e.type==="groupment")return qi();const s=Bi[e.id];return s?await s():(console.warn(`Nenhuma função de busca definida para o filtro: ${e.id}`),[])}const Wi=1e3;async function Ki(e){const{setContacts:s,setLoading:n}=D.getState();if(e?.aborted)throw new DOMException("Operation was aborted","AbortError");n(!0),s([]);try{const a=new Promise((l,m)=>{const d=setTimeout(l,Wi);e?.addEventListener("abort",()=>{clearTimeout(d),m(new DOMException("Operation was aborted","AbortError"))})}),[r]=await Promise.all([Ui(),a]);if(e?.aborted)throw new DOMException("Operation was aborted","AbortError");const i=await M.Conn("getMyUserId"),o=r.filter(l=>l?.id!==void 0&&l?.id!=null&&l.id.trim()&&!Os(l)&&l.id!=="0"&&l.id!=="status"&&l.id!==gt(i)&&l.id!==i);if(!o.length){console.warn("Nenhum contato encontrado"),s([]);return}if(e?.aborted)throw new DOMException("Operation was aborted","AbortError");s(o)}catch(a){a.name==="AbortError"?console.warn("Operação abortada pelo usuário"):console.error("Erro ao buscar contatos:",a),s([])}finally{n(!1)}}const Xi=e=>{const s=R.useRef(null);return R.useEffect(()=>{if(!e)return;const r=j.getState().campaigns.find(o=>o.id===e)?.actions??[];qe.getState().setAcao(r),s.current=r;const i=qe.subscribe(o=>{const l=o.acao??[];l!==s.current&&(s.current=l,j.getState().updateCampaign(e,{actions:l}))});return()=>{i()}},[e]),{clearAcaoOnly:()=>{qe.getState().clearAcao(),s.current=null}}};function Yi(){const e=j(u=>u.currentCampaignId),{getNewController:s}=ea(),{clearAcaoOnly:n}=Xi(e),a=ne(u=>u.activeFilter),r=Ce(u=>u.activeLabel),i=Ee(u=>u.activeGroup),o=ie(u=>u.activeSwitch),l=re(u=>u.activeCrm),m=ye(u=>u.activeUserTab),d=je(u=>u.activeCrmTab),g=W(u=>u.appliedFilters),c=ae(u=>u.selectedOption),p=Te(u=>u.importedContacts);return R.useEffect(()=>{const u=s();return Ki(u),()=>n()},[a,r,i,g,o,l,m,d,c,p]),t.jsxs("div",{className:"w-screen h-screen overflow-hidden bg-[var(--eem-bg-primary)] flex text-[var(--primary-strong)]","data-id":"eem-new",children:[t.jsx(aa,{}),t.jsx(Ni,{})]})}function zo(){return la(j,1e3)?t.jsx(Yi,{}):t.jsx("div",{className:"w-screen h-screen flex items-center justify-center bg-[var(--eem-bg-primary)]",children:t.jsx(ta,{size:60,className:"text-[var(--primaria)] animate-spin"})})}export{zo as default};
